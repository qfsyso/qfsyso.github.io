<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Node | MLOG</title>
<meta name=keywords content><meta name=description content="A simple blog "><meta name=author content="dwd"><link rel=canonical href=https://qfsyso.github.io/tags/node/><link crossorigin=anonymous href=/assets/css/stylesheet.f49d66caae9ea0fd43f21f29e71a8d3e284517ed770f2aa86fa012953ad3c9ef.css integrity="sha256-9J1myq6eoP1D8h8p5xqNPihFF+13Dyqob6ASlTrTye8=" rel="preload stylesheet" as=style><link rel=icon href=https://qfsyso.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://qfsyso.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://qfsyso.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://qfsyso.github.io/apple-touch-icon.png><link rel=mask-icon href=https://qfsyso.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://qfsyso.github.io/tags/node/index.xml><link rel=alternate hreflang=en href=https://qfsyso.github.io/tags/node/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://qfsyso.github.io/tags/node/"><meta property="og:site_name" content="MLOG"><meta property="og:title" content="Node"><meta property="og:description" content="A simple blog "><meta property="og:locale" content="zh-CN"><meta property="og:type" content="website"><meta name=twitter:card content="summary"><meta name=twitter:title content="Node"><meta name=twitter:description content="A simple blog "></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://qfsyso.github.io/ accesskey=h title="MLOG (Alt + H)">MLOG</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://qfsyso.github.io/posts/ title=Archive><span>Archive</span></a></li><li><a href=https://qfsyso.github.io/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://qfsyso.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><header class=page-header><h1>Node</h1></header><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>NodeRed Test YTB Change NetWrok</h2></header><div class=entry-content><p>Setup Node-RED ä¸€ã€å‰ææ¡ä»¶ï¼šå®‰è£… Node.js Node-RED éœ€è¦ Node.js ç¯å¢ƒï¼Œéœ€å…ˆå®‰è£… Node.jsã€‚
æ‰“å¼€ Node.js å®˜ç½‘ï¼šhttps://nodejs.org/ ä¸‹è½½å¹¶å®‰è£… LTSï¼ˆé•¿æœŸæ”¯æŒï¼‰ç‰ˆæœ¬ å®‰è£…å®Œæˆåæ‰“å¼€ç»ˆç«¯ï¼ˆWin + X â†’ ç»ˆç«¯ï¼‰ï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸï¼š node -v npm -v äºŒã€å…¨å±€å®‰è£… Node-RED åœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£… Node-REDï¼š
npm install -g --unsafe-perm node-red è¯´æ˜ï¼š
-gï¼šè¡¨ç¤ºå…¨å±€å®‰è£… --unsafe-permï¼šè§£å†³æŸäº›ç³»ç»Ÿä¸­æƒé™é—®é¢˜ ä¸‰ã€å¯åŠ¨ Node-RED å®‰è£…å®Œæˆåï¼Œåœ¨ç»ˆç«¯ä¸­è¿è¡Œï¼š
node-red è¾“å‡ºç±»ä¼¼ä»¥ä¸‹å†…å®¹ï¼š
Server now running at http://127.0.0.1:1880/ å››ã€è®¿é—® Node-RED ç¼–è¾‘å™¨ æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š
http://localhost:1880 å³å¯è¿›å…¥å›¾å½¢åŒ–æµç¨‹ç¼–è¾‘ç•Œé¢ã€‚
ğŸ› ï¸ äº”ã€å¯é€‰ï¼šåˆ›å»ºæ¡Œé¢å¿«æ·æ–¹å¼ï¼ˆ.bat å¯åŠ¨è„šæœ¬ï¼‰ åˆ›å»ºä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š
@echo off title Node-RED node-red pause ä¿å­˜ä¸º node-red.bat
åŒå‡»å³å¯å¯åŠ¨ Node-RED
å…­ã€ï¼ˆå¯é€‰ï¼‰å°† Node-RED ä½œä¸ºåå°æœåŠ¡è¿è¡Œ ä½ å¯ä»¥ä½¿ç”¨å¦‚ä¸‹å·¥å…·å®ç°åå°æœåŠ¡ï¼š
pm2ï¼ˆæ¨èï¼‰ï¼šé€‚ç”¨äº Node....</p></div><footer class=entry-footer><span title='2025-05-25 13:07:23 +0800 +0800'>May 25, 2025</span>&nbsp;Â·&nbsp;12 min&nbsp;Â·&nbsp;dwd</footer><a class=entry-link aria-label="post link to NodeRed Test YTB Change NetWrok" href=https://qfsyso.github.io/posts/nodered-test-ytb-change-netwrok/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>gRPC</h2></header><div class=entry-content><p>gRPCï¼ˆGoogle Remote Procedure Callï¼‰ æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½ã€å¼€æºå’Œé€šç”¨çš„RPCæ¡†æ¶ï¼Œæœ€åˆç”±Googleå¼€å‘ã€‚å®ƒä½¿ç”¨HTTP/2ä½œä¸ºä¼ è¾“åè®®ï¼Œå¹¶é»˜è®¤é‡‡ç”¨Protocol Buffersä½œä¸ºæ¥å£å®šä¹‰è¯­è¨€ï¼ˆIDLï¼‰å’Œæ¶ˆæ¯æ ¼å¼ã€‚gRPCæ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºC++ã€Javaã€Pythonã€Goã€Rubyã€C#ã€Node.jsã€PHPç­‰ã€‚
gRPC ç‰¹ç‚¹ï¼š é«˜æ•ˆçš„æ•°æ®äº¤æ¢ï¼šé€šè¿‡ä½¿ç”¨Protocol Buffersï¼ˆProtobufï¼‰ï¼ŒgRPCèƒ½å¤Ÿä»¥äºŒè¿›åˆ¶å½¢å¼åºåˆ—åŒ–å’Œååºåˆ—åŒ–æ•°æ®ï¼Œè¿™æ¯”JSONæˆ–XMLç­‰æ–‡æœ¬æ ¼å¼æ›´ç´§å‡‘ã€æ›´å¿«ã€‚ åŒå‘æµå¼é€šä¿¡ï¼šgRPCæ”¯æŒå››ç§ä¸åŒçš„è°ƒç”¨ç±»å‹ï¼šç®€å•RPCã€æœåŠ¡å™¨ç«¯æµå¼RPCã€å®¢æˆ·ç«¯æµå¼RPCä»¥åŠåŒå‘æµå¼RPCã€‚è¿™ä½¿å¾—å¼€å‘è€…å¯ä»¥çµæ´»é€‰æ‹©æœ€é€‚åˆå…¶åº”ç”¨åœºæ™¯çš„é€šä¿¡æ¨¡å¼ã€‚ HTTP/2ï¼šgRPCåŸºäºHTTP/2æ„å»ºï¼Œè¿™æ„å‘³ç€å®ƒå¯ä»¥åˆ©ç”¨HTTP/2æä¾›çš„ç‰¹æ€§ï¼Œå¦‚å¤šè·¯å¤ç”¨ã€å¤´éƒ¨å‹ç¼©ã€æµé‡æ§åˆ¶ç­‰ï¼Œæ¥æé«˜æ€§èƒ½å’Œå¯é æ€§ã€‚ è·¨å¹³å°æ”¯æŒï¼šgRPCå¯ä»¥åœ¨å¤šç§ç¯å¢ƒä¸­è¿è¡Œï¼ŒåŒ…æ‹¬äº‘æœåŠ¡ã€æœ¬åœ°éƒ¨ç½²ã€ç§»åŠ¨ç«¯ç­‰ï¼Œå¹¶ä¸”å¯¹å„ç§ç¼–ç¨‹è¯­è¨€éƒ½æœ‰è‰¯å¥½çš„æ”¯æŒï¼Œä¾¿äºæ„å»ºè·¨å¹³å°çš„åº”ç”¨ç¨‹åºã€‚ æ’ä»¶ç³»ç»Ÿï¼šgRPCæä¾›äº†ä¸€ä¸ªæ’ä»¶ç³»ç»Ÿï¼Œå…è®¸ç”¨æˆ·è‡ªå®šä¹‰ä»£ç ç”Ÿæˆé€»è¾‘ï¼Œæˆ–è€…æ·»åŠ é¢å¤–çš„åŠŸèƒ½ï¼Œå¦‚è®¤è¯ã€æ—¥å¿—è®°å½•ã€ç›‘æ§ç­‰ã€‚ å¼ºå¤§çš„ç¤¾åŒºå’Œç”Ÿæ€ç³»ç»Ÿï¼šç”±äºå®ƒæ˜¯Googleçš„äº§å“å¹¶ä¸”è¢«å¹¿æ³›é‡‡ç”¨ï¼Œå› æ­¤æ‹¥æœ‰ä¸€ä¸ªæ´»è·ƒçš„ç¤¾åŒºå’Œä¸°å¯Œçš„ç¬¬ä¸‰æ–¹åº“ä¸å·¥å…·ç”Ÿæ€ç³»ç»Ÿã€‚
gRPC åœºæ™¯ï¼š gRPCçš„ä½¿ç”¨åœºæ™¯éå¸¸å¹¿æ³›ï¼Œå°¤å…¶é€‚ç”¨äºéœ€è¦é«˜æ•ˆã€å¯é å’Œé«˜æ€§èƒ½é€šä¿¡çš„åº”ç”¨ç¨‹åºã€‚ä»¥ä¸‹æ˜¯gRPCçš„ä¸€äº›å…¸å‹ä½¿ç”¨åœºæ™¯ï¼š
1. å¾®æœåŠ¡æ¶æ„ æœåŠ¡é—´é€šä¿¡ï¼šåœ¨å¾®æœåŠ¡æ¶æ„ä¸­ï¼Œä¸åŒçš„æœåŠ¡å¯èƒ½ä½¿ç”¨ä¸åŒçš„ç¼–ç¨‹è¯­è¨€å®ç°ï¼Œå¹¶ä¸”éœ€è¦é«˜æ•ˆåœ°ç›¸äº’äº¤æµã€‚gRPCä»¥å…¶è·¨è¯­è¨€æ”¯æŒå’Œé«˜æ•ˆçš„äºŒè¿›åˆ¶åè®®ï¼ˆProtocol Buffersï¼‰ï¼Œæˆä¸ºæ„å»ºå¾®æœåŠ¡ä¹‹é—´é€šä¿¡å±‚çš„ç†æƒ³é€‰æ‹©ã€‚ è´Ÿè½½å‡è¡¡ï¼šgRPCåŸç”Ÿæ”¯æŒå®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡ï¼Œå¯ä»¥å¸®åŠ©åˆ†æ•£è¯·æ±‚åˆ°å¤šä¸ªæœåŠ¡å®ä¾‹ä¸Šï¼Œæé«˜ç³»ç»Ÿçš„å¯ç”¨æ€§å’Œæ€§èƒ½ã€‚
2. å®æ—¶åº”ç”¨ç¨‹åº åŒå‘æµå¼é€šä¿¡ï¼šgRPCçš„åŒå‘æµç‰¹æ€§éå¸¸é€‚åˆç”¨äºå®æ—¶åº”ç”¨ç¨‹åºï¼Œå¦‚èŠå¤©åº”ç”¨ã€åœ¨çº¿æ¸¸æˆã€è§†é¢‘ä¼šè®®ç­‰ï¼Œå…¶ä¸­å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯éœ€è¦æŒç»­åœ°äº¤æ¢æ•°æ®ã€‚ å®æ—¶æ•°æ®æ¨é€ï¼šå¯¹äºéœ€è¦ä»æœåŠ¡å™¨å‘å®¢æˆ·ç«¯æ¨é€å®æ—¶æ›´æ–°çš„åº”ç”¨ï¼Œä¾‹å¦‚è‚¡ç¥¨è¡Œæƒ…ã€ç¤¾äº¤åª’ä½“é€šçŸ¥ã€ç‰©è”ç½‘è®¾å¤‡çŠ¶æ€æ›´æ–°ç­‰ï¼ŒgRPCçš„æœåŠ¡ç«¯æµå¼RPCå¯ä»¥æœ‰æ•ˆåœ°å®ç°è¿™ä¸€éœ€æ±‚ã€‚
3. ç§»åŠ¨åº”ç”¨ä¸åç«¯é€šä¿¡ è½»é‡çº§æ€§èƒ½ï¼šç”±äºå…¶é«˜æ•ˆçš„åºåˆ—åŒ–æœºåˆ¶å’Œè¾ƒä½çš„ç½‘ç»œå¼€é”€ï¼ŒgRPCç‰¹åˆ«é€‚åˆç§»åŠ¨åº”ç”¨ä¸åç«¯æœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡ï¼Œç‰¹åˆ«æ˜¯åœ¨ç½‘ç»œæ¡ä»¶ä¸ä½³çš„æƒ…å†µä¸‹ï¼Œèƒ½å¤Ÿå‡å°‘ç”µé‡æ¶ˆè€—å¹¶æé«˜å“åº”é€Ÿåº¦ã€‚ å¿«é€Ÿå¼€å‘ï¼šgRPCè‡ªåŠ¨ç”Ÿæˆå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä»£ç çš„èƒ½åŠ›ï¼Œå¤§å¤§ç®€åŒ–äº†å¼€å‘æµç¨‹ï¼Œå°¤å…¶æ˜¯åœ¨å¤šå¹³å°å¼€å‘ç¯å¢ƒä¸­ï¼Œå‡å°‘äº†é‡å¤åŠ³åŠ¨ã€‚
4. è·¨è¯­è¨€é€šä¿¡ å¤šè¯­è¨€ç¯å¢ƒï¼šgRPCæ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€ï¼Œä½¿å¾—å®ƒéå¸¸é€‚åˆç”¨äºè·¨è¯­è¨€é€šä¿¡çš„åœºæ™¯ã€‚ä¸åŒå›¢é˜Ÿæˆ–é¡¹ç›®å¯ä»¥ä½¿ç”¨å„è‡ªç†Ÿæ‚‰çš„æŠ€æœ¯æ ˆï¼ŒåŒæ—¶é€šè¿‡gRPCè¿›è¡Œæ— ç¼é›†æˆã€‚ å¼‚æ„ç³»ç»Ÿé›†æˆï¼šå½“éœ€è¦å°†é—ç•™ç³»ç»Ÿä¸ç°ä»£åº”ç”¨é›†æˆæ—¶ï¼ŒgRPCçš„è·¨è¯­è¨€èƒ½åŠ›å¯ä»¥å¸®åŠ©æ¡¥æ¥è¿™äº›ç³»ç»Ÿï¼Œä¿ƒè¿›ä¿¡æ¯çš„æµåŠ¨å’Œäº¤äº’ã€‚
5. åˆ†å¸ƒå¼ç³»ç»Ÿ èŠ‚ç‚¹é—´é€šä¿¡ï¼šåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œå„èŠ‚ç‚¹ä¹‹é—´çš„é€šä¿¡æ˜¯è‡³å…³é‡è¦çš„ã€‚gRPCæä¾›çš„é«˜æ•ˆç‡å’Œå¯é æ€§ä½¿å…¶æˆä¸ºåˆ†å¸ƒå¼è®¡ç®—ã€ä»»åŠ¡åˆ†å‘ã€é›†ç¾¤ç®¡ç†ç­‰åœºæ™¯ä¸‹çš„é¦–é€‰é€šä¿¡æ¡†æ¶ã€‚ æ•°æ®åŒæ­¥ï¼šgRPCå¯ä»¥ç”¨æ¥å®ç°å®æ—¶çš„æ•°æ®åŒæ­¥ï¼Œç¡®ä¿åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„æ‰€æœ‰èŠ‚ç‚¹éƒ½æ‹¥æœ‰æœ€æ–°çš„æ•°æ®å‰¯æœ¬ã€‚
6. å®¹å™¨åŒ–ç¯å¢ƒ æœåŠ¡å‘ç°ï¼šåœ¨Kubernetesç­‰å®¹å™¨ç¼–æ’å¹³å°ä¸Šï¼ŒgRPCå¯ä»¥é€šè¿‡æœåŠ¡å‘ç°æœºåˆ¶è‡ªåŠ¨æ‰¾åˆ°å…¶ä»–æœåŠ¡ï¼Œç®€åŒ–äº†å®¹å™¨é—´çš„é€šä¿¡é…ç½®ã€‚ è½»é‡çº§éƒ¨ç½²ï¼šgRPCçš„è½»é‡çº§ç‰¹æ€§å’Œå¯¹å¤šè¯­è¨€çš„æ”¯æŒï¼Œä½¿å…¶éå¸¸é€‚åˆå®¹å™¨åŒ–éƒ¨ç½²ï¼Œæœ‰åŠ©äºæå‡èµ„æºåˆ©ç”¨ç‡å’ŒæœåŠ¡æ‰©å±•æ€§ã€‚
7. APIåç«¯æœåŠ¡ é«˜æ€§èƒ½APIï¼šè®¸å¤šå¤§å‹äº’è”ç½‘å…¬å¸ä½¿ç”¨gRPCæ¥æ„å»ºå…¶APIåç«¯æœåŠ¡ï¼Œå› ä¸ºå®ƒæä¾›äº†é«˜æ€§èƒ½ã€å¯æ‰©å±•æ€§å’Œæ˜“äºç»´æŠ¤çš„æ–¹å¼æ¥å¤„ç†å®¢æˆ·ç«¯è¯·æ±‚ã€‚ ç±»å‹å®‰å…¨ï¼šgRPCçš„IDLï¼ˆæ¥å£å®šä¹‰è¯­è¨€ï¼‰å®šä¹‰äº†ä¸¥æ ¼çš„æœåŠ¡å¥‘çº¦ï¼Œä¿è¯äº†æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ä¹‹é—´çš„è°ƒç”¨æ˜¯ç±»å‹å®‰å…¨çš„ï¼Œå‡å°‘äº†è¿è¡Œæ—¶é”™è¯¯çš„å‘ç”Ÿã€‚
8. ç‰©è”ç½‘ï¼ˆIoTï¼‰ ä½èµ„æºæ¶ˆè€—ï¼šgRPCçš„é«˜æ•ˆæ€§èƒ½å’Œç´§å‡‘çš„æ¶ˆæ¯æ ¼å¼ï¼Œä½¿å¾—å®ƒæˆä¸ºè¿æ¥IoTè®¾å¤‡å’Œä¼ æ„Ÿå™¨çš„ç†æƒ³é€šä¿¡åè®®ï¼Œèƒ½å¤Ÿåœ¨æœ‰é™çš„è®¡ç®—å’Œç½‘ç»œèµ„æºä¸‹æä¾›å¯é çš„é€šä¿¡ã€‚ å®æ—¶ç›‘æ§ä¸æ§åˆ¶ï¼šgRPCçš„æµå¼APIéå¸¸é€‚åˆç”¨äºå®æ—¶ç›‘æ§å’Œæ§åˆ¶IoTè®¾å¤‡ï¼Œå¦‚æ™ºèƒ½å®¶å±…ç³»ç»Ÿã€å·¥ä¸šè‡ªåŠ¨åŒ–ç­‰åœºæ™¯ã€‚
9. å¤§æ•°æ®å’Œæœºå™¨å­¦ä¹  æ•°æ®ä¼ è¾“ï¼šåœ¨å¤§æ•°æ®å¤„ç†å’Œæœºå™¨å­¦ä¹ è®­ç»ƒè¿‡ç¨‹ä¸­ï¼ŒgRPCå¯ä»¥ç”¨æ¥é«˜æ•ˆåœ°ä¼ è¾“å¤§é‡æ•°æ®ï¼Œç‰¹åˆ«æ˜¯å½“æ•°æ®éœ€è¦åœ¨ä¸åŒçš„è®¡ç®—èŠ‚ç‚¹ä¹‹é—´ä¼ é€’æ—¶ã€‚ æ¨¡å‹æœåŠ¡ï¼šgRPCå¸¸è¢«ç”¨äºæ„å»ºæœºå™¨å­¦ä¹ æ¨¡å‹çš„æœåŠ¡åŒ–æ¥å£ï¼Œå…è®¸å®¢æˆ·ç«¯ä»¥é«˜æ•ˆçš„æ–¹å¼æŸ¥è¯¢æ¨¡å‹é¢„æµ‹ç»“æœã€‚ ç»¼ä¸Šæ‰€è¿°ï¼ŒgRPCæ˜¯ä¸€ä¸ªçµæ´»ä¸”å¼ºå¤§çš„é€šä¿¡æ¡†æ¶ï¼Œé€‚ç”¨äºå„ç§éœ€è¦é«˜æ•ˆã€å¯é é€šä¿¡çš„åœºæ™¯ã€‚æ— è®ºæ˜¯æ„å»ºå¤æ‚çš„å¾®æœåŠ¡æ¶æ„ï¼Œè¿˜æ˜¯ç®€å•çš„å®¢æˆ·ç«¯-æœåŠ¡å™¨åº”ç”¨ï¼ŒgRPCéƒ½èƒ½æä¾›æ˜¾è‘—çš„ä¼˜åŠ¿ã€‚
Node.js gRPC åˆ›å»ºå’Œè°ƒç”¨ gRPC æœåŠ¡ã€‚åŒ…æ‹¬æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯å®ç°ã€‚
1. å®‰è£…å¿…è¦çš„åŒ… åœ¨é¡¹ç›®ç›®å½•ä¸‹æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£… gRPC ç›¸å…³ä¾èµ–ï¼š
npm install @grpc/grpc-js @grpc/proto-loader 2....</p></div><footer class=entry-footer><span title='2024-12-09 23:18:09 +0000 UTC'>December 9, 2024</span>&nbsp;Â·&nbsp;3 min&nbsp;Â·&nbsp;dwd</footer><a class=entry-link aria-label="post link to gRPC" href=https://qfsyso.github.io/posts/grpc/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Node Swagger</h2></header><div class=entry-content><p>Node.js å’Œ Swagger åˆ›å»ºç®€å•å¢åˆ æ”¹æŸ¥ (CRUD) API ï¼Œ ä½¿ç”¨ Express ä½œä¸º Web æ¡†æ¶ï¼Œå¹¶é›†æˆ Swagger UI æ¥è‡ªåŠ¨ç”Ÿæˆ API æ–‡æ¡£ã€‚
mkdir node-swagger-crud cd node-swagger-crud npm init -y npm install express swagger-jsdoc swagger-ui-express 2: è®¾ç½® Express åº”ç”¨ åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ app.jsï¼Œç”¨äºå®šä¹‰ Express åº”ç”¨åŠåŸºæœ¬è·¯ç”±ã€‚
// app.js const express = require("express"); const app = express(); app.use(express.json()); // è§£æ JSON è¯·æ±‚ const swaggerJsDoc = require("swagger-jsdoc"); const swaggerUi = require("swagger-ui-express"); // Swagger é…ç½® const swaggerOptions = { swaggerDefinition: { openapi: "3....</p></div><footer class=entry-footer><span title='2024-11-07 00:37:19 +0000 UTC'>November 7, 2024</span>&nbsp;Â·&nbsp;3 min&nbsp;Â·&nbsp;dwd</footer><a class=entry-link aria-label="post link to  Node Swagger" href=https://qfsyso.github.io/posts/node-swagger/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>nginx domain 4 nodeserver</h2></header><div class=entry-content><p>å®‰è£…äº† Nginx sudo apt update sudo apt install nginx node curl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash - sudo apt-get install -y nodejs node -v npm -v //testwebside const http = require('http'); const hostname = '0.0.0.0'; //127001 const port = 8080; const server = http.createServer((req, res) => { res.statusCode = 200; res.setHeader('Content-Type', 'text/plain'); res.end('Hello World 8080 \n'); }); server.listen(port, hostname, () => { console.log(`Server running at http://${hostname}:${port}/`); }); 9090 const port = 9090;...</p></div><footer class=entry-footer><span title='2024-10-09 20:36:34 +0000 UTC'>October 9, 2024</span>&nbsp;Â·&nbsp;2 min&nbsp;Â·&nbsp;dwd</footer><a class=entry-link aria-label="post link to  nginx domain 4 nodeserver" href=https://qfsyso.github.io/posts/nginx-domain-4-nodeserver/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Err idealTree:npm: sill idealTree</h2></header><div class=entry-content><p>idealTree:npm: sill idealTree buildDeps Err
#æ¸…é™¤ç¼“å­˜
npm cache clean --force å‡ºç°npm WARN using â€“force I sure hope you know what you are doing.ç”¨ï¼š
npm cache verify è®¾ç½®é•œåƒæºï¼š npm config set registry https://registry.npmmirror.com æŸ¥çœ‹ä¸‹æ˜¯å¦è®¾ç½®æˆåŠŸï¼š npm config get registry https://registry.npmmirror.com
npm install</p></div><footer class=entry-footer><span title='2024-09-22 01:18:16 +0000 UTC'>September 22, 2024</span>&nbsp;Â·&nbsp;1 min&nbsp;Â·&nbsp;dwd</footer><a class=entry-link aria-label="post link to Err idealTree:npm: sill idealTree " href=https://qfsyso.github.io/posts/err-idealtreenpm-sill-idealtree/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>node ase encrypt</h2></header><div class=entry-content><p>// åŠ å¯†æ–¹æ³• public static string Encrypt(string plainText, string key) { using (Aes aesAlg = Aes.Create()) { aesAlg.Key = Encoding.UTF8.GetBytes(key); aesAlg.IV = [1, 2, 3, 4, 5, 6, 7, 8, 9, 0, 1, 2, 3, 4, 5, 6];// new byte[16]; // åˆå§‹åŒ–å‘é‡ (IV) å¯ä»¥è®¾ä¸ºå…¨é›¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨éšæœºå€¼ ICryptoTransform encryptor = aesAlg.CreateEncryptor(aesAlg.Key, aesAlg.IV); using (MemoryStream msEncrypt = new MemoryStream()) { using (CryptoStream csEncrypt = new CryptoStream(msEncrypt, encryptor, CryptoStreamMode.Write)) using (StreamWriter swEncrypt = new StreamWriter(csEncrypt)) { swEncrypt....</p></div><footer class=entry-footer><span title='2024-09-21 01:25:07 +0000 UTC'>September 21, 2024</span>&nbsp;Â·&nbsp;2 min&nbsp;Â·&nbsp;dwd</footer><a class=entry-link aria-label="post link to node ase encrypt" href=https://qfsyso.github.io/posts/node-ase-encrypt/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>node keep backend</h2></header><div class=entry-content><p>åœ¨ Debian ç³»ç»Ÿä¸Šè¿è¡Œ Node.js åº”ç”¨ç¨‹åºå¹¶ä½¿å…¶ä¿æŒå¸¸é©»è¿è¡Œæœ‰å‡ ç§æ–¹æ³•
æ–¹æ³•ä¸€ï¼šä½¿ç”¨ systemd æœåŠ¡ å¯ä»¥åˆ›å»ºä¸€ä¸ª .service æ–‡ä»¶æ¥å®šä¹‰ Node.js åº”ç”¨ç¨‹åºä½œä¸ºç³»ç»ŸæœåŠ¡ã€‚ my-node-app
sudo nano /etc/systemd/system/my-node-app.service ç¼–è¾‘æœåŠ¡æ–‡ä»¶ï¼š åœ¨æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ ï¼š
[Unit] Description=My Node.js Application After=network.target [Service] User=your-username WorkingDirectory=/path/to/your/app ExecStart=/usr/bin/node /path/to/your/app/index.js Restart=always Environment=NODE_ENV=production [Install] WantedBy=multi-user.target å¯åŠ¨å¹¶å¯ç”¨æœåŠ¡ï¼š
sudo systemctl start my-node-app sudo systemctl enable my-node-app æ£€æŸ¥æœåŠ¡çŠ¶æ€ï¼š
sudo systemctl status my-node-app æ–¹æ³•äºŒï¼šä½¿ç”¨ nohup å’Œ & å¦‚æœä¸æƒ³ä½¿ç”¨ systemdï¼Œå¯ä»¥ä½¿ç”¨ nohup å‘½ä»¤æ¥ä¿æŒåº”ç”¨ç¨‹åºåœ¨åå°è¿è¡Œã€‚
å¯åŠ¨åº”ç”¨ç¨‹åºï¼š
sudo nohup node /root/nodexxx/app.js > outputapp3.log 2>&amp;1 & è¿™ä¼šå¯åŠ¨ Node.js åº”ç”¨ç¨‹åºï¼Œå¹¶å°†è¾“å‡ºå’Œé”™è¯¯é‡å®šå‘åˆ° app.log æ–‡ä»¶ä¸­ã€‚...</p></div><footer class=entry-footer><span title='2024-08-31 01:52:41 +0000 UTC'>August 31, 2024</span>&nbsp;Â·&nbsp;1 min&nbsp;Â·&nbsp;dwd</footer><a class=entry-link aria-label="post link to  node keep backend" href=https://qfsyso.github.io/posts/node-keep-backend/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>node koa</h2></header><div class=entry-content><p>koa Koa æ˜¯ä¸€ä¸ªç”± Express åŸç­äººé©¬æ‰“é€ çš„æ–°çš„ Web æ¡†æ¶ï¼Œæ—¨åœ¨æä¾›æ›´å°ã€æ›´å¯Œè¡¨ç°åŠ›ã€æ›´å¥å£®çš„æœåŠ¡å™¨å¤„ç†é€»è¾‘ã€‚å®ƒä½¿ç”¨ ES6 çš„æ–°ç‰¹æ€§ï¼Œå¦‚ Promises å’Œ generatorsï¼Œæ¥ç®€åŒ–å¼‚æ­¥æµç¨‹æ§åˆ¶ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å…³äº Koa çš„å…³é”®ç‚¹ï¼š
ç‰¹ç‚¹ è½»é‡çº§ï¼šKoa çš„æ ¸å¿ƒä»£ç éå¸¸ç²¾ç®€ï¼Œæ²¡æœ‰æ†ç»‘å¾ˆå¤šä¸­é—´ä»¶ï¼Œè¿™ä½¿å¾—å®ƒçš„å¯åŠ¨é€Ÿåº¦å¿«ã€ä½“ç§¯å°ã€‚
ç®€æ´çš„ä¸­é—´ä»¶ç³»ç»Ÿï¼šKoa ä½¿ç”¨åŸºäº Promise çš„ä¸­é—´ä»¶æ¨¡å‹ï¼Œè¿™ä¸ªæ¨¡å‹å…è®¸ä½ é€šè¿‡ async/await æ¥ç¼–å†™å¼‚æ­¥ä»£ç ï¼Œå¹¶ä¸”å¯ä»¥æ–¹ä¾¿åœ°åœ¨ä¸­é—´ä»¶ä¹‹é—´å…±äº«é€»è¾‘ã€‚
å¼ºå¤§çš„ä¸Šä¸‹æ–‡å¯¹è±¡ (Context)ï¼šæ¯ä¸ªè¯·æ±‚éƒ½æœ‰ä¸€ä¸ª context å¯¹è±¡ï¼Œå®ƒåŒ…å«äº† request å’Œ response çš„æ‰€æœ‰ä¿¡æ¯ï¼Œç®€åŒ–äº†å¤„ç† HTTP æ¶ˆæ¯çš„æµç¨‹ã€‚
**é”™è¯¯å¤„ç†ï¼š**Koa é€šè¿‡ç»Ÿä¸€çš„é”™è¯¯å¤„ç†æœºåˆ¶æ¥ç®€åŒ–é”™è¯¯å¤„ç†è¿‡ç¨‹ï¼Œä½ å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹æŠ›å‡ºé”™è¯¯ï¼Œå¹¶åœ¨åº”ç”¨çš„é¡¶å±‚æ•è·å®ƒä»¬ã€‚
**å†…ç½®æ”¯æŒ async/awaitï¼š**ç”±äº Koa åŸºäº ES6 çš„æ–°ç‰¹æ€§ï¼Œæ‰€æœ‰çš„å¤„ç†å‡½æ•°é»˜è®¤éƒ½æ˜¯å¼‚æ­¥çš„ï¼Œä½ å¯ä»¥ä½¿ç”¨ async/await æ¥ç¼–å†™æ›´ç®€æ´å’Œç›´è§‚çš„ä»£ç ã€‚
nvm install 7 npm i koa node my-koa-app.js const Koa = require('koa'); const app = new Koa(); // logger app.use(async (ctx, next) => { await next(); // è°ƒç”¨ä¸‹ä¸€ä¸ªä¸­é—´ä»¶ const rt = ctx....</p></div><footer class=entry-footer><span title='2024-08-19 23:57:00 +0000 UTC'>August 19, 2024</span>&nbsp;Â·&nbsp;2 min&nbsp;Â·&nbsp;dwd</footer><a class=entry-link aria-label="post link to node koa" href=https://qfsyso.github.io/posts/node-koa/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Node socket.io</h2></header><div class=entry-content><p>server
npm install express npm install socket.io const express = require('express'); const http = require('http'); const socketIO = require('socket.io'); const app = express(); const server = http.createServer(app); const io = socketIO(server); io.on('connection', (socket) => { console.log('User connected'); socket.on('chat message', (msg) => { console.log('message: ' + msg); io.emit('chat message', msg); // to all }); socket.on('disconnect', () => { console.log('User disconnected'); }); }); server.listen(24525, () => { console.log('Node Server is running on port 24525'); }); docker dockerfile...</p></div><footer class=entry-footer><span title='2024-05-26 23:01:07 +0000 UTC'>May 26, 2024</span>&nbsp;Â·&nbsp;4 min&nbsp;Â·&nbsp;dwd</footer><a class=entry-link aria-label="post link to Node socket.io" href=https://qfsyso.github.io/posts/node-socket.io/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Nodejs Study</h2></header><div class=entry-content><p>ğŸ“˜ util util const util = require('util'); util.isArray([]) util.isRegExp(/some regexp/) util.isDate(new Date()) // true util.isDate(Date()) // false (without 'new' returns a String) os var os = require("os"); // CPU çš„å­—èŠ‚åº console.log('endianness : ' + os.endianness()); // æ“ä½œç³»ç»Ÿå console.log('type : ' + os.type()); // æ“ä½œç³»ç»Ÿå console.log('platform : ' + os.platform()); // ç³»ç»Ÿå†…å­˜æ€»é‡ console.log('total memory : ' + os.totalmem() + " bytes."); // æ“ä½œç³»ç»Ÿç©ºé—²å†…å­˜é‡ console.log('free memory : ' + os.freemem() + " bytes....</p></div><footer class=entry-footer><span title='2024-05-17 21:00:03 +0000 UTC'>May 17, 2024</span>&nbsp;Â·&nbsp;9 min&nbsp;Â·&nbsp;dwd</footer><a class=entry-link aria-label="post link to Nodejs Study" href=https://qfsyso.github.io/posts/nodejs-study/></a></article><footer class=page-footer><nav class=pagination><a class=next href=https://qfsyso.github.io/tags/node/page/2/>Next&nbsp;&nbsp;Â»</a></nav></footer></main><footer class=footer><div class=wtime><div class=wtime2>CST<span id=beijingTime></span> GMT <span id=londonTime></span> EST <span id=newYorkTime></span> PST<span id=losAngelesTime></span></div><div class=wtime2 style=display:none>ä¸œäº¬<span id=tokyoTime></span></div><div class=wtime2 style=display:none>æ¬§æ´²-å·´é»<span id=parisTime></span></div><div class=wtime2 style=display:none>UTC<span id=utcTime></span></div></div><span>&copy; 2025 <a href=https://qfsyso.github.io/>MLOG</a></span> Â·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a>
</span><script type=text/javascript>const timeZoneOffsets={beijing:8,tokyo:9,paris:[1,2],london:[0,1],newYork:[-5,-4],losAngeles:[-8,-7]};function padZero(e){return e<10?"0"+e:e}function formatTime(e){const t=e.getFullYear(),n=padZero(e.getMonth()+1),s=padZero(e.getDate()),o=padZero(e.getHours()),i=padZero(e.getMinutes()),a=padZero(e.getSeconds());return`${t}-${n}-${s} ${o}:${i}:${a}`}function isDaylightSavingTime(e,t){const o=e.getMonth(),n=new Date(e.getFullYear(),3,8,2,0,0),s=new Date(e.getFullYear(),10,1,2,0,0);return(t==="paris"||t==="london"||t==="newYork"||t==="losAngeles")&&e>=n&&e<s}function updateTime(){const e=new Date,t=new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds()),n=formatTime(t);document.getElementById("utcTime").innerHTML=n;for(const n in timeZoneOffsets){const e=timeZoneOffsets[n];let s;Array.isArray(e)?s=isDaylightSavingTime(t,n)?e[1]:e[0]:s=e;const o=new Date(t.getTime()+s*60*60*1e3);document.getElementById(n+"Time").innerHTML=formatTime(o)}setTimeout(updateTime,1e3)}window.onload=function(){updateTime()};function notfound(e){var n=e.src,t=n.split("/"),s=t[t.length-1];e.src="https://47.115.223.75:8080/group1/v2/"+s+"?timestamp="+Date.now(),e.onerror=null}</script></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>