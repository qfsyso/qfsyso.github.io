<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Nginx | MLOG</title>
<meta name=keywords content><meta name=description content="A simple blog "><meta name=author content="dwd"><link rel=canonical href=https://qfsyso.github.io/tags/nginx/><link crossorigin=anonymous href=/assets/css/stylesheet.f49d66caae9ea0fd43f21f29e71a8d3e284517ed770f2aa86fa012953ad3c9ef.css integrity="sha256-9J1myq6eoP1D8h8p5xqNPihFF+13Dyqob6ASlTrTye8=" rel="preload stylesheet" as=style><link rel=icon href=https://qfsyso.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://qfsyso.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://qfsyso.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://qfsyso.github.io/apple-touch-icon.png><link rel=mask-icon href=https://qfsyso.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://qfsyso.github.io/tags/nginx/index.xml><link rel=alternate hreflang=en href=https://qfsyso.github.io/tags/nginx/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://qfsyso.github.io/tags/nginx/"><meta property="og:site_name" content="MLOG"><meta property="og:title" content="Nginx"><meta property="og:description" content="A simple blog "><meta property="og:locale" content="zh-CN"><meta property="og:type" content="website"><meta name=twitter:card content="summary"><meta name=twitter:title content="Nginx"><meta name=twitter:description content="A simple blog "></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://qfsyso.github.io/ accesskey=h title="MLOG (Alt + H)">MLOG</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://qfsyso.github.io/posts/ title=Archive><span>Archive</span></a></li><li><a href=https://qfsyso.github.io/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://qfsyso.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><header class=page-header><h1>Nginx</h1></header><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>free https ssl</h2></header><div class=entry-content><p>申请证书 （1）申请证书之前，需要准备好用于绑定证书的域名（假如您的域名是：abc.dm.com）。这个域名必须能够正常访问，也就是说通过浏览器可以正常访问：http://abc.dm.com 。
（2）打开网站： 来此加密 - Let’s Encrypt 在线免费申请SSL证书 https://letsencrypt.osfipin.com/
（3）点“立即开始”，注册用户。（如果已注册用户，直接点“登录”）
（4）登录之后，选择“申请证书”，之后照着申请证书的指引，一步步完成证书的申请。一般来说，直接按照默认的选项申请就行。
（5）提交申请成功之后，还要进行一次手工验证。验证方式建议选择DNS验证。如下图所示：
（6）在您的域名管理网站，根据系统提示的DNS验证资料，添加一条TXT域名解析记录，完成之后，点击验证。等待验证通过之后证书就申请到手啦。
OR HTTPS验证
刷新 下载证书
修改nginx配置 server { listen 80; # listen [::]:80; server_name test1.xx.xyz; root /var/www/html; index index.html; location / { root html; index index.html index.htm; } } server { listen 443 ssl; server_name test1.xx.xyz; ssl_stapling on; ssl_stapling_verify on; ssl_certificate /var/www/cert/fullchain.crt; ssl_certificate_key /var/www/cert/private.pem; location / { root /var/www/html; index index.html index.htm; } } sudo systemctl restart nginx 访问https 如果正确访问则部署成功</p></div><footer class=entry-footer><span title='2025-02-13 01:09:12 +0000 UTC'>February 13, 2025</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;dwd</footer><a class=entry-link aria-label="post link to free https ssl" href=https://qfsyso.github.io/posts/free-https-ssl/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>nginx domain 4 nodeserver</h2></header><div class=entry-content><p>安装了 Nginx sudo apt update sudo apt install nginx node curl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash - sudo apt-get install -y nodejs node -v npm -v //testwebside const http = require('http'); const hostname = '0.0.0.0'; //127001 const port = 8080; const server = http.createServer((req, res) => { res.statusCode = 200; res.setHeader('Content-Type', 'text/plain'); res.end('Hello World 8080 \n'); }); server.listen(port, hostname, () => { console.log(`Server running at http://${hostname}:${port}/`); }); 9090 const port = 9090;...</p></div><footer class=entry-footer><span title='2024-10-09 20:36:34 +0000 UTC'>October 9, 2024</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;dwd</footer><a class=entry-link aria-label="post link to  nginx domain 4 nodeserver" href=https://qfsyso.github.io/posts/nginx-domain-4-nodeserver/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>nginx load balance</h2></header><div class=entry-content><p>Nginx Load Balance Proxy 反向代理、负载均衡
docker run --name nginx -p 8080:80 -d nginx 进入nginx容器
Docker exec -it nginx bash nginx.conf文件 nginx.conf分为http块、events块和server块,此次主要在server块中做更改.
/etc/nginx/nginx.conf 末尾 include /etc/nginx/conf.d/*.conf;
/etc/nginx/conf.d/default.conf
upstream ServiceInstance{ #nginx默认轮询下面的服务实例 server ***.**.***.***:9007; server ***.**.***.***:9008; server ***.**.***.***:9009; } server { ... location / { #root /usr/share/nginx/html; #index index.html index.htm; #请求到达后会进行转发 proxy_pass http://ServiceInstance; } ... } 浏览器中调用一个接口查看
访问不同的服务实例,负载均衡就实现了！
也可以设置权重比例,weight值越大,请求到达此实例的次数就越多！
upstream ServiceInstance{ #nginx默认轮询下面的服务实例 server ***.**.***.***:9007 weight=1; server ***.**.***.***:9008 weight=2; server ***.**.***.***:9009 weight=3; }</p></div><footer class=entry-footer><span title='2024-09-04 22:20:33 +0000 UTC'>September 4, 2024</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;dwd</footer><a class=entry-link aria-label="post link to nginx load balance" href=https://qfsyso.github.io/posts/nginx-load-balance/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Nginx whitelist</h2></header><div class=entry-content><p>在 Debian 系统上安装 Nginx
更新包列表：
sudo apt update 安装 Nginx： 使用 apt 包管理器来安装 Nginx。
sudo apt install nginx 启动 Nginx：
sudo systemctl start nginx 启用开机自启动：
sudo systemctl enable nginx 检查 Nginx 状态：
sudo systemctl status nginx 配置防火墙（可选）：
sudo ufw allow 'Nginx Full' 访问你的服务器： 安装完成后，你可以通过浏览器访问你的服务器 IP 地址来验证 Nginx 是否安装成功。你应该会看到默认的 Nginx 欢迎页面。
配置 HTTPS（可选）
如果你希望使用 HTTPS，可以按照以下步骤操作：
获取 SSL 证书： 可以使用 Let’s Encrypt 免费获取一个 SSL 证书。运行以下命令来安装 Certbot 和 Nginx 插件：
sudo apt install certbot python3-certbot-nginx 获取并安装证书： 运行以下命令来获取并安装证书：...</p></div><footer class=entry-footer><span title='2024-07-23 23:56:32 +0000 UTC'>July 23, 2024</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;dwd</footer><a class=entry-link aria-label="post link to Nginx whitelist" href=https://qfsyso.github.io/posts/nginx-whitelist/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Debian nginx https</h2></header><div class=entry-content><p>debian安装 nginx 在Debian系统上安装Nginx，可以按照以下步骤操作：
如果 sudo: command not found
apt-get install sudo 首先，更新的包索引：
sudo apt update 接下来，安装Nginx：
sudo apt install nginx 安装完成后，启动Nginx服务：
sudo systemctl start nginx （可选）设置Nginx开机自启动：
sudo systemctl enable nginx 可以通过运行以下命令来检查Nginx的状态：
sudo systemctl status nginx 现在，可以在Web浏览器中输入服务器的IP地址或域名来访问默认的Nginx欢迎页面。如果是在本地安装的Nginx，可以通过访问 http://localhost 来查看这个页面。
如果需要配置Nginx，可以编辑 /etc/nginx/nginx.conf 文件或者在 /etc/nginx/sites-available/ 目录下创建或编辑配置文件，并使用 sudo ln -s /etc/nginx/sites-available/your-config /etc/nginx/sites-enabled/ 命令来启用它。
sudo whereis nginx Nginx 默认安装位置 配置文件所在目录 /etc/
nginx配置 检测Nginx配置文件是否正确
nginx -t 重载Nginx配置
nginx -s reload 自定义Nginx站点配置文件存放目录 /etc/nginx/conf.d/
nginx网站目录 /var/www/
域名证书
阿里云证书 免费证书 https://help....</p></div><footer class=entry-footer><span title='2024-05-07 19:13:24 +0000 UTC'>May 7, 2024</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;dwd</footer><a class=entry-link aria-label="post link to Debian nginx https" href=https://qfsyso.github.io/posts/debian-nginx-https/></a></article></main><footer class=footer><div class=wtime><div class=wtime2>CST<span id=beijingTime></span> GMT <span id=londonTime></span> EST <span id=newYorkTime></span> PST<span id=losAngelesTime></span></div><div class=wtime2 style=display:none>东京<span id=tokyoTime></span></div><div class=wtime2 style=display:none>欧洲-巴黎<span id=parisTime></span></div><div class=wtime2 style=display:none>UTC<span id=utcTime></span></div></div><span>&copy; 2025 <a href=https://qfsyso.github.io/>MLOG</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a>
</span><script type=text/javascript>const timeZoneOffsets={beijing:8,tokyo:9,paris:[1,2],london:[0,1],newYork:[-5,-4],losAngeles:[-8,-7]};function padZero(e){return e<10?"0"+e:e}function formatTime(e){const t=e.getFullYear(),n=padZero(e.getMonth()+1),s=padZero(e.getDate()),o=padZero(e.getHours()),i=padZero(e.getMinutes()),a=padZero(e.getSeconds());return`${t}-${n}-${s} ${o}:${i}:${a}`}function isDaylightSavingTime(e,t){const o=e.getMonth(),n=new Date(e.getFullYear(),3,8,2,0,0),s=new Date(e.getFullYear(),10,1,2,0,0);return(t==="paris"||t==="london"||t==="newYork"||t==="losAngeles")&&e>=n&&e<s}function updateTime(){const e=new Date,t=new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds()),n=formatTime(t);document.getElementById("utcTime").innerHTML=n;for(const n in timeZoneOffsets){const e=timeZoneOffsets[n];let s;Array.isArray(e)?s=isDaylightSavingTime(t,n)?e[1]:e[0]:s=e;const o=new Date(t.getTime()+s*60*60*1e3);document.getElementById(n+"Time").innerHTML=formatTime(o)}setTimeout(updateTime,1e3)}window.onload=function(){updateTime()};function notfound(e){var n=e.src,t=n.split("/"),s=t[t.length-1];e.src="https://47.115.223.75:8080/group1/v2/"+s+"?timestamp="+Date.now(),e.onerror=null}</script></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>