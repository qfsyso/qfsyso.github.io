<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/"><channel><title>Nginx on MLOG</title><link>https://qfsyso.github.io/tags/nginx/</link><description>Recent content in Nginx on MLOG</description><generator>Hugo -- 0.126.3</generator><language>zh-CN</language><lastBuildDate>Thu, 15 May 2025 00:14:46 +0800</lastBuildDate><atom:link href="https://qfsyso.github.io/tags/nginx/index.xml" rel="self" type="application/rss+xml"/><item><title>Debian Ng Ssl</title><link>https://qfsyso.github.io/posts/debian-ng-ssl/</link><pubDate>Thu, 15 May 2025 00:14:46 +0800</pubDate><guid>https://qfsyso.github.io/posts/debian-ng-ssl/</guid><description>åœ¨ Debian æœåŠ¡å™¨ä¸Šä¸ºéƒ¨ç½²åœ¨ Nginx ä¸Šçš„ç½‘ç«™ç”³è¯· SSL è¯ä¹¦ï¼Œ ä¸€èˆ¬ä½¿ç”¨ Let&amp;rsquo;s Encrypt æä¾›çš„å…è´¹è¯ä¹¦æœ€ä¸ºæ–¹ä¾¿ã€ä¸»æµã€‚æ¨èé€šè¿‡ Certbot å·¥å…·æ¥è‡ªåŠ¨ç”³è¯·å’Œé…ç½®ã€‚ ä¸‹é¢æ˜¯è¯¦ç»†æ­¥éª¤ï¼š
ğŸ› ï¸ æ­¥éª¤ä¸€ï¼šå®‰è£… Certbot å’Œ Nginx æ’ä»¶ sudo apt update sudo apt install certbot python3-certbot-nginx -y ğŸ–¥ï¸ æ­¥éª¤äºŒï¼šç¡®ä¿ä½ çš„ Nginx é…ç½®æ­£ç¡® ç¡®ä¿ç½‘ç«™å·²ç»é€šè¿‡ HTTP èƒ½æ­£å¸¸è®¿é—®ã€‚
Nginx é…ç½®ä¸­å¿…é¡»æœ‰ä¸€ä¸ª server_name æŒ‡å‘ä½ çš„åŸŸåï¼Œä¾‹å¦‚ï¼š
server { listen 80; server_name yourdomain.com www.yourdomain.com; root /var/www/yourdomain; index index.html index.htm; location / { try_files $uri $uri/ =404; } } ğŸŒ æ­¥éª¤ä¸‰ï¼šç”³è¯· SSL è¯ä¹¦å¹¶è‡ªåŠ¨é…ç½® Nginx sudo certbot --nginx ç„¶åæŒ‰æç¤ºè¾“å…¥ï¼š</description></item><item><title>free https ssl</title><link>https://qfsyso.github.io/posts/free-https-ssl/</link><pubDate>Thu, 13 Feb 2025 01:09:12 +0000</pubDate><guid>https://qfsyso.github.io/posts/free-https-ssl/</guid><description>ç”³è¯·è¯ä¹¦ ï¼ˆ1ï¼‰ç”³è¯·è¯ä¹¦ä¹‹å‰ï¼Œéœ€è¦å‡†å¤‡å¥½ç”¨äºç»‘å®šè¯ä¹¦çš„åŸŸåï¼ˆå‡å¦‚æ‚¨çš„åŸŸåæ˜¯ï¼šabc.dm.comï¼‰ã€‚è¿™ä¸ªåŸŸåå¿…é¡»èƒ½å¤Ÿæ­£å¸¸è®¿é—®ï¼Œä¹Ÿå°±æ˜¯è¯´é€šè¿‡æµè§ˆå™¨å¯ä»¥æ­£å¸¸è®¿é—®ï¼šhttp://abc.dm.com ã€‚
ï¼ˆ2ï¼‰æ‰“å¼€ç½‘ç«™ï¼š æ¥æ­¤åŠ å¯† - Let&amp;rsquo;s Encrypt åœ¨çº¿å…è´¹ç”³è¯·SSLè¯ä¹¦ https://letsencrypt.osfipin.com/
ï¼ˆ3ï¼‰ç‚¹â€œç«‹å³å¼€å§‹â€ï¼Œæ³¨å†Œç”¨æˆ·ã€‚ï¼ˆå¦‚æœå·²æ³¨å†Œç”¨æˆ·ï¼Œç›´æ¥ç‚¹â€œç™»å½•â€ï¼‰
ï¼ˆ4ï¼‰ç™»å½•ä¹‹åï¼Œé€‰æ‹©â€œç”³è¯·è¯ä¹¦â€ï¼Œä¹‹åç…§ç€ç”³è¯·è¯ä¹¦çš„æŒ‡å¼•ï¼Œä¸€æ­¥æ­¥å®Œæˆè¯ä¹¦çš„ç”³è¯·ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œç›´æ¥æŒ‰ç…§é»˜è®¤çš„é€‰é¡¹ç”³è¯·å°±è¡Œã€‚
ï¼ˆ5ï¼‰æäº¤ç”³è¯·æˆåŠŸä¹‹åï¼Œè¿˜è¦è¿›è¡Œä¸€æ¬¡æ‰‹å·¥éªŒè¯ã€‚éªŒè¯æ–¹å¼å»ºè®®é€‰æ‹©DNSéªŒè¯ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
ï¼ˆ6ï¼‰åœ¨æ‚¨çš„åŸŸåç®¡ç†ç½‘ç«™ï¼Œæ ¹æ®ç³»ç»Ÿæç¤ºçš„DNSéªŒè¯èµ„æ–™ï¼Œæ·»åŠ ä¸€æ¡TXTåŸŸåè§£æè®°å½•ï¼Œå®Œæˆä¹‹åï¼Œç‚¹å‡»éªŒè¯ã€‚ç­‰å¾…éªŒè¯é€šè¿‡ä¹‹åè¯ä¹¦å°±ç”³è¯·åˆ°æ‰‹å•¦ã€‚
OR HTTPSéªŒè¯
åˆ·æ–° ä¸‹è½½è¯ä¹¦
ä¿®æ”¹nginxé…ç½® server { listen 80; # listen [::]:80; server_name test1.xx.xyz; root /var/www/html; index index.html; location / { root html; index index.html index.htm; } } server { listen 443 ssl; server_name test1.xx.xyz; ssl_stapling on; ssl_stapling_verify on; ssl_certificate /var/www/cert/fullchain.crt; ssl_certificate_key /var/www/cert/private.pem; location / { root /var/www/html; index index.html index.htm; } } sudo systemctl restart nginx è®¿é—®https å¦‚æœæ­£ç¡®è®¿é—®åˆ™éƒ¨ç½²æˆåŠŸ</description></item><item><title> nginx domain 4 nodeserver</title><link>https://qfsyso.github.io/posts/nginx-domain-4-nodeserver/</link><pubDate>Wed, 09 Oct 2024 20:36:34 +0000</pubDate><guid>https://qfsyso.github.io/posts/nginx-domain-4-nodeserver/</guid><description>å®‰è£…äº† Nginx sudo apt update sudo apt install nginx node curl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash - sudo apt-get install -y nodejs node -v npm -v //testwebside const http = require(&amp;#39;http&amp;#39;); const hostname = &amp;#39;0.0.0.0&amp;#39;; //127001 const port = 8080; const server = http.createServer((req, res) =&amp;gt; { res.statusCode = 200; res.setHeader(&amp;#39;Content-Type&amp;#39;, &amp;#39;text/plain&amp;#39;); res.end(&amp;#39;Hello World 8080 \n&amp;#39;); }); server.listen(port, hostname, () =&amp;gt; { console.log(`Server running at http://${hostname}:${port}/`); }); 9090 const port = 9090;</description></item><item><title>nginx load balance</title><link>https://qfsyso.github.io/posts/nginx-load-balance/</link><pubDate>Wed, 04 Sep 2024 22:20:33 +0000</pubDate><guid>https://qfsyso.github.io/posts/nginx-load-balance/</guid><description>Nginx Load Balance Proxy åå‘ä»£ç†ã€è´Ÿè½½å‡è¡¡
docker run --name nginx -p 8080:80 -d nginx è¿›å…¥nginxå®¹å™¨
Docker exec -it nginx bash nginx.confæ–‡ä»¶ nginx.confåˆ†ä¸ºhttpå—ã€eventså—å’Œserverå—,æ­¤æ¬¡ä¸»è¦åœ¨serverå—ä¸­åšæ›´æ”¹.
/etc/nginx/nginx.conf æœ«å°¾ include /etc/nginx/conf.d/*.conf;
/etc/nginx/conf.d/default.conf
upstream ServiceInstance{ #nginxé»˜è®¤è½®è¯¢ä¸‹é¢çš„æœåŠ¡å®ä¾‹ server ***.**.***.***:9007; server ***.**.***.***:9008; server ***.**.***.***:9009; } server { ... location / { #root /usr/share/nginx/html; #index index.html index.htm; #è¯·æ±‚åˆ°è¾¾åä¼šè¿›è¡Œè½¬å‘ proxy_pass http://ServiceInstance; } ... } æµè§ˆå™¨ä¸­è°ƒç”¨ä¸€ä¸ªæ¥å£æŸ¥çœ‹
è®¿é—®ä¸åŒçš„æœåŠ¡å®ä¾‹,è´Ÿè½½å‡è¡¡å°±å®ç°äº†ï¼
ä¹Ÿå¯ä»¥è®¾ç½®æƒé‡æ¯”ä¾‹,weightå€¼è¶Šå¤§,è¯·æ±‚åˆ°è¾¾æ­¤å®ä¾‹çš„æ¬¡æ•°å°±è¶Šå¤šï¼
upstream ServiceInstance{ #nginxé»˜è®¤è½®è¯¢ä¸‹é¢çš„æœåŠ¡å®ä¾‹ server ***.**.***.***:9007 weight=1; server ***.**.***.***:9008 weight=2; server ***.**.***.***:9009 weight=3; }</description></item><item><title>Nginx whitelist</title><link>https://qfsyso.github.io/posts/nginx-whitelist/</link><pubDate>Tue, 23 Jul 2024 23:56:32 +0000</pubDate><guid>https://qfsyso.github.io/posts/nginx-whitelist/</guid><description>åœ¨ Debian ç³»ç»Ÿä¸Šå®‰è£… Nginx
æ›´æ–°åŒ…åˆ—è¡¨ï¼š
sudo apt update å®‰è£… Nginxï¼š ä½¿ç”¨ apt åŒ…ç®¡ç†å™¨æ¥å®‰è£… Nginxã€‚
sudo apt install nginx å¯åŠ¨ Nginxï¼š
sudo systemctl start nginx å¯ç”¨å¼€æœºè‡ªå¯åŠ¨ï¼š
sudo systemctl enable nginx æ£€æŸ¥ Nginx çŠ¶æ€ï¼š
sudo systemctl status nginx é…ç½®é˜²ç«å¢™ï¼ˆå¯é€‰ï¼‰ï¼š
sudo ufw allow &amp;#39;Nginx Full&amp;#39; è®¿é—®ä½ çš„æœåŠ¡å™¨ï¼š å®‰è£…å®Œæˆåï¼Œä½ å¯ä»¥é€šè¿‡æµè§ˆå™¨è®¿é—®ä½ çš„æœåŠ¡å™¨ IP åœ°å€æ¥éªŒè¯ Nginx æ˜¯å¦å®‰è£…æˆåŠŸã€‚ä½ åº”è¯¥ä¼šçœ‹åˆ°é»˜è®¤çš„ Nginx æ¬¢è¿é¡µé¢ã€‚
é…ç½® HTTPSï¼ˆå¯é€‰ï¼‰
å¦‚æœä½ å¸Œæœ›ä½¿ç”¨ HTTPSï¼Œå¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š
è·å– SSL è¯ä¹¦ï¼š å¯ä»¥ä½¿ç”¨ Let&amp;rsquo;s Encrypt å…è´¹è·å–ä¸€ä¸ª SSL è¯ä¹¦ã€‚è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥å®‰è£… Certbot å’Œ Nginx æ’ä»¶ï¼š
sudo apt install certbot python3-certbot-nginx è·å–å¹¶å®‰è£…è¯ä¹¦ï¼š è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥è·å–å¹¶å®‰è£…è¯ä¹¦ï¼š</description></item><item><title>Debian nginx https</title><link>https://qfsyso.github.io/posts/debian-nginx-https/</link><pubDate>Tue, 07 May 2024 19:13:24 +0000</pubDate><guid>https://qfsyso.github.io/posts/debian-nginx-https/</guid><description>debianå®‰è£… nginx åœ¨Debianç³»ç»Ÿä¸Šå®‰è£…Nginxï¼Œå¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š
å¦‚æœ sudo: command not found
apt-get install sudo é¦–å…ˆï¼Œæ›´æ–°çš„åŒ…ç´¢å¼•ï¼š
sudo apt update æ¥ä¸‹æ¥ï¼Œå®‰è£…Nginxï¼š
sudo apt install nginx å®‰è£…å®Œæˆåï¼Œå¯åŠ¨NginxæœåŠ¡ï¼š
sudo systemctl start nginx ï¼ˆå¯é€‰ï¼‰è®¾ç½®Nginxå¼€æœºè‡ªå¯åŠ¨ï¼š
sudo systemctl enable nginx å¯ä»¥é€šè¿‡è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥æ£€æŸ¥Nginxçš„çŠ¶æ€ï¼š
sudo systemctl status nginx ç°åœ¨ï¼Œå¯ä»¥åœ¨Webæµè§ˆå™¨ä¸­è¾“å…¥æœåŠ¡å™¨çš„IPåœ°å€æˆ–åŸŸåæ¥è®¿é—®é»˜è®¤çš„Nginxæ¬¢è¿é¡µé¢ã€‚å¦‚æœæ˜¯åœ¨æœ¬åœ°å®‰è£…çš„Nginxï¼Œå¯ä»¥é€šè¿‡è®¿é—® http://localhost æ¥æŸ¥çœ‹è¿™ä¸ªé¡µé¢ã€‚
å¦‚æœéœ€è¦é…ç½®Nginxï¼Œå¯ä»¥ç¼–è¾‘ /etc/nginx/nginx.conf æ–‡ä»¶æˆ–è€…åœ¨ /etc/nginx/sites-available/ ç›®å½•ä¸‹åˆ›å»ºæˆ–ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼Œå¹¶ä½¿ç”¨ sudo ln -s /etc/nginx/sites-available/your-config /etc/nginx/sites-enabled/ å‘½ä»¤æ¥å¯ç”¨å®ƒã€‚
sudo whereis nginx Nginx é»˜è®¤å®‰è£…ä½ç½® é…ç½®æ–‡ä»¶æ‰€åœ¨ç›®å½• /etc/
nginxé…ç½® æ£€æµ‹Nginxé…ç½®æ–‡ä»¶æ˜¯å¦æ­£ç¡®
nginx -t é‡è½½Nginxé…ç½®
nginx -s reload è‡ªå®šä¹‰Nginxç«™ç‚¹é…ç½®æ–‡ä»¶å­˜æ”¾ç›®å½• /etc/nginx/conf.d/
nginxç½‘ç«™ç›®å½• /var/www/
åŸŸåè¯ä¹¦
é˜¿é‡Œäº‘è¯ä¹¦ å…è´¹è¯ä¹¦ https://help.</description></item></channel></rss>