<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>HarmonyOS Next WorldTime Whack Mole | MLOG</title>
<meta name=keywords content="HarmonyOS,WorldTime"><meta name=description content="HarmonyOS Next WorldTime Whack Mole
HarmonyOS应用 鸿蒙NEXT开发 世界时应用 打地鼠
环境 Windows 11 DevEco Studio 5.0.1 Release Version: 5.0.5.306 HarmonyOS 5.0.1(13) ArkTS ArkUI API 13
WorldTime 世界时应用 实现思路 获取时区信息 更新时间 搜索功能
代码 import { i18n } from '@kit.LocalizationKit' // 导入国际化模块，用于处理多语言 import { inputMethod } from '@kit.IMEKit' // 导入输入法模块 @ObservedV2 // 观察者装饰器，用于观察状态变化 class CityTimeInfo { // 定义城市时间信息类 @Trace cityName: string = &#34;&#34;; // 城市名称，初始为空字符串 @Trace currentTime: string = &#34;&#34;; // 当前时间，初始为空字符串 timeZone: i18n."><meta name=author content="dwd"><link rel=canonical href=https://qfsyso.github.io/posts/harmonyos-next-worldtime-whack-mole/><link crossorigin=anonymous href=/assets/css/stylesheet.f49d66caae9ea0fd43f21f29e71a8d3e284517ed770f2aa86fa012953ad3c9ef.css integrity="sha256-9J1myq6eoP1D8h8p5xqNPihFF+13Dyqob6ASlTrTye8=" rel="preload stylesheet" as=style><link rel=icon href=https://qfsyso.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://qfsyso.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://qfsyso.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://qfsyso.github.io/apple-touch-icon.png><link rel=mask-icon href=https://qfsyso.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://qfsyso.github.io/posts/harmonyos-next-worldtime-whack-mole/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://qfsyso.github.io/posts/harmonyos-next-worldtime-whack-mole/"><meta property="og:site_name" content="MLOG"><meta property="og:title" content="HarmonyOS Next WorldTime  Whack Mole"><meta property="og:description" content="HarmonyOS Next WorldTime Whack Mole
HarmonyOS应用 鸿蒙NEXT开发 世界时应用 打地鼠
环境 Windows 11 DevEco Studio 5.0.1 Release Version: 5.0.5.306 HarmonyOS 5.0.1(13) ArkTS ArkUI API 13
WorldTime 世界时应用 实现思路 获取时区信息 更新时间 搜索功能
代码 import { i18n } from '@kit.LocalizationKit' // 导入国际化模块，用于处理多语言 import { inputMethod } from '@kit.IMEKit' // 导入输入法模块 @ObservedV2 // 观察者装饰器，用于观察状态变化 class CityTimeInfo { // 定义城市时间信息类 @Trace cityName: string = &#34;&#34;; // 城市名称，初始为空字符串 @Trace currentTime: string = &#34;&#34;; // 当前时间，初始为空字符串 timeZone: i18n."><meta property="og:locale" content="zh-CN"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-06-15T23:58:57+00:00"><meta property="article:modified_time" content="2024-06-15T23:58:57+00:00"><meta property="article:tag" content="HarmonyOS"><meta property="article:tag" content="WorldTime"><meta name=twitter:card content="summary"><meta name=twitter:title content="HarmonyOS Next WorldTime  Whack Mole"><meta name=twitter:description content="HarmonyOS Next WorldTime Whack Mole
HarmonyOS应用 鸿蒙NEXT开发 世界时应用 打地鼠
环境 Windows 11 DevEco Studio 5.0.1 Release Version: 5.0.5.306 HarmonyOS 5.0.1(13) ArkTS ArkUI API 13
WorldTime 世界时应用 实现思路 获取时区信息 更新时间 搜索功能
代码 import { i18n } from '@kit.LocalizationKit' // 导入国际化模块，用于处理多语言 import { inputMethod } from '@kit.IMEKit' // 导入输入法模块 @ObservedV2 // 观察者装饰器，用于观察状态变化 class CityTimeInfo { // 定义城市时间信息类 @Trace cityName: string = &#34;&#34;; // 城市名称，初始为空字符串 @Trace currentTime: string = &#34;&#34;; // 当前时间，初始为空字符串 timeZone: i18n."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://qfsyso.github.io/posts/"},{"@type":"ListItem","position":2,"name":"HarmonyOS Next WorldTime  Whack Mole","item":"https://qfsyso.github.io/posts/harmonyos-next-worldtime-whack-mole/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"HarmonyOS Next WorldTime  Whack Mole","name":"HarmonyOS Next WorldTime  Whack Mole","description":"HarmonyOS Next WorldTime Whack Mole\nHarmonyOS应用 鸿蒙NEXT开发 世界时应用 打地鼠\n环境 Windows 11 DevEco Studio 5.0.1 Release Version: 5.0.5.306 HarmonyOS 5.0.1(13) ArkTS ArkUI API 13\nWorldTime 世界时应用 实现思路 获取时区信息 更新时间 搜索功能\n代码 import { i18n } from \u0026#39;@kit.LocalizationKit\u0026#39; // 导入国际化模块，用于处理多语言 import { inputMethod } from \u0026#39;@kit.IMEKit\u0026#39; // 导入输入法模块 @ObservedV2 // 观察者装饰器，用于观察状态变化 class CityTimeInfo { // 定义城市时间信息类 @Trace cityName: string = \u0026#34;\u0026#34;; // 城市名称，初始为空字符串 @Trace currentTime: string = \u0026#34;\u0026#34;; // 当前时间，初始为空字符串 timeZone: i18n.","keywords":["HarmonyOS","WorldTime"],"articleBody":"HarmonyOS Next WorldTime Whack Mole\nHarmonyOS应用 鸿蒙NEXT开发 世界时应用 打地鼠\n环境 Windows 11 DevEco Studio 5.0.1 Release Version: 5.0.5.306 HarmonyOS 5.0.1(13) ArkTS ArkUI API 13\nWorldTime 世界时应用 实现思路 获取时区信息 更新时间 搜索功能\n代码 import { i18n } from '@kit.LocalizationKit' // 导入国际化模块，用于处理多语言 import { inputMethod } from '@kit.IMEKit' // 导入输入法模块 @ObservedV2 // 观察者装饰器，用于观察状态变化 class CityTimeInfo { // 定义城市时间信息类 @Trace cityName: string = \"\"; // 城市名称，初始为空字符串 @Trace currentTime: string = \"\"; // 当前时间，初始为空字符串 timeZone: i18n.TimeZone; // 时区属性 constructor(cityName: string, timeZone: i18n.TimeZone) { // 构造函数，接收城市名称和时区 this.cityName = cityName; // 设置城市名称 this.timeZone = timeZone; // 设置时区 } @Trace isVisible: boolean = true; // 是否可见，初始为true } @Entry // 入口组件装饰器 @Component // 组件装饰器 struct WorldClockApp { // 定义世界时钟应用组件 @State private searchText: string = ''; // 搜索文本，初始为空字符串 @State private cityTimeList: CityTimeInfo[] = []; // 城市时间信息列表，初始为空数组 private lineColor: string = \"#e6e6e6\"; // 边框颜色 private titleBackgroundColor: string = \"#f8f8f8\"; // 标题背景色 private textColor: string = \"#333333\"; // 文字颜色 private basePadding: number = 4; // 内边距 private lineWidth: number = 2; // 边框宽度 private rowHeight: number = 50; // 行高 private ratio: number[] = [1, 1]; // 列宽比例 private textSize: number = 14; // 基础字体大小 private updateIntervalId = 0; // 更新间隔ID updateAllCityTimes() { // 更新所有城市的时间 const locale = i18n.System.getSystemLocale(); // 获取系统语言环境 for (const cityTime of this.cityTimeList) { // 遍历城市时间列表 const timeZoneId: string = cityTime.timeZone.getID(); // 获取时区ID const calendar = i18n.getCalendar(locale); // 获取日历对象 calendar.setTimeZone(timeZoneId); // 设置日历的时区 // 获取当前时间的各个部分 const year = calendar.get(\"year\").toString().padStart(4, '0'); // 年 const month = calendar.get(\"month\").toString().padStart(2, '0'); // 月 const day = calendar.get(\"date\").toString().padStart(2, '0'); // 日 const hour = calendar.get(\"hour_of_day\").toString().padStart(2, '0'); // 小时 const minute = calendar.get(\"minute\").toString().padStart(2, '0'); // 分钟 const second = calendar.get(\"second\").toString().padStart(2, '0'); // 秒 // 更新城市的当前时间字符串 cityTime.currentTime = `${year}年${month}月${day}日 ${hour}:${minute}:${second}`; } } onPageShow(): void { // 页面显示时的处理 clearInterval(this.updateIntervalId); // 清除之前的定时器 this.updateIntervalId = setInterval(() =\u003e { // 设置新的定时器 this.updateAllCityTimes(); // 每秒更新所有城市的时间 }, 1000); } onPageHide(): void { // 页面隐藏时的处理 clearInterval(this.updateIntervalId); // 清除定时器 } private highlightSearchText(cityTime: CityTimeInfo, keyword: string) { // 高亮搜索文本 let text = cityTime.cityName // 获取城市名称 if (!keyword) { // 如果没有关键词 cityTime.isVisible = true // 设置城市可见 return [text] // 返回城市名称 } let segments: string[] = []; // 存储分段文本 let lastMatchEnd: number = 0; // 上一个匹配结束的位置 while (true) { // 循环查找关键词 const matchIndex = text.indexOf(keyword, lastMatchEnd); // 查找关键词位置 if (matchIndex === -1) { // 如果没有找到 segments.push(text.slice(lastMatchEnd)); // 添加剩余文本 break; // 退出循环 } else { segments.push(text.slice(lastMatchEnd, matchIndex)); // 添加匹配前的文本 segments.push(text.slice(matchIndex, matchIndex + keyword.length)); // 添加匹配的关键词 lastMatchEnd = matchIndex + keyword.length; // 更新最后匹配结束位置 } } cityTime.isVisible = (segments.indexOf(keyword) != -1) // 设置城市可见性 return segments; // 返回分段文本 } aboutToAppear() { // 组件即将出现时的处理 const timeZoneIds: Array\u003cstring\u003e = i18n.TimeZone.getAvailableIDs(); // 获取可用时区ID列表 this.cityTimeList.push(new CityTimeInfo('北京 (中国)', i18n.getTimeZone())); // 添加北京的城市时间信息 //this.cityTimeList.push(new CityTimeInfo('东京 (日本)', i18n.getTimeZone())); // 添加北京的城市时间信息 //this.cityTimeList.push(new CityTimeInfo('贝伦 (巴西)', i18n.getTimeZone())); // 添加北京的城市时间信息 for (const id of timeZoneIds) { // 遍历时区ID const cityDisplayName = i18n.TimeZone.getCityDisplayName(id.split('/')[1], \"zh-CN\"); // 获取城市显示名称 if (cityDisplayName) { // 如果城市名称存在 this.cityTimeList.push(new CityTimeInfo(cityDisplayName, i18n.getTimeZone(id))); // 添加城市时间信息 } } this.updateAllCityTimes(); // 更新所有城市的时间 } build() { // 构建组件的UI Column({ space: 0 }) { // 创建一个垂直列 Search({ value: $$this.searchText })// 创建搜索框 .margin(this.basePadding)// 设置边距 .fontFeature(\"\\\"ss01\\\" on\") // 设置字体特性 Column() { // 创建一个列 Row() { // 创建一行 Text('城市')// 显示“城市”文本 .height('100%')// 高度占满 .layoutWeight(this.ratio[0])// 设置布局权重 .textAlign(TextAlign.Center)// 文本居中 .fontSize(this.textSize)// 设置字体大小 .fontWeight(600)// 设置字体粗细 .fontColor(this.textColor) // 设置字体颜色 Line().height('100%').width(this.lineWidth).backgroundColor(this.lineColor) // 创建分隔线 Text('时间')// 显示“时间”文本 .height('100%')// 高度占满 .layoutWeight(this.ratio[1])// 设置布局权重 .textAlign(TextAlign.Center)// 文本居中 .fontSize(this.textSize)// 设置字体大小 .fontWeight(600)// 设置字体粗细 .fontColor(this.textColor) // 设置字体颜色 }.height(this.rowHeight).borderWidth(this.lineWidth).borderColor(this.lineColor) // 设置行高和边框 .backgroundColor(this.titleBackgroundColor) // 设置背景色 }.width(`100%`).padding({ left: this.basePadding, right: this.basePadding }) // 设置列宽和内边距 Scroll() { // 创建可滚动区域 Column() { // 创建一个列 ForEach(this.cityTimeList, (item: CityTimeInfo) =\u003e { // 遍历城市时间列表 Row() { // 创建一行 Text() { // 创建文本 ForEach(this.highlightSearchText(item, this.searchText), (segment: string, index: number) =\u003e { // 高亮搜索文本 ContainerSpan() { // 创建容器 Span(segment)// 创建文本段 .fontColor(segment === this.searchText ? Color.White : Color.Black)// 设置字体颜色 .onClick(() =\u003e { // 点击事件 console.info(`高亮文本被点击：${segment}`); // 输出点击的文本 console.info(`点击索引：${index}`); // 输出点击的索引 }); }.textBackgroundStyle({ // 设置文本背景样式 color: segment === this.searchText ? Color.Red : Color.Transparent // 根据是否匹配设置背景色 }); }); } .height('100%') // 高度占满 .layoutWeight(this.ratio[0]) // 设置布局权重 .textAlign(TextAlign.Center) // 文本居中 .fontSize(this.textSize) // 设置字体大小 .fontColor(this.textColor) // 设置字体颜色 Line().height('100%').width(this.lineWidth).backgroundColor(this.lineColor) // 创建分隔线 Text(item.currentTime)// 显示当前时间 .height('100%')// 高度占满 .layoutWeight(this.ratio[1])// 设置布局权重 .textAlign(TextAlign.Center)// 文本居中 .fontSize(this.textSize)// 设置字体大小 .fontColor(this.textColor) // 设置字体颜色 } .height(this.rowHeight) // 设置行高 .borderWidth({ left: this.lineWidth, right: this.lineWidth, bottom: this.lineWidth }) // 设置边框宽度 .borderColor(this.lineColor) // 设置边框颜色 .visibility(item.isVisible ? Visibility.Visible : Visibility.None) // 根据可见性设置显示状态 }) }.width(`100%`).padding({ left: this.basePadding, right: this.basePadding }) // 设置宽度和内边距 } .width('100%') // 设置宽度占满 .layoutWeight(1) // 设置布局权重 .align(Alignment.Top) // 对齐方式 .onScrollStart(() =\u003e { // 滚动开始事件 this.onPageHide() // 页面隐藏处理 }) .onScrollStop(() =\u003e { // 滚动停止事件 this.onPageShow() // 页面显示处理 }) .onTouch((event) =\u003e { // 触摸事件 if (event.type == TouchType.Down) { // 如果是按下事件 inputMethod.getController().stopInputSession() // 停止输入会话 } }) } } } 打地鼠 主要功能： 地鼠组件：Hamster 结构体定外观，依单元格宽调尺寸。 单元格 Cell：有地鼠显示状态及缩放选项，含 setSelectedTrueTime 设显示时间戳、checkTime 检是否超停留时间隐藏。 游戏主组件 Index：维护核心状态如动画间隔等，有 startGame 与 endGame 方法初始化与重置数据。 界面构建：Index 组件 build 方法定布局，含计时器、得分板及单元格。 时间与显示逻辑：TextTimer 组件控时，定时选单元格显地鼠，点击地鼠增分并执行动画。 用户交互：点击地鼠单元格得分，点击后地鼠隐藏且更新得分。\n代码 //index.ets import { curves, window } from '@kit.ArkUI' // 导入所需的库和模块 // 定义地鼠组件 @Component struct Hamster { @Prop cellWidth: number // 定义一个属性，表示单元格的宽度 build() { Stack() { // 创建一个堆叠布局 // 身体 Text() .width(`${this.cellWidth / 2}lpx`) // 设置宽度为单元格宽度的一半 .height(`${this.cellWidth / 3 * 2}lpx`) // 设置高度为单元格高度的2/3 .backgroundColor(\"#b49579\") // 设置背景颜色 .borderRadius({ topLeft: '50%', topRight: '50%' }) // 设置圆角 .borderColor(\"#2a272d\") // 设置边框颜色 .borderWidth(1) // 设置边框宽度 // 嘴巴 Ellipse() .width(`${this.cellWidth / 4}lpx`) // 设置嘴巴的宽度 .height(`${this.cellWidth / 5}lpx`) // 设置嘴巴的高度 .fillOpacity(1) // 设置填充不透明度 .fill(\"#e7bad7\") // 设置填充颜色 .stroke(\"#563e3f\") // 设置边框颜色 .strokeWidth(1) // 设置边框宽度 .margin({ top: `${this.cellWidth / 6}lpx` }) // 设置上边距 // 左眼睛 Ellipse() .width(`${this.cellWidth / 9}lpx`) // 设置左眼睛的宽度 .height(`${this.cellWidth / 6}lpx`) // 设置左眼睛的高度 .fillOpacity(1) // 设置填充不透明度 .fill(\"#313028\") // 设置填充颜色 .stroke(\"#2e2018\") // 设置边框颜色 .strokeWidth(1) // 设置边框宽度 .margin({ bottom: `${this.cellWidth / 3}lpx`, right: `${this.cellWidth / 6}lpx` }) // 设置下边距和右边距 // 右眼睛 Ellipse() .width(`${this.cellWidth / 9}lpx`) // 设置右眼睛的宽度 .height(`${this.cellWidth / 6}lpx`) // 设置右眼睛的高度 .fillOpacity(1) // 设置填充不透明度 .fill(\"#313028\") // 设置填充颜色 .stroke(\"#2e2018\") // 设置边框颜色 .strokeWidth(1) // 设置边框宽度 .margin({ bottom: `${this.cellWidth / 3}lpx`, left: `${this.cellWidth / 6}lpx` }) // 设置下边距和左边距 // 左眼瞳 Ellipse() .width(`${this.cellWidth / 20}lpx`) // 设置左眼瞳的宽度 .height(`${this.cellWidth / 15}lpx`) // 设置左眼瞳的高度 .fillOpacity(1) // 设置填充不透明度 .fill(\"#fefbfa\") // 设置填充颜色 .margin({ bottom: `${this.cellWidth / 2.5}lpx`, right: `${this.cellWidth / 6}lpx` }) // 设置下边距和右边距 // 右眼瞳 Ellipse() .width(`${this.cellWidth / 20}lpx`) // 设置右眼瞳的宽度 .height(`${this.cellWidth / 15}lpx`) // 设置右眼瞳的高度 .fillOpacity(1) // 设置填充不透明度 .fill(\"#fefbfa\") // 设置填充颜色 .margin({ bottom: `${this.cellWidth / 2.5}lpx`, left: `${this.cellWidth / 6}lpx` }) // 设置下边距和左边距 }.width(`${this.cellWidth}lpx`).height(`${this.cellWidth}lpx`) // 设置组件的宽度和高度 } } // 定义单元格类 @ObservedV2 class Cell { @Trace scaleOptions: ScaleOptions = { x: 1, y: 1 }; // 定义缩放选项 @Trace isSelected: boolean = false // true表示显示地鼠，false表示隐藏地鼠 cellWidth: number // 单元格宽度 selectTime: number = 0 // 选择时间 constructor(cellWidth: number) { // 构造函数 this.cellWidth = cellWidth // 初始化单元格宽度 } setSelectedTrueTime() { // 设置选择时间 this.selectTime = Date.now() // 记录当前时间 this.isSelected = true // 设置为选中状态 } checkTime(stayDuration: number) { // 检查停留时间 if (this.isSelected) { // 如果当前是选中状态 if (Date.now() - this.selectTime \u003e= stayDuration) { // 如果停留时间超过设定值 this.selectTime = 0 // 重置选择时间 this.isSelected = false // 设置为未选中状态 } } } } // 定义文本计时器修饰符类 class MyTextTimerModifier implements ContentModifier\u003cTextTimerConfiguration\u003e { constructor() {} applyContent(): WrappedBuilder\u003c[TextTimerConfiguration]\u003e { // 应用内容 return wrapBuilder(buildTextTimer) // 返回构建文本计时器的函数 } } // 构建文本计时器的函数 @Builder function buildTextTimer(config: TextTimerConfiguration) { Column() { Stack({ alignContent: Alignment.Center }) { // 创建一个堆叠布局，内容居中对齐 Circle({ width: 150, height: 150 }) // 创建一个圆形 .fill(config.started ? (config.isCountDown ? 0xFF232323 : 0xFF717171) : 0xFF929292) // 根据状态设置填充颜色 Column() { Text(config.isCountDown ? \"倒计时\" : \"正计时\").fontColor(Color.White) // 显示计时状态 Text( (config.isCountDown ? \"剩余\" : \"已经过去了\") + (config.isCountDown ? (Math.max(config.count / 1000 - config.elapsedTime / 100, 0)).toFixed(0) // 计算剩余时间 : ((config.elapsedTime / 100).toFixed(0)) // 计算已过去时间 ) + \"秒\" ).fontColor(Color.White) // 显示时间 } } } } // 定义游戏主组件 @Entry @Component struct Index { @State animationIntervalCount: number = 0 // 动画间隔计数 @State appearanceCount: number = 4 // 每次出现的地鼠数量 @State animationInterval: number = 1000 // 地鼠出现的间隔时间 @State hamsterStayDuration: number = 1500 // 地鼠停留时间 @State gameDuration: number = 30000 // 游戏总时长 @State randomPositionIndex: number = 0 // 随机位置 @State cells: Cell[] = [] // 存储地鼠单元格 @State cellWidth: number = 100 // 单元格宽度 @State currentScore: number = 0 // 当前游戏得分 @State timerModifier: MyTextTimerModifier = new MyTextTimerModifier() // 计时器修饰符 countdownTimerController: TextTimerController = new TextTimerController() // 倒计时控制器 timerController: TextTimerController = new TextTimerController() // 正计时控制器 aboutToAppear(): void { // 设置当前app以横屏方式显示 window.getLastWindow(getContext()).then((windowClass) =\u003e { windowClass.setPreferredOrientation(window.Orientation.LANDSCAPE) // 设置为横屏 }) // 显示10个地鼠坑位 for (let i = 0; i \u003c 10; i++) { this.cells.push(new Cell(this.cellWidth)) // 初始化10个单元格 } } endGame() { // 结束游戏 this.animationIntervalCount = 0 // 重置动画间隔计数 this.currentScore = 0 // 重置得分 for (let i = 0; i \u003c this.cells.length; i++) { this.cells[i].isSelected = false // 隐藏所有地鼠 } this.countdownTimerController.reset() // 重置倒计时 this.timerController.reset() // 重置正计时 } startGame() { // 开始游戏 this.endGame() // 结束当前游戏，重置所有状态 this.countdownTimerController.start() // 启动倒计时控制器 this.timerController.start() // 启动正计时控制器 } build() { // 构建游戏界面 Row() { // 创建一个水平布局 // 显示时间与得分 Column({ space: 30 }) { // 创建一个垂直布局，设置间距 // 总时长 Column({ space: 5 }) { // 创建一个垂直布局，设置间距 Text(`倒计时长(秒)`).fontColor(Color.Black) // 显示倒计时长度的文本 Counter() { // 创建一个计数器组件 Text(`${this.gameDuration / 1000}`) // 显示游戏总时长（秒） .fontColor(Color.Black) // 设置字体颜色 } .width(300) // 设置计数器宽度 .onInc(() =\u003e { // 增加按钮的点击事件 this.gameDuration += 1000; // 每次增加1秒 }).onDec(() =\u003e { // 减少按钮的点击事件 this.gameDuration -= 1000; // 每次减少1秒 this.gameDuration = this.gameDuration \u003c 1000 ? 1000 : this.gameDuration; // 确保最小值为1秒 }); } // 每次出现个数 Column({ space: 5 }) { // 创建一个垂直布局，设置间距 Text(`每次出现(个)`).fontColor(Color.Black) // 显示每次出现的地鼠数量的文本 Counter() { // 创建一个计数器组件 Text(`${this.appearanceCount}`) // 显示每次出现的地鼠数量 .fontColor(Color.Black) // 设置字体颜色 } .width(300) // 设置计数器宽度 .onInc(() =\u003e { // 增加按钮的点击事件 this.appearanceCount += 1; // 每次增加1个 }).onDec(() =\u003e { // 减少按钮的点击事件 this.appearanceCount -= 1; // 每次减少1个 this.appearanceCount = this.appearanceCount \u003c 1 ? 1 : this.appearanceCount; // 确保最小值为1 }); } // 地鼠每隔多长时间显示 Column({ space: 5 }) { // 创建一个垂直布局，设置间距 Text(`出现间隔(毫秒)`).fontColor(Color.Black) // 显示地鼠出现间隔的文本 Counter() { // 创建一个计数器组件 Text(`${this.animationInterval}`) // 显示地鼠出现的间隔时间 .fontColor(Color.Black) // 设置字体颜色 } .width(300) // 设置计数器宽度 .onInc(() =\u003e { // 增加按钮的点击事件 this.animationInterval += 100; // 每次增加100毫秒 }).onDec(() =\u003e { // 减少按钮的点击事件 this.animationInterval -= 100; // 每次减少100毫秒 this.animationInterval = this.animationInterval \u003c 100 ? 100 : this.animationInterval; // 确保最小值为100毫秒 }); } // 地鼠停留时间 Column({ space: 5 }) { // 创建一个垂直布局，设置间距 Text(`停留间隔(毫秒)`).fontColor(Color.Black) // 显示地鼠停留时间的文本 Counter() { // 创建一个计数器组件 Text(`${this.hamsterStayDuration}`) // 显示地鼠的停留时间 .fontColor(Color.Black) // 设置字体颜色 } .width(300) // 设置计数器宽度 .onInc(() =\u003e { // 增加按钮的点击事件 this.hamsterStayDuration += 100; // 每次增加100毫秒 }).onDec(() =\u003e { // 减少按钮的点击事件 this.hamsterStayDuration -= 100; // 每次减少100毫秒 this.hamsterStayDuration = this.hamsterStayDuration \u003c 100 ? 100 : this.hamsterStayDuration; // 确保最小值为100毫秒 }); } }.layoutWeight(1).padding({ left: 50 }) // 设置布局权重和左边距 // 游戏区 Flex({ wrap: FlexWrap.Wrap }) { // 创建一个可换行的弹性布局 ForEach(this.cells, (cell: Cell, index: number) =\u003e { // 遍历所有单元格 Stack() { // 创建一个堆叠布局 // 洞 Ellipse() .width(`${this.cellWidth / 1.2}lpx`) // 设置洞的宽度 .height(`${this.cellWidth / 2.2}lpx`) // 设置洞的高度 .fillOpacity(1) // 设置填充不透明度 .fill(\"#020101\") // 设置填充颜色 .stroke(\"#020101\") // 设置边框颜色 .strokeWidth(1) // 设置边框宽度 .margin({ top: `${this.cellWidth / 2}lpx` }) // 设置上边距 // 地鼠 Hamster({ cellWidth: this.cellWidth }) // 创建地鼠组件 .visibility(cell.isSelected ? Visibility.Visible : Visibility.None) // 根据状态设置可见性 .scale(cell.scaleOptions) // 设置缩放选项 }.width(`${this.cellWidth}lpx`).height(`${this.cellWidth}lpx`) // 设置堆叠布局的宽度和高度 .margin({ left: `${index == 0 || index == 7 ? this.cellWidth / 2 : 0}lpx` }) // 设置左边距 .onClick(() =\u003e { // 点击事件 if (cell.isSelected) { // 如果当前单元格是选中状态 animateToImmediately({ // 执行动画 duration: 200, // 动画持续时间 curve: curves.springCurve(10, 1, 228, 30), // 动画曲线 onFinish: () =\u003e { // 动画结束后的回调 cell.isSelected = false // 隐藏地鼠 cell.scaleOptions = { x: 1.0, y: 1.0 }; // 重置缩放 this.currentScore += 1 // 增加得分 } }, () =\u003e { cell.scaleOptions = { x: 0, y: 0 }; // 动画开始时缩放到0 }) } }) }) }.width(`${this.cellWidth * 4}lpx`) // 设置游戏区的宽度 // 操作按钮 Column({ space: 20 }) { // 创建一个垂直布局，设置间距 // 倒计时 TextTimer({ isCountDown: true, count: this.gameDuration, controller: this.countdownTimerController }) // 创建倒计时组件 .contentModifier(this.timerModifier) // 应用计时器修饰符 .onTimer((utc: number, elapsedTime: number) =\u003e { // 定义计时器的回调 // 每隔指定时间随机显示地鼠 if (elapsedTime * 10 \u003e= this.animationInterval * this.animationIntervalCount) { // 判断是否达到显示地鼠的时间 this.animationIntervalCount++ // 增加动画间隔计数 // 获取可以出现的位置集合 let availableIndexList: number[] = [] // 存储可用的索引 for (let i = 0; i \u003c this.cells.length; i++) { // 遍历所有单元格 if (!this.cells[i].isSelected) { // 如果当前单元格未被选中 availableIndexList.push(i) // 添加到可用索引列表 } } // 根据每次出现次数 appearanceCount 利用洗牌算法随机抽取 for (let i = 0; i \u003c availableIndexList.length; i++) { // 遍历可用索引列表 let index = Math.floor(Math.random() * (availableIndexList.length - i)) // 随机选择一个索引 let temp = availableIndexList[availableIndexList.length - i - 1] // 交换位置 availableIndexList[availableIndexList.length - i - 1] = availableIndexList[index] availableIndexList[index] = temp } // 随机抽取 appearanceCount，取前几个已经打乱好的顺序 for (let i = 0; i \u003c availableIndexList.length; i++) { // 遍历可用索引列表 if (i \u003c this.appearanceCount) { // 如果索引小于每次出现的数量 this.cells[availableIndexList[i]].setSelectedTrueTime() // 设置选中的单元格为显示状态 } } } if (elapsedTime % 10 == 0) { // 每隔100毫秒检查一次 console.info('检查停留时间是否已过，如果过了就隐藏地鼠') // 输出调试信息 for (let i = 0; i \u003c this.cells.length; i++) { // 遍历所有单元格 this.cells[i].checkTime(this.hamsterStayDuration) // 检查每个单元格的停留时间 } } if (elapsedTime * 10 \u003e= this.gameDuration) { // 如果计时结束 let currentScore = this.currentScore // 获取当前得分 this.getUIContext().showAlertDialog({ // 显示结果对话框 // 显示结果页 title: '游戏结束', // 对话框标题 message: `得分：${currentScore}`, // 显示得分信息 confirm: { // 确认按钮配置 defaultFocus: true, // 默认焦点 value: '我知道了', // 按钮文本 action: () =\u003e { // 点击后的动作 // 这里可以添加点击确认后的逻辑 } }, onWillDismiss: () =\u003e { // 关闭前的动作 // 这里可以添加关闭前的逻辑 }, alignment: DialogAlignment.Center, // 对齐方式为中心 }); this.endGame() // 结束游戏 } }) Text(`当前得分：${this.currentScore}`) // 显示当前得分 Button('开始游戏').clickEffect({ level: ClickEffectLevel.LIGHT }).onClick(() =\u003e { // 创建开始游戏按钮 this.startGame() // 点击后开始游戏 }) Button('结束游戏').clickEffect({ level: ClickEffectLevel.LIGHT }).onClick(() =\u003e { // 创建结束游戏按钮 this.endGame() // 点击后结束游戏 }) }.layoutWeight(1) // 设置布局权重 } .height('100%') // 设置整体高度为100% .width('100%') // 设置整体宽度为100% .backgroundColor(\"#61ac57\") // 设置背景颜色 .justifyContent(FlexAlign.SpaceBetween) // 设置内容对齐方式 } } 24 巧算24点是一个经典的数学游戏，其规则简单而富有挑战性：玩家需利用给定的四个数字，通过加、减、乘、除运算，使得计算结果等于24。\n代码 import { promptAction } from '@kit.ArkUI' // 导入用于提示用户的工具包 @ObservedV2 // 装饰器，使类成为可观察对象 class Cell { // 定义一个Cell类，代表游戏中的一个单元格 @Trace value: number // 使用装饰器标记value属性，使其成为追踪属性 @Trace displayValue: string // 同上，用于显示的值 @Trace isVisible: boolean // 同上，判断是否可见 @Trace xPosition: number // 同上，x坐标位置 @Trace yPosition: number // 同上，y坐标位置 columnIndex: number // 列索引 rowIndex: number // 行索引 constructor(rowIndex: number, columnIndex: number) { // 构造函数 this.rowIndex = rowIndex // 设置行索引 this.columnIndex = columnIndex // 设置列索引 this.xPosition = 0 // 初始化x坐标位置 this.yPosition = 0 // 初始化y坐标位置 this.value = 0 // 初始化数值 this.displayValue = '' // 初始化显示值 this.isVisible = true // 初始化可见性 } setDefaultValue(value: number) { // 设置单元格的默认值 this.value = value // 设置数值 this.displayValue = `${value}` // 设置显示值 this.isVisible = true // 设置为可见 } performOperation(otherCell: Cell, operationName: string) { // 执行与其他单元格的操作 switch (operationName) { // 根据操作名称进行不同的运算 case \"加\": // 如果是加法 this.value = otherCell.value + this.value // 计算新值 break // 结束case块 case \"减\": // 如果是减法 this.value = otherCell.value - this.value // 计算新值 break // 结束case块 case \"乘\": // 如果是乘法 this.value = otherCell.value * this.value // 计算新值 break // 结束case块 case \"除\": // 如果是除法 if (this.value === 0) { // 检查除数是否为0 promptAction.showToast({ message: '除数不能为0', bottom: 400 }) // 提示错误信息 return false // 返回false，表示操作无效 } this.value = otherCell.value / this.value // 计算新值 break // 结束case块 } otherCell.isVisible = false // 隐藏参与运算的另一个单元格 this.displayValue = `${this.value \u003e= 0 ? '' : '-'}${this.convertToFraction(Math.abs(this.value))}` // 更新显示值 return true // 返回true，表示操作成功 } findGreatestCommonDivisor(a: number, b: number): number { // 计算两个数的最大公约数 return b === 0 ? a : this.findGreatestCommonDivisor(b, a % b) // 使用递归算法求最大公约数 } convertToFraction(decimal: number): string { // 将小数转换为分数形式 let tolerance = 1.0E-6 // 设置容差值 let maxIterations = 1000 // 设置最大迭代次数 let pNumerator = 1 // 分子初始化 let pDenominator = 0 // 分母初始化 let qNumerator = 0 // 辅助变量 let qDenominator = 1 // 辅助变量 let currentDecimal = decimal // 当前处理的小数 let iterationCount = 0 // 迭代计数 do { // 执行直到满足条件 let integerPart = Math.floor(currentDecimal) // 取整部分 let temp = pNumerator // 临时保存分子 pNumerator = integerPart * pNumerator + pDenominator // 更新分子 pDenominator = temp // 更新分母 temp = qNumerator // 临时保存辅助变量 qNumerator = integerPart * qNumerator + qDenominator // 更新辅助变量 qDenominator = temp // 更新辅助变量 currentDecimal = 1 / (currentDecimal - integerPart) // 更新小数部分 iterationCount++ // 增加迭代计数 } while (Math.abs(decimal - pNumerator / qNumerator) \u003e decimal * tolerance \u0026\u0026 iterationCount \u003c maxIterations) // 继续迭代直到达到容差或最大迭代次数 if (iterationCount \u003e= maxIterations) { // 如果达到最大迭代次数 return `${decimal}` // 返回原小数 } let gcdValue = this.calculateIterativeGcd(pNumerator, qNumerator) // 计算分子和分母的最大公约数 let reducedNumerator = pNumerator / gcdValue // 化简后的分子 let reducedDenominator = qNumerator / gcdValue // 化简后的分母 return `${reducedNumerator}${reducedDenominator !== 1 ? '/' + reducedDenominator : ''}` // 返回化简后的分数形式 } calculateIterativeGcd(a: number, b: number): number { // 使用迭代方式计算两个数的最大公约数 while (b !== 0) { // 当b不为0时继续 let temp = b // 临时保存b b = a % b // 更新b a = temp // 更新a } return a // 返回最大公约数 } } class JudgePointSolution { // 定义JudgePointSolution类，用于寻找24点游戏的解 solutions: string[] = [] // 存储找到的解 accuracyThreshold = Math.pow(10, -6) // 设置精度阈值 operations = [// 定义四种基本运算 (a: number, b: number) =\u003e a + b, // 加法 (a: number, b: number) =\u003e a * b, // 乘法 (a: number, b: number) =\u003e a - b, // 减法 (a: number, b: number) =\u003e a / b,// 除法 ] searchSolutions(currentNumbers: number[], pathExpression: string) { // 查找解的递归方法 if (this.solutions.length \u003e 0) { // 如果已经找到解，则返回 return } if (currentNumbers.length === 1) { // 如果只剩下一个数 if (Math.abs(currentNumbers[0] - 24) \u003c this.accuracyThreshold) { // 如果该数等于24（在阈值范围内） this.solutions.push(pathExpression) // 将路径表达式作为解加入数组 } return // 结束递归 } for (let i = 0; i \u003c currentNumbers.length - 1; i++) { // 对所有数进行两两组合 for (let j = i + 1; j \u003c currentNumbers.length; j++) { // 对所有数进行两两组合 const tempNumbers = this.removeNumberFromArray(currentNumbers, i, j) // 创建新的数组，移除当前两个数 for (let k = 0; k \u003c 4; k++) { // 对四种运算分别尝试 let tempPath = pathExpression.length \u003e 0 ? `${pathExpression}, ` : '' // 格式化路径表达式 tempPath += `(${currentNumbers[i]} ${this.getOperationSymbol(k)} ${currentNumbers[j]})` // 添加当前运算表达式到路径 tempNumbers.push(this.operations[k](currentNumbers[i], currentNumbers[j])) // 计算结果并加入临时数组 this.searchSolutions(tempNumbers, tempPath) // 递归查找解 tempNumbers.pop() // 移除最后一个加入的结果 if (k === 2 || k === 3) { // 如果是减法或除法 let tempPathSwapped = pathExpression.length \u003e 0 ? `${pathExpression}, ` : '' // 格式化路径表达式 tempPathSwapped += `(${currentNumbers[j]} ${this.getOperationSymbol(k)} ${currentNumbers[i]})` // 添加当前运算表达式到路径 tempNumbers.push(this.operations[k](currentNumbers[j], currentNumbers[i])) // 计算结果并加入临时数组 this.searchSolutions(tempNumbers, tempPathSwapped) // 递归查找解 tempNumbers.pop() // 移除最后一个加入的结果 } } } } } find24Solutions(numbers: number[]): string[] { // 查找所有可能的解 this.solutions = [] // 清空解数组 this.searchSolutions(numbers, '') // 开始查找 return this.solutions // 返回解数组 } getOperationSymbol(index: number): string { // 获取运算符号 const symbols = ['+', '*', '-', '/'] // 定义符号数组 return symbols[index] // 返回对应的符号 } removeNumberFromArray(array: number[], index1: number, index2: number): number[] { // 从数组中移除指定位置的元素 const newArray: number[] = [] // 新数组 for (let k = 0; k \u003c array.length; k++) { // 遍历原始数组 if (k !== index1 \u0026\u0026 k !== index2) { // 如果不是需要移除的位置 newArray.push(array[k]) // 将元素加入新数组 } } return newArray // 返回新数组 } } @Entry @Component struct GameIndex { @State randomNumbers: number[] = [] // 用于存储随机生成的游戏数字 @State symbols: string[] = [\"加\", \"减\", \"乘\", \"除\"] // 存储游戏中可用的运算符号字符串数组 @State cells: Cell[] = [// 存储游戏中的单元格实例数组 new Cell(0, 0), // 创建位于第0行第0列的单元格 new Cell(0, 1), // 创建位于第0行第1列的单元格 new Cell(1, 0), // 创建位于第1行第0列的单元格 new Cell(1, 1)// 创建位于第1行第1列的单元格 ] @State selectedNumberIndex: number = -1 // 存储选中的数字单元格的索引，默认为-1表示未选择 @State selectedSymbolIndex: number = -1 // 存储选中的运算符号的索引，默认为-1表示未选择 @State showSolution: boolean = false // 控制是否显示游戏的解决方案，默认为不显示 cellWidth: number = 250 // 单个单元格的宽度 cellMargin: number = 15 // 单元格之间的间距 judgePoint24Util: JudgePointSolution = new JudgePointSolution() // 创建一个JudgePointSolution类的实例，用于寻找游戏的解 isShowAnim: boolean = false //单元格是否正在移动，若移动中禁止操作以防闪退 aboutToAppear(): void { this.resetGame() } resetGame() { this.randomNumbers = [] for (let i = 0; i \u003c this.cells.length; i++) { let randomValue = Math.floor(Math.random() * 13) + 1 this.cells[i].setDefaultValue(randomValue) this.randomNumbers.push(randomValue) } this.selectedNumberIndex = -1 this.selectedSymbolIndex = -1 this.showSolution = false let solutions = this.judgePoint24Util.find24Solutions(this.randomNumbers) console.info(`【${solutions}】`) if (solutions.length === 0) { console.info(`无解，重新循环`) this.resetGame() } } build() { Column({ space: 20 }) { // 显示/隐藏 解决方案 Text(`${this.judgePoint24Util.find24Solutions(this.randomNumbers)}`) .fontSize(20) .fontColor(Color.White) .backgroundColor(\"#ffa101\") .visibility(this.showSolution ? Visibility.Visible : Visibility.Hidden) .padding(10) .borderRadius(10) // 数字 Row() { Flex({ wrap: FlexWrap.Wrap }) { ForEach(this.cells, (cell: Cell, index: number) =\u003e { Text(`${cell.displayValue}`) .fontSize(`${this.cellWidth / 3}lpx`) .width(`${this.cellWidth}lpx`) .height(`${this.cellWidth}lpx`) .fontColor(cell !== this.cells[this.selectedNumberIndex] ? \"#ffffff\" : \"#fe4b00\") .backgroundColor(cell !== this.cells[this.selectedNumberIndex] ? \"#ffa101\" : \"#fddf4b\") .borderRadius(`${this.cellMargin}lpx`) .margin(`${this.cellMargin}lpx`) .textAlign(TextAlign.Center) .clickEffect({ level: ClickEffectLevel.LIGHT, scale: 0.8 }) .visibility(cell.isVisible ? Visibility.Visible : Visibility.Hidden) .translate({ x: `${cell.xPosition}lpx`, y: `${cell.yPosition}lpx` }) .onClick(() =\u003e { if (this.selectedNumberIndex === -1) { this.selectedNumberIndex = index } else if (this.selectedNumberIndex === index) { this.selectedNumberIndex = -1 } else if (this.selectedSymbolIndex === -1) { console.info(`未选择操作符，仅改变选中位置`) this.selectedNumberIndex = index } else { if (this.isShowAnim) { return } this.isShowAnim = true animateToImmediately({ duration: 300, onFinish: () =\u003e { this.cells[this.selectedNumberIndex].xPosition = 0 // 动画结束后位置归0 this.cells[this.selectedNumberIndex].yPosition = 0 // 动画结束后位置归0 this.cells[index].performOperation( this.cells[this.selectedNumberIndex], this.symbols[this.selectedSymbolIndex] ) this.selectedNumberIndex = -1 this.selectedSymbolIndex = -1 // 统计结果 let countVisibleCells: number = 0 for (let i = 0; i \u003c this.cells.length; i++) { if (this.cells[i].isVisible) { countVisibleCells++ } } if (countVisibleCells === 1) { // 当前是最后一个 promptAction.showDialog({ title: '游戏结束', message: `${this.cells[index].value === 24 ? '【胜利】' : '【失败】'}`, buttons: [{ text: '重新开始', color: '#ffa500' }] }).then(() =\u003e { this.resetGame() }) } this.isShowAnim = false }, }, () =\u003e { let temp = this.cellWidth + this.cellMargin // 要移动的单元格距离 let movingCell: Cell = this.cells[this.selectedNumberIndex] movingCell.xPosition = (cell.columnIndex - movingCell.columnIndex) * temp movingCell.yPosition = (cell.rowIndex - movingCell.rowIndex) * temp }) } }) }) }.width(`${this.cellWidth * 2 + this.cellMargin * 4}lpx`) }.width('100%').justifyContent(FlexAlign.Center) // 操作符 Row() { Flex({ wrap: FlexWrap.Wrap }) { ForEach(this.symbols, (symbol: string, index: number) =\u003e { Text(`${symbol}`) .fontSize(`${this.cellWidth / 4}lpx`) .width(`${this.cellWidth / 2}lpx`) .height(`${this.cellWidth / 2}lpx`) .fontColor(this.selectedSymbolIndex !== index ? \"#c16cf9\" : \"#fcfeff\") .backgroundColor(this.selectedSymbolIndex !== index ? Color.Transparent : \"#c16cf9\") .borderRadius(`${this.cellMargin}lpx`) .margin(`${this.cellMargin / 2}lpx`) .textAlign(TextAlign.Center) .clickEffect({ level: ClickEffectLevel.LIGHT, scale: 0.8 }) .onClick(() =\u003e { if (this.selectedSymbolIndex === index) { this.selectedSymbolIndex = -1 } else { this.selectedSymbolIndex = index } }) }) }.width(`${this.cellWidth * 2 + this.cellMargin * 4}lpx`) }.width('100%').justifyContent(FlexAlign.Center) // 重新开始 / 解决方案 Row() { Button('重新开始').clickEffect({ level: ClickEffectLevel.LIGHT, scale: 0.8 }).onClick(() =\u003e { this.resetGame() }) Button('解决方案').clickEffect({ level: ClickEffectLevel.LIGHT, scale: 0.8 }).onClick(() =\u003e { this.showSolution = !this.showSolution }) }.width('100%').justifyContent(FlexAlign.SpaceEvenly) } .width('100%').height('100%') .backgroundColor(\"#0d1015\") .padding(20) } } ","wordCount":"3374","inLanguage":"en","datePublished":"2024-06-15T23:58:57Z","dateModified":"2024-06-15T23:58:57Z","author":{"@type":"Person","name":"dwd"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://qfsyso.github.io/posts/harmonyos-next-worldtime-whack-mole/"},"publisher":{"@type":"Organization","name":"MLOG","logo":{"@type":"ImageObject","url":"https://qfsyso.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://qfsyso.github.io/ accesskey=h title="MLOG (Alt + H)">MLOG</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://qfsyso.github.io/posts/ title=Archive><span>Archive</span></a></li><li><a href=https://qfsyso.github.io/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://qfsyso.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">HarmonyOS Next WorldTime Whack Mole</h1><div class=post-meta><span title='2024-06-15 23:58:57 +0000 UTC'>June 15, 2024</span>&nbsp;·&nbsp;16 min&nbsp;·&nbsp;dwd</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#%e7%8e%af%e5%a2%83 aria-label=环境>环境</a></li><li><a href=#worldtime-%e4%b8%96%e7%95%8c%e6%97%b6%e5%ba%94%e7%94%a8 aria-label="WorldTime 世界时应用">WorldTime 世界时应用</a><ul><li><a href=#%e5%ae%9e%e7%8e%b0%e6%80%9d%e8%b7%af aria-label=实现思路>实现思路</a></li></ul></li><li><a href=#%e4%bb%a3%e7%a0%81 aria-label=代码>代码</a></li><li><a href=#%e6%89%93%e5%9c%b0%e9%bc%a0 aria-label=打地鼠>打地鼠</a><ul><li><a href=#%e4%b8%bb%e8%a6%81%e5%8a%9f%e8%83%bd aria-label=主要功能：>主要功能：</a></li><li><a href=#%e4%bb%a3%e7%a0%81-1 aria-label=代码>代码</a></li></ul></li><li><a href=#24 aria-label=24>24</a><ul><li><a href=#%e4%bb%a3%e7%a0%81-2 aria-label=代码>代码</a></li></ul></li></ul></div></details></div><div class=post-content><p>HarmonyOS Next WorldTime Whack Mole</p><p>HarmonyOS应用 鸿蒙NEXT开发 世界时应用 打地鼠</p><h1 id=环境>环境<a hidden class=anchor aria-hidden=true href=#环境>#</a></h1><p>Windows 11
DevEco Studio 5.0.1 Release Version: 5.0.5.306
HarmonyOS 5.0.1(13)
ArkTS ArkUI API 13</p><h1 id=worldtime-世界时应用>WorldTime 世界时应用<a hidden class=anchor aria-hidden=true href=#worldtime-世界时应用>#</a></h1><h2 id=实现思路>实现思路<a hidden class=anchor aria-hidden=true href=#实现思路>#</a></h2><p>获取时区信息
更新时间
搜索功能</p><h1 id=代码>代码<a hidden class=anchor aria-hidden=true href=#代码>#</a></h1><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>i18n</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;@kit.LocalizationKit&#39;</span> <span style=color:#75715e>// 导入国际化模块，用于处理多语言
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>inputMethod</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;@kit.IMEKit&#39;</span> <span style=color:#75715e>// 导入输入法模块
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>ObservedV2</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 观察者装饰器，用于观察状态变化
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>CityTimeInfo</span> { <span style=color:#75715e>// 定义城市时间信息类
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>Trace</span> <span style=color:#a6e22e>cityName</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>string</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;&#34;</span>; <span style=color:#75715e>// 城市名称，初始为空字符串
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>Trace</span> <span style=color:#a6e22e>currentTime</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>string</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;&#34;</span>; <span style=color:#75715e>// 当前时间，初始为空字符串
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>timeZone</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>i18n</span>.<span style=color:#a6e22e>TimeZone</span>; <span style=color:#75715e>// 时区属性
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>constructor</span>(<span style=color:#a6e22e>cityName</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>string</span>, <span style=color:#a6e22e>timeZone</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>i18n</span>.<span style=color:#a6e22e>TimeZone</span>) { <span style=color:#75715e>// 构造函数，接收城市名称和时区
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cityName</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>cityName</span>; <span style=color:#75715e>// 设置城市名称
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>timeZone</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>timeZone</span>; <span style=color:#75715e>// 设置时区
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>Trace</span> <span style=color:#a6e22e>isVisible</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>boolean</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>; <span style=color:#75715e>// 是否可见，初始为true
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>Entry</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 入口组件装饰器
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>Component</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 组件装饰器
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>struct</span> <span style=color:#a6e22e>WorldClockApp</span> { <span style=color:#75715e>// 定义世界时钟应用组件
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>State</span> <span style=color:#66d9ef>private</span> <span style=color:#a6e22e>searchText</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>string</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;&#39;</span>; <span style=color:#75715e>// 搜索文本，初始为空字符串
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>State</span> <span style=color:#66d9ef>private</span> <span style=color:#a6e22e>cityTimeList</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>CityTimeInfo</span>[] <span style=color:#f92672>=</span> []; <span style=color:#75715e>// 城市时间信息列表，初始为空数组
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>private</span> <span style=color:#a6e22e>lineColor</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>string</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;#e6e6e6&#34;</span>; <span style=color:#75715e>// 边框颜色
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>private</span> <span style=color:#a6e22e>titleBackgroundColor</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>string</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;#f8f8f8&#34;</span>; <span style=color:#75715e>// 标题背景色
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>private</span> <span style=color:#a6e22e>textColor</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>string</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;#333333&#34;</span>; <span style=color:#75715e>// 文字颜色
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>private</span> <span style=color:#a6e22e>basePadding</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>number</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>4</span>; <span style=color:#75715e>// 内边距
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>private</span> <span style=color:#a6e22e>lineWidth</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>number</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span>; <span style=color:#75715e>// 边框宽度
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>private</span> <span style=color:#a6e22e>rowHeight</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>number</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>50</span>; <span style=color:#75715e>// 行高
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>private</span> <span style=color:#a6e22e>ratio</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>number</span>[] <span style=color:#f92672>=</span> [<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>]; <span style=color:#75715e>// 列宽比例
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>private</span> <span style=color:#a6e22e>textSize</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>number</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>14</span>; <span style=color:#75715e>// 基础字体大小
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>private</span> <span style=color:#a6e22e>updateIntervalId</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#75715e>// 更新间隔ID
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>updateAllCityTimes</span>() { <span style=color:#75715e>// 更新所有城市的时间
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>locale</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>i18n</span>.<span style=color:#a6e22e>System</span>.<span style=color:#a6e22e>getSystemLocale</span>(); <span style=color:#75715e>// 获取系统语言环境
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>cityTime</span> <span style=color:#66d9ef>of</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cityTimeList</span>) { <span style=color:#75715e>// 遍历城市时间列表
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>timeZoneId</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>string</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>cityTime</span>.<span style=color:#a6e22e>timeZone</span>.<span style=color:#a6e22e>getID</span>(); <span style=color:#75715e>// 获取时区ID
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>calendar</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>i18n</span>.<span style=color:#a6e22e>getCalendar</span>(<span style=color:#a6e22e>locale</span>); <span style=color:#75715e>// 获取日历对象
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#a6e22e>calendar</span>.<span style=color:#a6e22e>setTimeZone</span>(<span style=color:#a6e22e>timeZoneId</span>); <span style=color:#75715e>// 设置日历的时区
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>      <span style=color:#75715e>// 获取当前时间的各个部分
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>year</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>calendar</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#34;year&#34;</span>).<span style=color:#a6e22e>toString</span>().<span style=color:#a6e22e>padStart</span>(<span style=color:#ae81ff>4</span>, <span style=color:#e6db74>&#39;0&#39;</span>); <span style=color:#75715e>// 年
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>month</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>calendar</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#34;month&#34;</span>).<span style=color:#a6e22e>toString</span>().<span style=color:#a6e22e>padStart</span>(<span style=color:#ae81ff>2</span>, <span style=color:#e6db74>&#39;0&#39;</span>); <span style=color:#75715e>// 月
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>day</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>calendar</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#34;date&#34;</span>).<span style=color:#a6e22e>toString</span>().<span style=color:#a6e22e>padStart</span>(<span style=color:#ae81ff>2</span>, <span style=color:#e6db74>&#39;0&#39;</span>); <span style=color:#75715e>// 日
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>hour</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>calendar</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#34;hour_of_day&#34;</span>).<span style=color:#a6e22e>toString</span>().<span style=color:#a6e22e>padStart</span>(<span style=color:#ae81ff>2</span>, <span style=color:#e6db74>&#39;0&#39;</span>); <span style=color:#75715e>// 小时
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>minute</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>calendar</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#34;minute&#34;</span>).<span style=color:#a6e22e>toString</span>().<span style=color:#a6e22e>padStart</span>(<span style=color:#ae81ff>2</span>, <span style=color:#e6db74>&#39;0&#39;</span>); <span style=color:#75715e>// 分钟
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>second</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>calendar</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#34;second&#34;</span>).<span style=color:#a6e22e>toString</span>().<span style=color:#a6e22e>padStart</span>(<span style=color:#ae81ff>2</span>, <span style=color:#e6db74>&#39;0&#39;</span>); <span style=color:#75715e>// 秒
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>      <span style=color:#75715e>// 更新城市的当前时间字符串
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#a6e22e>cityTime</span>.<span style=color:#a6e22e>currentTime</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>year</span><span style=color:#e6db74>}</span><span style=color:#e6db74>年</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>month</span><span style=color:#e6db74>}</span><span style=color:#e6db74>月</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>day</span><span style=color:#e6db74>}</span><span style=color:#e6db74>日 </span><span style=color:#e6db74>${</span><span style=color:#a6e22e>hour</span><span style=color:#e6db74>}</span><span style=color:#e6db74>:</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>minute</span><span style=color:#e6db74>}</span><span style=color:#e6db74>:</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>second</span><span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>onPageShow</span>()<span style=color:#f92672>:</span> <span style=color:#66d9ef>void</span> { <span style=color:#75715e>// 页面显示时的处理
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>clearInterval</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>updateIntervalId</span>); <span style=color:#75715e>// 清除之前的定时器
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>updateIntervalId</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>setInterval</span>(() =&gt; { <span style=color:#75715e>// 设置新的定时器
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>updateAllCityTimes</span>(); <span style=color:#75715e>// 每秒更新所有城市的时间
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    }, <span style=color:#ae81ff>1000</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>onPageHide</span>()<span style=color:#f92672>:</span> <span style=color:#66d9ef>void</span> { <span style=color:#75715e>// 页面隐藏时的处理
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>clearInterval</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>updateIntervalId</span>); <span style=color:#75715e>// 清除定时器
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>private</span> <span style=color:#a6e22e>highlightSearchText</span>(<span style=color:#a6e22e>cityTime</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>CityTimeInfo</span>, <span style=color:#a6e22e>keyword</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>string</span>) { <span style=color:#75715e>// 高亮搜索文本
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>text</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>cityTime</span>.<span style=color:#a6e22e>cityName</span> <span style=color:#75715e>// 获取城市名称
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span><span style=color:#a6e22e>keyword</span>) { <span style=color:#75715e>// 如果没有关键词
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#a6e22e>cityTime</span>.<span style=color:#a6e22e>isVisible</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span> <span style=color:#75715e>// 设置城市可见
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#66d9ef>return</span> [<span style=color:#a6e22e>text</span>] <span style=color:#75715e>// 返回城市名称
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>segments</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>string</span>[] <span style=color:#f92672>=</span> []; <span style=color:#75715e>// 存储分段文本
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>lastMatchEnd</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>number</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#75715e>// 上一个匹配结束的位置
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>while</span> (<span style=color:#66d9ef>true</span>) { <span style=color:#75715e>// 循环查找关键词
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>matchIndex</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>text</span>.<span style=color:#a6e22e>indexOf</span>(<span style=color:#a6e22e>keyword</span>, <span style=color:#a6e22e>lastMatchEnd</span>); <span style=color:#75715e>// 查找关键词位置
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>matchIndex</span> <span style=color:#f92672>===</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>) { <span style=color:#75715e>// 如果没有找到
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#a6e22e>segments</span>.<span style=color:#a6e22e>push</span>(<span style=color:#a6e22e>text</span>.<span style=color:#a6e22e>slice</span>(<span style=color:#a6e22e>lastMatchEnd</span>)); <span style=color:#75715e>// 添加剩余文本
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>break</span>; <span style=color:#75715e>// 退出循环
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>segments</span>.<span style=color:#a6e22e>push</span>(<span style=color:#a6e22e>text</span>.<span style=color:#a6e22e>slice</span>(<span style=color:#a6e22e>lastMatchEnd</span>, <span style=color:#a6e22e>matchIndex</span>)); <span style=color:#75715e>// 添加匹配前的文本
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#a6e22e>segments</span>.<span style=color:#a6e22e>push</span>(<span style=color:#a6e22e>text</span>.<span style=color:#a6e22e>slice</span>(<span style=color:#a6e22e>matchIndex</span>, <span style=color:#a6e22e>matchIndex</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>keyword</span>.<span style=color:#a6e22e>length</span>)); <span style=color:#75715e>// 添加匹配的关键词
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#a6e22e>lastMatchEnd</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>matchIndex</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>keyword</span>.<span style=color:#a6e22e>length</span>; <span style=color:#75715e>// 更新最后匹配结束位置
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>cityTime</span>.<span style=color:#a6e22e>isVisible</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>segments</span>.<span style=color:#a6e22e>indexOf</span>(<span style=color:#a6e22e>keyword</span>) <span style=color:#f92672>!=</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>) <span style=color:#75715e>// 设置城市可见性
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>segments</span>; <span style=color:#75715e>// 返回分段文本
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>aboutToAppear</span>() { <span style=color:#75715e>// 组件即将出现时的处理
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>timeZoneIds</span><span style=color:#f92672>:</span> Array<span style=color:#f92672>&lt;</span><span style=color:#a6e22e>string</span><span style=color:#f92672>&gt;</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>i18n</span>.<span style=color:#a6e22e>TimeZone</span>.<span style=color:#a6e22e>getAvailableIDs</span>(); <span style=color:#75715e>// 获取可用时区ID列表
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cityTimeList</span>.<span style=color:#a6e22e>push</span>(<span style=color:#66d9ef>new</span> <span style=color:#a6e22e>CityTimeInfo</span>(<span style=color:#e6db74>&#39;北京 (中国)&#39;</span>, <span style=color:#a6e22e>i18n</span>.<span style=color:#a6e22e>getTimeZone</span>())); <span style=color:#75715e>// 添加北京的城市时间信息
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>//this.cityTimeList.push(new CityTimeInfo(&#39;东京 (日本)&#39;, i18n.getTimeZone())); // 添加北京的城市时间信息
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>//this.cityTimeList.push(new CityTimeInfo(&#39;贝伦 (巴西)&#39;, i18n.getTimeZone())); // 添加北京的城市时间信息
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>id</span> <span style=color:#66d9ef>of</span> <span style=color:#a6e22e>timeZoneIds</span>) { <span style=color:#75715e>// 遍历时区ID
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>cityDisplayName</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>i18n</span>.<span style=color:#a6e22e>TimeZone</span>.<span style=color:#a6e22e>getCityDisplayName</span>(<span style=color:#a6e22e>id</span>.<span style=color:#a6e22e>split</span>(<span style=color:#e6db74>&#39;/&#39;</span>)[<span style=color:#ae81ff>1</span>], <span style=color:#e6db74>&#34;zh-CN&#34;</span>); <span style=color:#75715e>// 获取城市显示名称
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>cityDisplayName</span>) { <span style=color:#75715e>// 如果城市名称存在
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cityTimeList</span>.<span style=color:#a6e22e>push</span>(<span style=color:#66d9ef>new</span> <span style=color:#a6e22e>CityTimeInfo</span>(<span style=color:#a6e22e>cityDisplayName</span>, <span style=color:#a6e22e>i18n</span>.<span style=color:#a6e22e>getTimeZone</span>(<span style=color:#a6e22e>id</span>))); <span style=color:#75715e>// 添加城市时间信息
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>updateAllCityTimes</span>(); <span style=color:#75715e>// 更新所有城市的时间
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>build</span>() { <span style=color:#75715e>// 构建组件的UI
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>Column</span>({ <span style=color:#a6e22e>space</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>0</span> }) { <span style=color:#75715e>// 创建一个垂直列
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#a6e22e>Search</span>({ <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>$$this</span>.<span style=color:#a6e22e>searchText</span> })<span style=color:#75715e>// 创建搜索框
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        .<span style=color:#a6e22e>margin</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>basePadding</span>)<span style=color:#75715e>// 设置边距
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        .<span style=color:#a6e22e>fontFeature</span>(<span style=color:#e6db74>&#34;\&#34;ss01\&#34; on&#34;</span>) <span style=color:#75715e>// 设置字体特性
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#a6e22e>Column</span>() { <span style=color:#75715e>// 创建一个列
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#a6e22e>Row</span>() { <span style=color:#75715e>// 创建一行
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>          <span style=color:#a6e22e>Text</span>(<span style=color:#e6db74>&#39;城市&#39;</span>)<span style=color:#75715e>// 显示“城市”文本
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            .<span style=color:#a6e22e>height</span>(<span style=color:#e6db74>&#39;100%&#39;</span>)<span style=color:#75715e>// 高度占满
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            .<span style=color:#a6e22e>layoutWeight</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>ratio</span>[<span style=color:#ae81ff>0</span>])<span style=color:#75715e>// 设置布局权重
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            .<span style=color:#a6e22e>textAlign</span>(<span style=color:#a6e22e>TextAlign</span>.<span style=color:#a6e22e>Center</span>)<span style=color:#75715e>// 文本居中
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            .<span style=color:#a6e22e>fontSize</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>textSize</span>)<span style=color:#75715e>// 设置字体大小
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            .<span style=color:#a6e22e>fontWeight</span>(<span style=color:#ae81ff>600</span>)<span style=color:#75715e>// 设置字体粗细
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            .<span style=color:#a6e22e>fontColor</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>textColor</span>) <span style=color:#75715e>// 设置字体颜色
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>          <span style=color:#a6e22e>Line</span>().<span style=color:#a6e22e>height</span>(<span style=color:#e6db74>&#39;100%&#39;</span>).<span style=color:#a6e22e>width</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>lineWidth</span>).<span style=color:#a6e22e>backgroundColor</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>lineColor</span>) <span style=color:#75715e>// 创建分隔线
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>          <span style=color:#a6e22e>Text</span>(<span style=color:#e6db74>&#39;时间&#39;</span>)<span style=color:#75715e>// 显示“时间”文本
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            .<span style=color:#a6e22e>height</span>(<span style=color:#e6db74>&#39;100%&#39;</span>)<span style=color:#75715e>// 高度占满
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            .<span style=color:#a6e22e>layoutWeight</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>ratio</span>[<span style=color:#ae81ff>1</span>])<span style=color:#75715e>// 设置布局权重
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            .<span style=color:#a6e22e>textAlign</span>(<span style=color:#a6e22e>TextAlign</span>.<span style=color:#a6e22e>Center</span>)<span style=color:#75715e>// 文本居中
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            .<span style=color:#a6e22e>fontSize</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>textSize</span>)<span style=color:#75715e>// 设置字体大小
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            .<span style=color:#a6e22e>fontWeight</span>(<span style=color:#ae81ff>600</span>)<span style=color:#75715e>// 设置字体粗细
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            .<span style=color:#a6e22e>fontColor</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>textColor</span>) <span style=color:#75715e>// 设置字体颜色
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        }.<span style=color:#a6e22e>height</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rowHeight</span>).<span style=color:#a6e22e>borderWidth</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>lineWidth</span>).<span style=color:#a6e22e>borderColor</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>lineColor</span>) <span style=color:#75715e>// 设置行高和边框
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        .<span style=color:#a6e22e>backgroundColor</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>titleBackgroundColor</span>) <span style=color:#75715e>// 设置背景色
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      }.<span style=color:#a6e22e>width</span>(<span style=color:#e6db74>`100%`</span>).<span style=color:#a6e22e>padding</span>({ <span style=color:#a6e22e>left</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>basePadding</span>, <span style=color:#a6e22e>right</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>basePadding</span> }) <span style=color:#75715e>// 设置列宽和内边距
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>Scroll</span>() { <span style=color:#75715e>// 创建可滚动区域
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#a6e22e>Column</span>() { <span style=color:#75715e>// 创建一个列
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>          <span style=color:#a6e22e>ForEach</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cityTimeList</span>, (<span style=color:#a6e22e>item</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>CityTimeInfo</span>) =&gt; { <span style=color:#75715e>// 遍历城市时间列表
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#a6e22e>Row</span>() { <span style=color:#75715e>// 创建一行
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>              <span style=color:#a6e22e>Text</span>() { <span style=color:#75715e>// 创建文本
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                <span style=color:#a6e22e>ForEach</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>highlightSearchText</span>(<span style=color:#a6e22e>item</span>, <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>searchText</span>), (<span style=color:#a6e22e>segment</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>string</span>, <span style=color:#a6e22e>index</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>number</span>) =&gt; { <span style=color:#75715e>// 高亮搜索文本
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                  <span style=color:#a6e22e>ContainerSpan</span>() { <span style=color:#75715e>// 创建容器
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                    <span style=color:#a6e22e>Span</span>(<span style=color:#a6e22e>segment</span>)<span style=color:#75715e>// 创建文本段
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                      .<span style=color:#a6e22e>fontColor</span>(<span style=color:#a6e22e>segment</span> <span style=color:#f92672>===</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>searchText</span> <span style=color:#f92672>?</span> <span style=color:#a6e22e>Color</span>.<span style=color:#a6e22e>White</span> <span style=color:#f92672>:</span> <span style=color:#a6e22e>Color</span>.<span style=color:#a6e22e>Black</span>)<span style=color:#75715e>// 设置字体颜色
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                      .<span style=color:#a6e22e>onClick</span>(() =&gt; { <span style=color:#75715e>// 点击事件
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                        <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>info</span>(<span style=color:#e6db74>`高亮文本被点击：</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>segment</span><span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>); <span style=color:#75715e>// 输出点击的文本
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                        <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>info</span>(<span style=color:#e6db74>`点击索引：</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>index</span><span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>); <span style=color:#75715e>// 输出点击的索引
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                      });
</span></span><span style=display:flex><span>                  }.<span style=color:#a6e22e>textBackgroundStyle</span>({
</span></span><span style=display:flex><span>                    <span style=color:#75715e>// 设置文本背景样式
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                    <span style=color:#a6e22e>color</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>segment</span> <span style=color:#f92672>===</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>searchText</span> <span style=color:#f92672>?</span> <span style=color:#a6e22e>Color</span>.<span style=color:#a6e22e>Red</span> <span style=color:#f92672>:</span> <span style=color:#a6e22e>Color</span>.<span style=color:#a6e22e>Transparent</span> <span style=color:#75715e>// 根据是否匹配设置背景色
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                  });
</span></span><span style=display:flex><span>                });
</span></span><span style=display:flex><span>              }
</span></span><span style=display:flex><span>              .<span style=color:#a6e22e>height</span>(<span style=color:#e6db74>&#39;100%&#39;</span>) <span style=color:#75715e>// 高度占满
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>              .<span style=color:#a6e22e>layoutWeight</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>ratio</span>[<span style=color:#ae81ff>0</span>]) <span style=color:#75715e>// 设置布局权重
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>              .<span style=color:#a6e22e>textAlign</span>(<span style=color:#a6e22e>TextAlign</span>.<span style=color:#a6e22e>Center</span>) <span style=color:#75715e>// 文本居中
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>              .<span style=color:#a6e22e>fontSize</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>textSize</span>) <span style=color:#75715e>// 设置字体大小
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>              .<span style=color:#a6e22e>fontColor</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>textColor</span>) <span style=color:#75715e>// 设置字体颜色
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>              <span style=color:#a6e22e>Line</span>().<span style=color:#a6e22e>height</span>(<span style=color:#e6db74>&#39;100%&#39;</span>).<span style=color:#a6e22e>width</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>lineWidth</span>).<span style=color:#a6e22e>backgroundColor</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>lineColor</span>) <span style=color:#75715e>// 创建分隔线
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>              <span style=color:#a6e22e>Text</span>(<span style=color:#a6e22e>item</span>.<span style=color:#a6e22e>currentTime</span>)<span style=color:#75715e>// 显示当前时间
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                .<span style=color:#a6e22e>height</span>(<span style=color:#e6db74>&#39;100%&#39;</span>)<span style=color:#75715e>// 高度占满
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                .<span style=color:#a6e22e>layoutWeight</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>ratio</span>[<span style=color:#ae81ff>1</span>])<span style=color:#75715e>// 设置布局权重
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                .<span style=color:#a6e22e>textAlign</span>(<span style=color:#a6e22e>TextAlign</span>.<span style=color:#a6e22e>Center</span>)<span style=color:#75715e>// 文本居中
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                .<span style=color:#a6e22e>fontSize</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>textSize</span>)<span style=color:#75715e>// 设置字体大小
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                .<span style=color:#a6e22e>fontColor</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>textColor</span>) <span style=color:#75715e>// 设置字体颜色
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            }
</span></span><span style=display:flex><span>            .<span style=color:#a6e22e>height</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rowHeight</span>) <span style=color:#75715e>// 设置行高
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            .<span style=color:#a6e22e>borderWidth</span>({ <span style=color:#a6e22e>left</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>lineWidth</span>, <span style=color:#a6e22e>right</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>lineWidth</span>, <span style=color:#a6e22e>bottom</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>lineWidth</span> }) <span style=color:#75715e>// 设置边框宽度
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            .<span style=color:#a6e22e>borderColor</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>lineColor</span>) <span style=color:#75715e>// 设置边框颜色
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            .<span style=color:#a6e22e>visibility</span>(<span style=color:#a6e22e>item</span>.<span style=color:#a6e22e>isVisible</span> <span style=color:#f92672>?</span> <span style=color:#a6e22e>Visibility</span>.<span style=color:#a6e22e>Visible</span> <span style=color:#f92672>:</span> <span style=color:#a6e22e>Visibility</span>.<span style=color:#a6e22e>None</span>) <span style=color:#75715e>// 根据可见性设置显示状态
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>          })
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        }.<span style=color:#a6e22e>width</span>(<span style=color:#e6db74>`100%`</span>).<span style=color:#a6e22e>padding</span>({ <span style=color:#a6e22e>left</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>basePadding</span>, <span style=color:#a6e22e>right</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>basePadding</span> }) <span style=color:#75715e>// 设置宽度和内边距
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      }
</span></span><span style=display:flex><span>      .<span style=color:#a6e22e>width</span>(<span style=color:#e6db74>&#39;100%&#39;</span>) <span style=color:#75715e>// 设置宽度占满
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      .<span style=color:#a6e22e>layoutWeight</span>(<span style=color:#ae81ff>1</span>) <span style=color:#75715e>// 设置布局权重
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      .<span style=color:#a6e22e>align</span>(<span style=color:#a6e22e>Alignment</span>.<span style=color:#a6e22e>Top</span>) <span style=color:#75715e>// 对齐方式
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      .<span style=color:#a6e22e>onScrollStart</span>(() =&gt; { <span style=color:#75715e>// 滚动开始事件
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>onPageHide</span>() <span style=color:#75715e>// 页面隐藏处理
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      })
</span></span><span style=display:flex><span>      .<span style=color:#a6e22e>onScrollStop</span>(() =&gt; { <span style=color:#75715e>// 滚动停止事件
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>onPageShow</span>() <span style=color:#75715e>// 页面显示处理
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      })
</span></span><span style=display:flex><span>      .<span style=color:#a6e22e>onTouch</span>((<span style=color:#a6e22e>event</span>) =&gt; { <span style=color:#75715e>// 触摸事件
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>event</span>.<span style=color:#a6e22e>type</span> <span style=color:#f92672>==</span> <span style=color:#a6e22e>TouchType</span>.<span style=color:#a6e22e>Down</span>) { <span style=color:#75715e>// 如果是按下事件
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>          <span style=color:#a6e22e>inputMethod</span>.<span style=color:#a6e22e>getController</span>().<span style=color:#a6e22e>stopInputSession</span>() <span style=color:#75715e>// 停止输入会话
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        }
</span></span><span style=display:flex><span>      })
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h1 id=打地鼠>打地鼠<a hidden class=anchor aria-hidden=true href=#打地鼠>#</a></h1><h2 id=主要功能>主要功能：<a hidden class=anchor aria-hidden=true href=#主要功能>#</a></h2><p>地鼠组件：Hamster 结构体定外观，依单元格宽调尺寸。
单元格 Cell：有地鼠显示状态及缩放选项，含 setSelectedTrueTime 设显示时间戳、checkTime 检是否超停留时间隐藏。
游戏主组件 Index：维护核心状态如动画间隔等，有 startGame 与 endGame 方法初始化与重置数据。
界面构建：Index 组件 build 方法定布局，含计时器、得分板及单元格。
时间与显示逻辑：TextTimer 组件控时，定时选单元格显地鼠，点击地鼠增分并执行动画。
用户交互：点击地鼠单元格得分，点击后地鼠隐藏且更新得分。</p><h2 id=代码-1>代码<a hidden class=anchor aria-hidden=true href=#代码-1>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#75715e>//index.ets
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>curves</span>, window } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;@kit.ArkUI&#39;</span> <span style=color:#75715e>// 导入所需的库和模块
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 定义地鼠组件
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>Component</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>struct</span> <span style=color:#a6e22e>Hamster</span> {
</span></span><span style=display:flex><span>  <span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>Prop</span> <span style=color:#a6e22e>cellWidth</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>number</span> <span style=color:#75715e>// 定义一个属性，表示单元格的宽度
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>build</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>Stack</span>() { <span style=color:#75715e>// 创建一个堆叠布局
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#75715e>// 身体
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#a6e22e>Text</span>()
</span></span><span style=display:flex><span>        .<span style=color:#a6e22e>width</span>(<span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cellWidth</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span><span style=color:#e6db74>}</span><span style=color:#e6db74>lpx`</span>) <span style=color:#75715e>// 设置宽度为单元格宽度的一半
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        .<span style=color:#a6e22e>height</span>(<span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cellWidth</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>3</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>2</span><span style=color:#e6db74>}</span><span style=color:#e6db74>lpx`</span>) <span style=color:#75715e>// 设置高度为单元格高度的2/3
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        .<span style=color:#a6e22e>backgroundColor</span>(<span style=color:#e6db74>&#34;#b49579&#34;</span>) <span style=color:#75715e>// 设置背景颜色
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        .<span style=color:#a6e22e>borderRadius</span>({ <span style=color:#a6e22e>topLeft</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;50%&#39;</span>, <span style=color:#a6e22e>topRight</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;50%&#39;</span> }) <span style=color:#75715e>// 设置圆角
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        .<span style=color:#a6e22e>borderColor</span>(<span style=color:#e6db74>&#34;#2a272d&#34;</span>) <span style=color:#75715e>// 设置边框颜色
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        .<span style=color:#a6e22e>borderWidth</span>(<span style=color:#ae81ff>1</span>) <span style=color:#75715e>// 设置边框宽度
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#75715e>// 嘴巴
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#a6e22e>Ellipse</span>()
</span></span><span style=display:flex><span>        .<span style=color:#a6e22e>width</span>(<span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cellWidth</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>4</span><span style=color:#e6db74>}</span><span style=color:#e6db74>lpx`</span>) <span style=color:#75715e>// 设置嘴巴的宽度
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        .<span style=color:#a6e22e>height</span>(<span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cellWidth</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>5</span><span style=color:#e6db74>}</span><span style=color:#e6db74>lpx`</span>) <span style=color:#75715e>// 设置嘴巴的高度
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        .<span style=color:#a6e22e>fillOpacity</span>(<span style=color:#ae81ff>1</span>) <span style=color:#75715e>// 设置填充不透明度
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        .<span style=color:#a6e22e>fill</span>(<span style=color:#e6db74>&#34;#e7bad7&#34;</span>) <span style=color:#75715e>// 设置填充颜色
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        .<span style=color:#a6e22e>stroke</span>(<span style=color:#e6db74>&#34;#563e3f&#34;</span>) <span style=color:#75715e>// 设置边框颜色
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        .<span style=color:#a6e22e>strokeWidth</span>(<span style=color:#ae81ff>1</span>) <span style=color:#75715e>// 设置边框宽度
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        .<span style=color:#a6e22e>margin</span>({ <span style=color:#a6e22e>top</span><span style=color:#f92672>:</span> <span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cellWidth</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>6</span><span style=color:#e6db74>}</span><span style=color:#e6db74>lpx`</span> }) <span style=color:#75715e>// 设置上边距
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#75715e>// 左眼睛
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#a6e22e>Ellipse</span>()
</span></span><span style=display:flex><span>        .<span style=color:#a6e22e>width</span>(<span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cellWidth</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>9</span><span style=color:#e6db74>}</span><span style=color:#e6db74>lpx`</span>) <span style=color:#75715e>// 设置左眼睛的宽度
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        .<span style=color:#a6e22e>height</span>(<span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cellWidth</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>6</span><span style=color:#e6db74>}</span><span style=color:#e6db74>lpx`</span>) <span style=color:#75715e>// 设置左眼睛的高度
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        .<span style=color:#a6e22e>fillOpacity</span>(<span style=color:#ae81ff>1</span>) <span style=color:#75715e>// 设置填充不透明度
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        .<span style=color:#a6e22e>fill</span>(<span style=color:#e6db74>&#34;#313028&#34;</span>) <span style=color:#75715e>// 设置填充颜色
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        .<span style=color:#a6e22e>stroke</span>(<span style=color:#e6db74>&#34;#2e2018&#34;</span>) <span style=color:#75715e>// 设置边框颜色
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        .<span style=color:#a6e22e>strokeWidth</span>(<span style=color:#ae81ff>1</span>) <span style=color:#75715e>// 设置边框宽度
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        .<span style=color:#a6e22e>margin</span>({ <span style=color:#a6e22e>bottom</span><span style=color:#f92672>:</span> <span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cellWidth</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>3</span><span style=color:#e6db74>}</span><span style=color:#e6db74>lpx`</span>, <span style=color:#a6e22e>right</span><span style=color:#f92672>:</span> <span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cellWidth</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>6</span><span style=color:#e6db74>}</span><span style=color:#e6db74>lpx`</span> }) <span style=color:#75715e>// 设置下边距和右边距
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#75715e>// 右眼睛
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#a6e22e>Ellipse</span>()
</span></span><span style=display:flex><span>        .<span style=color:#a6e22e>width</span>(<span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cellWidth</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>9</span><span style=color:#e6db74>}</span><span style=color:#e6db74>lpx`</span>) <span style=color:#75715e>// 设置右眼睛的宽度
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        .<span style=color:#a6e22e>height</span>(<span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cellWidth</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>6</span><span style=color:#e6db74>}</span><span style=color:#e6db74>lpx`</span>) <span style=color:#75715e>// 设置右眼睛的高度
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        .<span style=color:#a6e22e>fillOpacity</span>(<span style=color:#ae81ff>1</span>) <span style=color:#75715e>// 设置填充不透明度
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        .<span style=color:#a6e22e>fill</span>(<span style=color:#e6db74>&#34;#313028&#34;</span>) <span style=color:#75715e>// 设置填充颜色
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        .<span style=color:#a6e22e>stroke</span>(<span style=color:#e6db74>&#34;#2e2018&#34;</span>) <span style=color:#75715e>// 设置边框颜色
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        .<span style=color:#a6e22e>strokeWidth</span>(<span style=color:#ae81ff>1</span>) <span style=color:#75715e>// 设置边框宽度
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        .<span style=color:#a6e22e>margin</span>({ <span style=color:#a6e22e>bottom</span><span style=color:#f92672>:</span> <span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cellWidth</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>3</span><span style=color:#e6db74>}</span><span style=color:#e6db74>lpx`</span>, <span style=color:#a6e22e>left</span><span style=color:#f92672>:</span> <span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cellWidth</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>6</span><span style=color:#e6db74>}</span><span style=color:#e6db74>lpx`</span> }) <span style=color:#75715e>// 设置下边距和左边距
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#75715e>// 左眼瞳
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#a6e22e>Ellipse</span>()
</span></span><span style=display:flex><span>        .<span style=color:#a6e22e>width</span>(<span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cellWidth</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>20</span><span style=color:#e6db74>}</span><span style=color:#e6db74>lpx`</span>) <span style=color:#75715e>// 设置左眼瞳的宽度
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        .<span style=color:#a6e22e>height</span>(<span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cellWidth</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>15</span><span style=color:#e6db74>}</span><span style=color:#e6db74>lpx`</span>) <span style=color:#75715e>// 设置左眼瞳的高度
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        .<span style=color:#a6e22e>fillOpacity</span>(<span style=color:#ae81ff>1</span>) <span style=color:#75715e>// 设置填充不透明度
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        .<span style=color:#a6e22e>fill</span>(<span style=color:#e6db74>&#34;#fefbfa&#34;</span>) <span style=color:#75715e>// 设置填充颜色
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        .<span style=color:#a6e22e>margin</span>({ <span style=color:#a6e22e>bottom</span><span style=color:#f92672>:</span> <span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cellWidth</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2.5</span><span style=color:#e6db74>}</span><span style=color:#e6db74>lpx`</span>, <span style=color:#a6e22e>right</span><span style=color:#f92672>:</span> <span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cellWidth</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>6</span><span style=color:#e6db74>}</span><span style=color:#e6db74>lpx`</span> }) <span style=color:#75715e>// 设置下边距和右边距
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#75715e>// 右眼瞳
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#a6e22e>Ellipse</span>()
</span></span><span style=display:flex><span>        .<span style=color:#a6e22e>width</span>(<span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cellWidth</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>20</span><span style=color:#e6db74>}</span><span style=color:#e6db74>lpx`</span>) <span style=color:#75715e>// 设置右眼瞳的宽度
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        .<span style=color:#a6e22e>height</span>(<span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cellWidth</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>15</span><span style=color:#e6db74>}</span><span style=color:#e6db74>lpx`</span>) <span style=color:#75715e>// 设置右眼瞳的高度
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        .<span style=color:#a6e22e>fillOpacity</span>(<span style=color:#ae81ff>1</span>) <span style=color:#75715e>// 设置填充不透明度
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        .<span style=color:#a6e22e>fill</span>(<span style=color:#e6db74>&#34;#fefbfa&#34;</span>) <span style=color:#75715e>// 设置填充颜色
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        .<span style=color:#a6e22e>margin</span>({ <span style=color:#a6e22e>bottom</span><span style=color:#f92672>:</span> <span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cellWidth</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2.5</span><span style=color:#e6db74>}</span><span style=color:#e6db74>lpx`</span>, <span style=color:#a6e22e>left</span><span style=color:#f92672>:</span> <span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cellWidth</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>6</span><span style=color:#e6db74>}</span><span style=color:#e6db74>lpx`</span> }) <span style=color:#75715e>// 设置下边距和左边距
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    }.<span style=color:#a6e22e>width</span>(<span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cellWidth</span><span style=color:#e6db74>}</span><span style=color:#e6db74>lpx`</span>).<span style=color:#a6e22e>height</span>(<span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cellWidth</span><span style=color:#e6db74>}</span><span style=color:#e6db74>lpx`</span>) <span style=color:#75715e>// 设置组件的宽度和高度
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 定义单元格类
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>ObservedV2</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Cell</span> {
</span></span><span style=display:flex><span>  <span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>Trace</span> <span style=color:#a6e22e>scaleOptions</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>ScaleOptions</span> <span style=color:#f92672>=</span> { <span style=color:#a6e22e>x</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1</span>, <span style=color:#a6e22e>y</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1</span> }; <span style=color:#75715e>// 定义缩放选项
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>Trace</span> <span style=color:#a6e22e>isSelected</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>boolean</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span> <span style=color:#75715e>// true表示显示地鼠，false表示隐藏地鼠
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>cellWidth</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>number</span> <span style=color:#75715e>// 单元格宽度
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>selectTime</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>number</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span> <span style=color:#75715e>// 选择时间
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>constructor</span>(<span style=color:#a6e22e>cellWidth</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>number</span>) { <span style=color:#75715e>// 构造函数
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cellWidth</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>cellWidth</span> <span style=color:#75715e>// 初始化单元格宽度
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>setSelectedTrueTime</span>() { <span style=color:#75715e>// 设置选择时间
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>selectTime</span> <span style=color:#f92672>=</span> Date.<span style=color:#a6e22e>now</span>() <span style=color:#75715e>// 记录当前时间
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>isSelected</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span> <span style=color:#75715e>// 设置为选中状态
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>checkTime</span>(<span style=color:#a6e22e>stayDuration</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>number</span>) { <span style=color:#75715e>// 检查停留时间
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>if</span> (<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>isSelected</span>) { <span style=color:#75715e>// 如果当前是选中状态
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#66d9ef>if</span> (Date.<span style=color:#a6e22e>now</span>() <span style=color:#f92672>-</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>selectTime</span> <span style=color:#f92672>&gt;=</span> <span style=color:#a6e22e>stayDuration</span>) { <span style=color:#75715e>// 如果停留时间超过设定值
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>selectTime</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span> <span style=color:#75715e>// 重置选择时间
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>isSelected</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span> <span style=color:#75715e>// 设置为未选中状态
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 定义文本计时器修饰符类
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MyTextTimerModifier</span> <span style=color:#66d9ef>implements</span> <span style=color:#a6e22e>ContentModifier</span><span style=color:#f92672>&lt;</span><span style=color:#a6e22e>TextTimerConfiguration</span><span style=color:#f92672>&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>constructor</span>() {}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>applyContent</span>()<span style=color:#f92672>:</span> <span style=color:#a6e22e>WrappedBuilder</span><span style=color:#f92672>&lt;</span>[<span style=color:#a6e22e>TextTimerConfiguration</span>]<span style=color:#f92672>&gt;</span> { <span style=color:#75715e>// 应用内容
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>wrapBuilder</span>(<span style=color:#a6e22e>buildTextTimer</span>) <span style=color:#75715e>// 返回构建文本计时器的函数
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 构建文本计时器的函数
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>Builder</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>buildTextTimer</span>(<span style=color:#a6e22e>config</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>TextTimerConfiguration</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>Column</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>Stack</span>({ <span style=color:#a6e22e>alignContent</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>Alignment</span>.<span style=color:#a6e22e>Center</span> }) { <span style=color:#75715e>// 创建一个堆叠布局，内容居中对齐
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#a6e22e>Circle</span>({ <span style=color:#a6e22e>width</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>150</span>, <span style=color:#a6e22e>height</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>150</span> }) <span style=color:#75715e>// 创建一个圆形
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        .<span style=color:#a6e22e>fill</span>(<span style=color:#a6e22e>config</span>.<span style=color:#a6e22e>started</span> <span style=color:#f92672>?</span> (<span style=color:#a6e22e>config</span>.<span style=color:#a6e22e>isCountDown</span> <span style=color:#f92672>?</span> <span style=color:#ae81ff>0xFF232323</span> <span style=color:#f92672>:</span> <span style=color:#ae81ff>0xFF717171</span>) <span style=color:#f92672>:</span> <span style=color:#ae81ff>0xFF929292</span>) <span style=color:#75715e>// 根据状态设置填充颜色
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#a6e22e>Column</span>() {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>Text</span>(<span style=color:#a6e22e>config</span>.<span style=color:#a6e22e>isCountDown</span> <span style=color:#f92672>?</span> <span style=color:#e6db74>&#34;倒计时&#34;</span> <span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;正计时&#34;</span>).<span style=color:#a6e22e>fontColor</span>(<span style=color:#a6e22e>Color</span>.<span style=color:#a6e22e>White</span>) <span style=color:#75715e>// 显示计时状态
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#a6e22e>Text</span>(
</span></span><span style=display:flex><span>          (<span style=color:#a6e22e>config</span>.<span style=color:#a6e22e>isCountDown</span> <span style=color:#f92672>?</span> <span style=color:#e6db74>&#34;剩余&#34;</span> <span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;已经过去了&#34;</span>) <span style=color:#f92672>+</span> (<span style=color:#a6e22e>config</span>.<span style=color:#a6e22e>isCountDown</span> <span style=color:#f92672>?</span>
</span></span><span style=display:flex><span>          (Math.<span style=color:#a6e22e>max</span>(<span style=color:#a6e22e>config</span>.<span style=color:#a6e22e>count</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>1000</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>config</span>.<span style=color:#a6e22e>elapsedTime</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>100</span>, <span style=color:#ae81ff>0</span>)).<span style=color:#a6e22e>toFixed</span>(<span style=color:#ae81ff>0</span>) <span style=color:#75715e>// 计算剩余时间
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#f92672>:</span> ((<span style=color:#a6e22e>config</span>.<span style=color:#a6e22e>elapsedTime</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>100</span>).<span style=color:#a6e22e>toFixed</span>(<span style=color:#ae81ff>0</span>)) <span style=color:#75715e>// 计算已过去时间
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>          ) <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;秒&#34;</span>
</span></span><span style=display:flex><span>        ).<span style=color:#a6e22e>fontColor</span>(<span style=color:#a6e22e>Color</span>.<span style=color:#a6e22e>White</span>) <span style=color:#75715e>// 显示时间
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 定义游戏主组件
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>Entry</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>Component</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>struct</span> <span style=color:#a6e22e>Index</span> {
</span></span><span style=display:flex><span>  <span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>State</span> <span style=color:#a6e22e>animationIntervalCount</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>number</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span> <span style=color:#75715e>// 动画间隔计数
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>State</span> <span style=color:#a6e22e>appearanceCount</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>number</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>4</span> <span style=color:#75715e>// 每次出现的地鼠数量
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>State</span> <span style=color:#a6e22e>animationInterval</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>number</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>1000</span> <span style=color:#75715e>// 地鼠出现的间隔时间
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>State</span> <span style=color:#a6e22e>hamsterStayDuration</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>number</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>1500</span> <span style=color:#75715e>// 地鼠停留时间
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>State</span> <span style=color:#a6e22e>gameDuration</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>number</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>30000</span> <span style=color:#75715e>// 游戏总时长
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>State</span> <span style=color:#a6e22e>randomPositionIndex</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>number</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span> <span style=color:#75715e>// 随机位置
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>State</span> <span style=color:#a6e22e>cells</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>Cell</span>[] <span style=color:#f92672>=</span> [] <span style=color:#75715e>// 存储地鼠单元格
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>State</span> <span style=color:#a6e22e>cellWidth</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>number</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>100</span> <span style=color:#75715e>// 单元格宽度
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>State</span> <span style=color:#a6e22e>currentScore</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>number</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span> <span style=color:#75715e>// 当前游戏得分
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>State</span> <span style=color:#a6e22e>timerModifier</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>MyTextTimerModifier</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>MyTextTimerModifier</span>() <span style=color:#75715e>// 计时器修饰符
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>countdownTimerController</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>TextTimerController</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>TextTimerController</span>() <span style=color:#75715e>// 倒计时控制器
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>timerController</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>TextTimerController</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>TextTimerController</span>() <span style=color:#75715e>// 正计时控制器
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>aboutToAppear</span>()<span style=color:#f92672>:</span> <span style=color:#66d9ef>void</span> {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 设置当前app以横屏方式显示
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    window.<span style=color:#a6e22e>getLastWindow</span>(<span style=color:#a6e22e>getContext</span>()).<span style=color:#a6e22e>then</span>((<span style=color:#a6e22e>windowClass</span>) =&gt; {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>windowClass</span>.<span style=color:#a6e22e>setPreferredOrientation</span>(window.<span style=color:#a6e22e>Orientation</span>.<span style=color:#a6e22e>LANDSCAPE</span>) <span style=color:#75715e>// 设置为横屏
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    })
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 显示10个地鼠坑位
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>10</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cells</span>.<span style=color:#a6e22e>push</span>(<span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Cell</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cellWidth</span>)) <span style=color:#75715e>// 初始化10个单元格
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>endGame</span>() { <span style=color:#75715e>// 结束游戏
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>animationIntervalCount</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span> <span style=color:#75715e>// 重置动画间隔计数
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>currentScore</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span> <span style=color:#75715e>// 重置得分
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cells</span>.<span style=color:#a6e22e>length</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cells</span>[<span style=color:#a6e22e>i</span>].<span style=color:#a6e22e>isSelected</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span> <span style=color:#75715e>// 隐藏所有地鼠
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>countdownTimerController</span>.<span style=color:#a6e22e>reset</span>() <span style=color:#75715e>// 重置倒计时
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>timerController</span>.<span style=color:#a6e22e>reset</span>() <span style=color:#75715e>// 重置正计时
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>startGame</span>() { <span style=color:#75715e>// 开始游戏
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>endGame</span>() <span style=color:#75715e>// 结束当前游戏，重置所有状态
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>countdownTimerController</span>.<span style=color:#a6e22e>start</span>() <span style=color:#75715e>// 启动倒计时控制器
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>timerController</span>.<span style=color:#a6e22e>start</span>() <span style=color:#75715e>// 启动正计时控制器
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>build</span>() { <span style=color:#75715e>// 构建游戏界面
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>Row</span>() { <span style=color:#75715e>// 创建一个水平布局
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#75715e>// 显示时间与得分
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#a6e22e>Column</span>({ <span style=color:#a6e22e>space</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>30</span> }) { <span style=color:#75715e>// 创建一个垂直布局，设置间距
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#75715e>// 总时长
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#a6e22e>Column</span>({ <span style=color:#a6e22e>space</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>5</span> }) { <span style=color:#75715e>// 创建一个垂直布局，设置间距
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>          <span style=color:#a6e22e>Text</span>(<span style=color:#e6db74>`倒计时长(秒)`</span>).<span style=color:#a6e22e>fontColor</span>(<span style=color:#a6e22e>Color</span>.<span style=color:#a6e22e>Black</span>) <span style=color:#75715e>// 显示倒计时长度的文本
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>          <span style=color:#a6e22e>Counter</span>() { <span style=color:#75715e>// 创建一个计数器组件
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#a6e22e>Text</span>(<span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>gameDuration</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>1000</span><span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>) <span style=color:#75715e>// 显示游戏总时长（秒）
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>              .<span style=color:#a6e22e>fontColor</span>(<span style=color:#a6e22e>Color</span>.<span style=color:#a6e22e>Black</span>) <span style=color:#75715e>// 设置字体颜色
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>          }
</span></span><span style=display:flex><span>          .<span style=color:#a6e22e>width</span>(<span style=color:#ae81ff>300</span>) <span style=color:#75715e>// 设置计数器宽度
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>          .<span style=color:#a6e22e>onInc</span>(() =&gt; { <span style=color:#75715e>// 增加按钮的点击事件
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>gameDuration</span> <span style=color:#f92672>+=</span> <span style=color:#ae81ff>1000</span>; <span style=color:#75715e>// 每次增加1秒
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>          }).<span style=color:#a6e22e>onDec</span>(() =&gt; { <span style=color:#75715e>// 减少按钮的点击事件
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>gameDuration</span> <span style=color:#f92672>-=</span> <span style=color:#ae81ff>1000</span>; <span style=color:#75715e>// 每次减少1秒
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>gameDuration</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>gameDuration</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>1000</span> <span style=color:#f92672>?</span> <span style=color:#ae81ff>1000</span> <span style=color:#f92672>:</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>gameDuration</span>; <span style=color:#75715e>// 确保最小值为1秒
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>          });
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 每次出现个数
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#a6e22e>Column</span>({ <span style=color:#a6e22e>space</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>5</span> }) { <span style=color:#75715e>// 创建一个垂直布局，设置间距
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>          <span style=color:#a6e22e>Text</span>(<span style=color:#e6db74>`每次出现(个)`</span>).<span style=color:#a6e22e>fontColor</span>(<span style=color:#a6e22e>Color</span>.<span style=color:#a6e22e>Black</span>) <span style=color:#75715e>// 显示每次出现的地鼠数量的文本
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>          <span style=color:#a6e22e>Counter</span>() { <span style=color:#75715e>// 创建一个计数器组件
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#a6e22e>Text</span>(<span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>appearanceCount</span><span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>) <span style=color:#75715e>// 显示每次出现的地鼠数量
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>              .<span style=color:#a6e22e>fontColor</span>(<span style=color:#a6e22e>Color</span>.<span style=color:#a6e22e>Black</span>) <span style=color:#75715e>// 设置字体颜色
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>          }
</span></span><span style=display:flex><span>          .<span style=color:#a6e22e>width</span>(<span style=color:#ae81ff>300</span>) <span style=color:#75715e>// 设置计数器宽度
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>          .<span style=color:#a6e22e>onInc</span>(() =&gt; { <span style=color:#75715e>// 增加按钮的点击事件
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>appearanceCount</span> <span style=color:#f92672>+=</span> <span style=color:#ae81ff>1</span>; <span style=color:#75715e>// 每次增加1个
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>          }).<span style=color:#a6e22e>onDec</span>(() =&gt; { <span style=color:#75715e>// 减少按钮的点击事件
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>appearanceCount</span> <span style=color:#f92672>-=</span> <span style=color:#ae81ff>1</span>; <span style=color:#75715e>// 每次减少1个
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>appearanceCount</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>appearanceCount</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>?</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>:</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>appearanceCount</span>; <span style=color:#75715e>// 确保最小值为1
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>          });
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 地鼠每隔多长时间显示
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#a6e22e>Column</span>({ <span style=color:#a6e22e>space</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>5</span> }) { <span style=color:#75715e>// 创建一个垂直布局，设置间距
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>          <span style=color:#a6e22e>Text</span>(<span style=color:#e6db74>`出现间隔(毫秒)`</span>).<span style=color:#a6e22e>fontColor</span>(<span style=color:#a6e22e>Color</span>.<span style=color:#a6e22e>Black</span>) <span style=color:#75715e>// 显示地鼠出现间隔的文本
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>          <span style=color:#a6e22e>Counter</span>() { <span style=color:#75715e>// 创建一个计数器组件
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#a6e22e>Text</span>(<span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>animationInterval</span><span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>) <span style=color:#75715e>// 显示地鼠出现的间隔时间
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>              .<span style=color:#a6e22e>fontColor</span>(<span style=color:#a6e22e>Color</span>.<span style=color:#a6e22e>Black</span>) <span style=color:#75715e>// 设置字体颜色
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>          }
</span></span><span style=display:flex><span>          .<span style=color:#a6e22e>width</span>(<span style=color:#ae81ff>300</span>) <span style=color:#75715e>// 设置计数器宽度
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>          .<span style=color:#a6e22e>onInc</span>(() =&gt; { <span style=color:#75715e>// 增加按钮的点击事件
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>animationInterval</span> <span style=color:#f92672>+=</span> <span style=color:#ae81ff>100</span>; <span style=color:#75715e>// 每次增加100毫秒
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>          }).<span style=color:#a6e22e>onDec</span>(() =&gt; { <span style=color:#75715e>// 减少按钮的点击事件
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>animationInterval</span> <span style=color:#f92672>-=</span> <span style=color:#ae81ff>100</span>; <span style=color:#75715e>// 每次减少100毫秒
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>animationInterval</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>animationInterval</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>100</span> <span style=color:#f92672>?</span> <span style=color:#ae81ff>100</span> <span style=color:#f92672>:</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>animationInterval</span>; <span style=color:#75715e>// 确保最小值为100毫秒
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>          });
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 地鼠停留时间
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#a6e22e>Column</span>({ <span style=color:#a6e22e>space</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>5</span> }) { <span style=color:#75715e>// 创建一个垂直布局，设置间距
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>          <span style=color:#a6e22e>Text</span>(<span style=color:#e6db74>`停留间隔(毫秒)`</span>).<span style=color:#a6e22e>fontColor</span>(<span style=color:#a6e22e>Color</span>.<span style=color:#a6e22e>Black</span>) <span style=color:#75715e>// 显示地鼠停留时间的文本
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>          <span style=color:#a6e22e>Counter</span>() { <span style=color:#75715e>// 创建一个计数器组件
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#a6e22e>Text</span>(<span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>hamsterStayDuration</span><span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>) <span style=color:#75715e>// 显示地鼠的停留时间
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>              .<span style=color:#a6e22e>fontColor</span>(<span style=color:#a6e22e>Color</span>.<span style=color:#a6e22e>Black</span>) <span style=color:#75715e>// 设置字体颜色
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>          }
</span></span><span style=display:flex><span>          .<span style=color:#a6e22e>width</span>(<span style=color:#ae81ff>300</span>) <span style=color:#75715e>// 设置计数器宽度
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>          .<span style=color:#a6e22e>onInc</span>(() =&gt; { <span style=color:#75715e>// 增加按钮的点击事件
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>hamsterStayDuration</span> <span style=color:#f92672>+=</span> <span style=color:#ae81ff>100</span>; <span style=color:#75715e>// 每次增加100毫秒
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>          }).<span style=color:#a6e22e>onDec</span>(() =&gt; { <span style=color:#75715e>// 减少按钮的点击事件
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>hamsterStayDuration</span> <span style=color:#f92672>-=</span> <span style=color:#ae81ff>100</span>; <span style=color:#75715e>// 每次减少100毫秒
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>hamsterStayDuration</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>hamsterStayDuration</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>100</span> <span style=color:#f92672>?</span> <span style=color:#ae81ff>100</span> <span style=color:#f92672>:</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>hamsterStayDuration</span>; <span style=color:#75715e>// 确保最小值为100毫秒
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>          });
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>      }.<span style=color:#a6e22e>layoutWeight</span>(<span style=color:#ae81ff>1</span>).<span style=color:#a6e22e>padding</span>({ <span style=color:#a6e22e>left</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>50</span> }) <span style=color:#75715e>// 设置布局权重和左边距
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>      <span style=color:#75715e>// 游戏区
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#a6e22e>Flex</span>({ <span style=color:#a6e22e>wrap</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>FlexWrap</span>.<span style=color:#a6e22e>Wrap</span> }) { <span style=color:#75715e>// 创建一个可换行的弹性布局
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#a6e22e>ForEach</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cells</span>, (<span style=color:#a6e22e>cell</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>Cell</span>, <span style=color:#a6e22e>index</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>number</span>) =&gt; { <span style=color:#75715e>// 遍历所有单元格
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>          <span style=color:#a6e22e>Stack</span>() { <span style=color:#75715e>// 创建一个堆叠布局
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#75715e>// 洞
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#a6e22e>Ellipse</span>()
</span></span><span style=display:flex><span>              .<span style=color:#a6e22e>width</span>(<span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cellWidth</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>1.2</span><span style=color:#e6db74>}</span><span style=color:#e6db74>lpx`</span>) <span style=color:#75715e>// 设置洞的宽度
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>              .<span style=color:#a6e22e>height</span>(<span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cellWidth</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2.2</span><span style=color:#e6db74>}</span><span style=color:#e6db74>lpx`</span>) <span style=color:#75715e>// 设置洞的高度
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>              .<span style=color:#a6e22e>fillOpacity</span>(<span style=color:#ae81ff>1</span>) <span style=color:#75715e>// 设置填充不透明度
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>              .<span style=color:#a6e22e>fill</span>(<span style=color:#e6db74>&#34;#020101&#34;</span>) <span style=color:#75715e>// 设置填充颜色
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>              .<span style=color:#a6e22e>stroke</span>(<span style=color:#e6db74>&#34;#020101&#34;</span>) <span style=color:#75715e>// 设置边框颜色
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>              .<span style=color:#a6e22e>strokeWidth</span>(<span style=color:#ae81ff>1</span>) <span style=color:#75715e>// 设置边框宽度
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>              .<span style=color:#a6e22e>margin</span>({ <span style=color:#a6e22e>top</span><span style=color:#f92672>:</span> <span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cellWidth</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span><span style=color:#e6db74>}</span><span style=color:#e6db74>lpx`</span> }) <span style=color:#75715e>// 设置上边距
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#75715e>// 地鼠
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#a6e22e>Hamster</span>({ <span style=color:#a6e22e>cellWidth</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cellWidth</span> }) <span style=color:#75715e>// 创建地鼠组件
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>              .<span style=color:#a6e22e>visibility</span>(<span style=color:#a6e22e>cell</span>.<span style=color:#a6e22e>isSelected</span> <span style=color:#f92672>?</span> <span style=color:#a6e22e>Visibility</span>.<span style=color:#a6e22e>Visible</span> <span style=color:#f92672>:</span> <span style=color:#a6e22e>Visibility</span>.<span style=color:#a6e22e>None</span>) <span style=color:#75715e>// 根据状态设置可见性
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>              .<span style=color:#a6e22e>scale</span>(<span style=color:#a6e22e>cell</span>.<span style=color:#a6e22e>scaleOptions</span>) <span style=color:#75715e>// 设置缩放选项
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>          }.<span style=color:#a6e22e>width</span>(<span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cellWidth</span><span style=color:#e6db74>}</span><span style=color:#e6db74>lpx`</span>).<span style=color:#a6e22e>height</span>(<span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cellWidth</span><span style=color:#e6db74>}</span><span style=color:#e6db74>lpx`</span>) <span style=color:#75715e>// 设置堆叠布局的宽度和高度
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>          .<span style=color:#a6e22e>margin</span>({ <span style=color:#a6e22e>left</span><span style=color:#f92672>:</span> <span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>index</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>||</span> <span style=color:#a6e22e>index</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>7</span> <span style=color:#f92672>?</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cellWidth</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>:</span> <span style=color:#ae81ff>0</span><span style=color:#e6db74>}</span><span style=color:#e6db74>lpx`</span> }) <span style=color:#75715e>// 设置左边距
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>          .<span style=color:#a6e22e>onClick</span>(() =&gt; { <span style=color:#75715e>// 点击事件
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>cell</span>.<span style=color:#a6e22e>isSelected</span>) { <span style=color:#75715e>// 如果当前单元格是选中状态
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>              <span style=color:#a6e22e>animateToImmediately</span>({ <span style=color:#75715e>// 执行动画
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                <span style=color:#a6e22e>duration</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>200</span>, <span style=color:#75715e>// 动画持续时间
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                <span style=color:#a6e22e>curve</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>curves</span>.<span style=color:#a6e22e>springCurve</span>(<span style=color:#ae81ff>10</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>228</span>, <span style=color:#ae81ff>30</span>), <span style=color:#75715e>// 动画曲线
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                <span style=color:#a6e22e>onFinish</span><span style=color:#f92672>:</span> () =&gt; { <span style=color:#75715e>// 动画结束后的回调
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                  <span style=color:#a6e22e>cell</span>.<span style=color:#a6e22e>isSelected</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span> <span style=color:#75715e>// 隐藏地鼠
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                  <span style=color:#a6e22e>cell</span>.<span style=color:#a6e22e>scaleOptions</span> <span style=color:#f92672>=</span> { <span style=color:#a6e22e>x</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1.0</span>, <span style=color:#a6e22e>y</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>1.0</span> }; <span style=color:#75715e>// 重置缩放
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                  <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>currentScore</span> <span style=color:#f92672>+=</span> <span style=color:#ae81ff>1</span> <span style=color:#75715e>// 增加得分
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                }
</span></span><span style=display:flex><span>              }, () =&gt; {
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>cell</span>.<span style=color:#a6e22e>scaleOptions</span> <span style=color:#f92672>=</span> { <span style=color:#a6e22e>x</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>y</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>0</span> }; <span style=color:#75715e>// 动画开始时缩放到0
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>              })
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>          })
</span></span><span style=display:flex><span>        })
</span></span><span style=display:flex><span>      }.<span style=color:#a6e22e>width</span>(<span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cellWidth</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>4</span><span style=color:#e6db74>}</span><span style=color:#e6db74>lpx`</span>) <span style=color:#75715e>// 设置游戏区的宽度
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>      <span style=color:#75715e>// 操作按钮
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#a6e22e>Column</span>({ <span style=color:#a6e22e>space</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>20</span> }) { <span style=color:#75715e>// 创建一个垂直布局，设置间距
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#75715e>// 倒计时
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#a6e22e>TextTimer</span>({ <span style=color:#a6e22e>isCountDown</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>, <span style=color:#a6e22e>count</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>gameDuration</span>, <span style=color:#a6e22e>controller</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>countdownTimerController</span> }) <span style=color:#75715e>// 创建倒计时组件
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>          .<span style=color:#a6e22e>contentModifier</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>timerModifier</span>) <span style=color:#75715e>// 应用计时器修饰符
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>          .<span style=color:#a6e22e>onTimer</span>((<span style=color:#a6e22e>utc</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>number</span>, <span style=color:#a6e22e>elapsedTime</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>number</span>) =&gt; { <span style=color:#75715e>// 定义计时器的回调
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#75715e>// 每隔指定时间随机显示地鼠
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>elapsedTime</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>10</span> <span style=color:#f92672>&gt;=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>animationInterval</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>animationIntervalCount</span>) { <span style=color:#75715e>// 判断是否达到显示地鼠的时间
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>              <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>animationIntervalCount</span><span style=color:#f92672>++</span> <span style=color:#75715e>// 增加动画间隔计数
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>              <span style=color:#75715e>// 获取可以出现的位置集合
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>              <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>availableIndexList</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>number</span>[] <span style=color:#f92672>=</span> [] <span style=color:#75715e>// 存储可用的索引
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>              <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cells</span>.<span style=color:#a6e22e>length</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) { <span style=color:#75715e>// 遍历所有单元格
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cells</span>[<span style=color:#a6e22e>i</span>].<span style=color:#a6e22e>isSelected</span>) { <span style=color:#75715e>// 如果当前单元格未被选中
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                  <span style=color:#a6e22e>availableIndexList</span>.<span style=color:#a6e22e>push</span>(<span style=color:#a6e22e>i</span>) <span style=color:#75715e>// 添加到可用索引列表
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                }
</span></span><span style=display:flex><span>              }
</span></span><span style=display:flex><span>              <span style=color:#75715e>// 根据每次出现次数 appearanceCount 利用洗牌算法随机抽取
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>              <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>availableIndexList</span>.<span style=color:#a6e22e>length</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) { <span style=color:#75715e>// 遍历可用索引列表
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>index</span> <span style=color:#f92672>=</span> Math.<span style=color:#a6e22e>floor</span>(Math.<span style=color:#a6e22e>random</span>() <span style=color:#f92672>*</span> (<span style=color:#a6e22e>availableIndexList</span>.<span style=color:#a6e22e>length</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>i</span>)) <span style=color:#75715e>// 随机选择一个索引
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>temp</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>availableIndexList</span>[<span style=color:#a6e22e>availableIndexList</span>.<span style=color:#a6e22e>length</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>] <span style=color:#75715e>// 交换位置
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                <span style=color:#a6e22e>availableIndexList</span>[<span style=color:#a6e22e>availableIndexList</span>.<span style=color:#a6e22e>length</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>availableIndexList</span>[<span style=color:#a6e22e>index</span>]
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>availableIndexList</span>[<span style=color:#a6e22e>index</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>temp</span>
</span></span><span style=display:flex><span>              }
</span></span><span style=display:flex><span>              <span style=color:#75715e>// 随机抽取 appearanceCount，取前几个已经打乱好的顺序
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>              <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>availableIndexList</span>.<span style=color:#a6e22e>length</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) { <span style=color:#75715e>// 遍历可用索引列表
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>appearanceCount</span>) { <span style=color:#75715e>// 如果索引小于每次出现的数量
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                  <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cells</span>[<span style=color:#a6e22e>availableIndexList</span>[<span style=color:#a6e22e>i</span>]].<span style=color:#a6e22e>setSelectedTrueTime</span>() <span style=color:#75715e>// 设置选中的单元格为显示状态
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                }
</span></span><span style=display:flex><span>              }
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>elapsedTime</span> <span style=color:#f92672>%</span> <span style=color:#ae81ff>10</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span>) { <span style=color:#75715e>// 每隔100毫秒检查一次
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>              <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>info</span>(<span style=color:#e6db74>&#39;检查停留时间是否已过，如果过了就隐藏地鼠&#39;</span>) <span style=color:#75715e>// 输出调试信息
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>              <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cells</span>.<span style=color:#a6e22e>length</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) { <span style=color:#75715e>// 遍历所有单元格
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cells</span>[<span style=color:#a6e22e>i</span>].<span style=color:#a6e22e>checkTime</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>hamsterStayDuration</span>) <span style=color:#75715e>// 检查每个单元格的停留时间
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>              }
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>elapsedTime</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>10</span> <span style=color:#f92672>&gt;=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>gameDuration</span>) { <span style=color:#75715e>// 如果计时结束
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>              <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>currentScore</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>currentScore</span> <span style=color:#75715e>// 获取当前得分
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>              <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>getUIContext</span>().<span style=color:#a6e22e>showAlertDialog</span>({ <span style=color:#75715e>// 显示结果对话框
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                <span style=color:#75715e>// 显示结果页
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;游戏结束&#39;</span>, <span style=color:#75715e>// 对话框标题
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                <span style=color:#a6e22e>message</span><span style=color:#f92672>:</span> <span style=color:#e6db74>`得分：</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>currentScore</span><span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>, <span style=color:#75715e>// 显示得分信息
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                <span style=color:#a6e22e>confirm</span><span style=color:#f92672>:</span> { <span style=color:#75715e>// 确认按钮配置
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                  <span style=color:#a6e22e>defaultFocus</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>, <span style=color:#75715e>// 默认焦点
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                  <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;我知道了&#39;</span>, <span style=color:#75715e>// 按钮文本
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                  <span style=color:#a6e22e>action</span><span style=color:#f92672>:</span> () =&gt; { <span style=color:#75715e>// 点击后的动作
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                    <span style=color:#75715e>// 这里可以添加点击确认后的逻辑
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                  }
</span></span><span style=display:flex><span>                },
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>onWillDismiss</span><span style=color:#f92672>:</span> () =&gt; { <span style=color:#75715e>// 关闭前的动作
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                  <span style=color:#75715e>// 这里可以添加关闭前的逻辑
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                },
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>alignment</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>DialogAlignment</span>.<span style=color:#a6e22e>Center</span>, <span style=color:#75715e>// 对齐方式为中心
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>              });
</span></span><span style=display:flex><span>              <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>endGame</span>() <span style=color:#75715e>// 结束游戏
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            }
</span></span><span style=display:flex><span>          })
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>Text</span>(<span style=color:#e6db74>`当前得分：</span><span style=color:#e6db74>${</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>currentScore</span><span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>) <span style=color:#75715e>// 显示当前得分
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#a6e22e>Button</span>(<span style=color:#e6db74>&#39;开始游戏&#39;</span>).<span style=color:#a6e22e>clickEffect</span>({ <span style=color:#a6e22e>level</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>ClickEffectLevel</span>.<span style=color:#a6e22e>LIGHT</span> }).<span style=color:#a6e22e>onClick</span>(() =&gt; { <span style=color:#75715e>// 创建开始游戏按钮
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>          <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>startGame</span>() <span style=color:#75715e>// 点击后开始游戏
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        })
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>Button</span>(<span style=color:#e6db74>&#39;结束游戏&#39;</span>).<span style=color:#a6e22e>clickEffect</span>({ <span style=color:#a6e22e>level</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>ClickEffectLevel</span>.<span style=color:#a6e22e>LIGHT</span> }).<span style=color:#a6e22e>onClick</span>(() =&gt; { <span style=color:#75715e>// 创建结束游戏按钮
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>          <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>endGame</span>() <span style=color:#75715e>// 点击后结束游戏
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        })
</span></span><span style=display:flex><span>      }.<span style=color:#a6e22e>layoutWeight</span>(<span style=color:#ae81ff>1</span>) <span style=color:#75715e>// 设置布局权重
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    }
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>height</span>(<span style=color:#e6db74>&#39;100%&#39;</span>) <span style=color:#75715e>// 设置整体高度为100%
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    .<span style=color:#a6e22e>width</span>(<span style=color:#e6db74>&#39;100%&#39;</span>) <span style=color:#75715e>// 设置整体宽度为100%
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    .<span style=color:#a6e22e>backgroundColor</span>(<span style=color:#e6db74>&#34;#61ac57&#34;</span>) <span style=color:#75715e>// 设置背景颜色
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    .<span style=color:#a6e22e>justifyContent</span>(<span style=color:#a6e22e>FlexAlign</span>.<span style=color:#a6e22e>SpaceBetween</span>) <span style=color:#75715e>// 设置内容对齐方式
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h1 id=24>24<a hidden class=anchor aria-hidden=true href=#24>#</a></h1><p>巧算24点是一个经典的数学游戏，其规则简单而富有挑战性：玩家需利用给定的四个数字，通过加、减、乘、除运算，使得计算结果等于24。</p><h2 id=heading><a hidden class=anchor aria-hidden=true href=#heading>#</a></h2><h2 id=代码-2>代码<a hidden class=anchor aria-hidden=true href=#代码-2>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>promptAction</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;@kit.ArkUI&#39;</span> <span style=color:#75715e>// 导入用于提示用户的工具包
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>ObservedV2</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 装饰器，使类成为可观察对象
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Cell</span> { <span style=color:#75715e>// 定义一个Cell类，代表游戏中的一个单元格
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>Trace</span> <span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>number</span> <span style=color:#75715e>// 使用装饰器标记value属性，使其成为追踪属性
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>Trace</span> <span style=color:#a6e22e>displayValue</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>string</span> <span style=color:#75715e>// 同上，用于显示的值
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>Trace</span> <span style=color:#a6e22e>isVisible</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>boolean</span> <span style=color:#75715e>// 同上，判断是否可见
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>Trace</span> <span style=color:#a6e22e>xPosition</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>number</span> <span style=color:#75715e>// 同上，x坐标位置
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>Trace</span> <span style=color:#a6e22e>yPosition</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>number</span> <span style=color:#75715e>// 同上，y坐标位置
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>columnIndex</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>number</span> <span style=color:#75715e>// 列索引
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>rowIndex</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>number</span> <span style=color:#75715e>// 行索引
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>constructor</span>(<span style=color:#a6e22e>rowIndex</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>number</span>, <span style=color:#a6e22e>columnIndex</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>number</span>) { <span style=color:#75715e>// 构造函数
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>rowIndex</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>rowIndex</span> <span style=color:#75715e>// 设置行索引
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>columnIndex</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>columnIndex</span> <span style=color:#75715e>// 设置列索引
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>xPosition</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span> <span style=color:#75715e>// 初始化x坐标位置
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>yPosition</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span> <span style=color:#75715e>// 初始化y坐标位置
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span> <span style=color:#75715e>// 初始化数值
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>displayValue</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;&#39;</span> <span style=color:#75715e>// 初始化显示值
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>isVisible</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span> <span style=color:#75715e>// 初始化可见性
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>setDefaultValue</span>(<span style=color:#a6e22e>value</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>number</span>) { <span style=color:#75715e>// 设置单元格的默认值
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>value</span> <span style=color:#75715e>// 设置数值
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>displayValue</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>value</span><span style=color:#e6db74>}</span><span style=color:#e6db74>`</span> <span style=color:#75715e>// 设置显示值
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>isVisible</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span> <span style=color:#75715e>// 设置为可见
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>performOperation</span>(<span style=color:#a6e22e>otherCell</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>Cell</span>, <span style=color:#a6e22e>operationName</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>string</span>) { <span style=color:#75715e>// 执行与其他单元格的操作
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>switch</span> (<span style=color:#a6e22e>operationName</span>) { <span style=color:#75715e>// 根据操作名称进行不同的运算
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#34;加&#34;</span><span style=color:#f92672>:</span> <span style=color:#75715e>// 如果是加法
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>otherCell</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>+</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>value</span> <span style=color:#75715e>// 计算新值
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>break</span> <span style=color:#75715e>// 结束case块
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#34;减&#34;</span><span style=color:#f92672>:</span> <span style=color:#75715e>// 如果是减法
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>otherCell</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>-</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>value</span> <span style=color:#75715e>// 计算新值
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>break</span> <span style=color:#75715e>// 结束case块
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#34;乘&#34;</span><span style=color:#f92672>:</span> <span style=color:#75715e>// 如果是乘法
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>otherCell</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>value</span> <span style=color:#75715e>// 计算新值
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>break</span> <span style=color:#75715e>// 结束case块
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#34;除&#34;</span><span style=color:#f92672>:</span> <span style=color:#75715e>// 如果是除法
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>if</span> (<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>===</span> <span style=color:#ae81ff>0</span>) { <span style=color:#75715e>// 检查除数是否为0
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>          <span style=color:#a6e22e>promptAction</span>.<span style=color:#a6e22e>showToast</span>({ <span style=color:#a6e22e>message</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;除数不能为0&#39;</span>, <span style=color:#a6e22e>bottom</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>400</span> }) <span style=color:#75715e>// 提示错误信息
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>          <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>false</span> <span style=color:#75715e>// 返回false，表示操作无效
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>otherCell</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>/</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>value</span> <span style=color:#75715e>// 计算新值
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>break</span> <span style=color:#75715e>// 结束case块
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    }
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>otherCell</span>.<span style=color:#a6e22e>isVisible</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span> <span style=color:#75715e>// 隐藏参与运算的另一个单元格
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>displayValue</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>&gt;=</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>?</span> <span style=color:#e6db74>&#39;&#39;</span> <span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;-&#39;</span><span style=color:#e6db74>}${</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>convertToFraction</span>(Math.<span style=color:#a6e22e>abs</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>value</span>))<span style=color:#e6db74>}</span><span style=color:#e6db74>`</span> <span style=color:#75715e>// 更新显示值
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>true</span> <span style=color:#75715e>// 返回true，表示操作成功
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>findGreatestCommonDivisor</span>(<span style=color:#a6e22e>a</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>number</span>, <span style=color:#a6e22e>b</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>number</span>)<span style=color:#f92672>:</span> <span style=color:#a6e22e>number</span> { <span style=color:#75715e>// 计算两个数的最大公约数
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>b</span> <span style=color:#f92672>===</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>?</span> <span style=color:#a6e22e>a</span> <span style=color:#f92672>:</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>findGreatestCommonDivisor</span>(<span style=color:#a6e22e>b</span>, <span style=color:#a6e22e>a</span> <span style=color:#f92672>%</span> <span style=color:#a6e22e>b</span>) <span style=color:#75715e>// 使用递归算法求最大公约数
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>convertToFraction</span>(<span style=color:#a6e22e>decimal</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>number</span>)<span style=color:#f92672>:</span> <span style=color:#a6e22e>string</span> { <span style=color:#75715e>// 将小数转换为分数形式
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>tolerance</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>1.0</span><span style=color:#a6e22e>E</span><span style=color:#f92672>-</span><span style=color:#ae81ff>6</span> <span style=color:#75715e>// 设置容差值
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>maxIterations</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>1000</span> <span style=color:#75715e>// 设置最大迭代次数
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>pNumerator</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span> <span style=color:#75715e>// 分子初始化
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>pDenominator</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span> <span style=color:#75715e>// 分母初始化
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>qNumerator</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span> <span style=color:#75715e>// 辅助变量
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>qDenominator</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span> <span style=color:#75715e>// 辅助变量
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>currentDecimal</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>decimal</span> <span style=color:#75715e>// 当前处理的小数
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>iterationCount</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span> <span style=color:#75715e>// 迭代计数
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>do</span> { <span style=color:#75715e>// 执行直到满足条件
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>integerPart</span> <span style=color:#f92672>=</span> Math.<span style=color:#a6e22e>floor</span>(<span style=color:#a6e22e>currentDecimal</span>) <span style=color:#75715e>// 取整部分
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>temp</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>pNumerator</span> <span style=color:#75715e>// 临时保存分子
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#a6e22e>pNumerator</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>integerPart</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>pNumerator</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>pDenominator</span> <span style=color:#75715e>// 更新分子
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#a6e22e>pDenominator</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>temp</span> <span style=color:#75715e>// 更新分母
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#a6e22e>temp</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>qNumerator</span> <span style=color:#75715e>// 临时保存辅助变量
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#a6e22e>qNumerator</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>integerPart</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>qNumerator</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>qDenominator</span> <span style=color:#75715e>// 更新辅助变量
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#a6e22e>qDenominator</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>temp</span> <span style=color:#75715e>// 更新辅助变量
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#a6e22e>currentDecimal</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>/</span> (<span style=color:#a6e22e>currentDecimal</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>integerPart</span>) <span style=color:#75715e>// 更新小数部分
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#a6e22e>iterationCount</span><span style=color:#f92672>++</span> <span style=color:#75715e>// 增加迭代计数
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    } <span style=color:#66d9ef>while</span> (Math.<span style=color:#a6e22e>abs</span>(<span style=color:#a6e22e>decimal</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>pNumerator</span> <span style=color:#f92672>/</span> <span style=color:#a6e22e>qNumerator</span>) <span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>decimal</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>tolerance</span> <span style=color:#f92672>&amp;&amp;</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>iterationCount</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>maxIterations</span>) <span style=color:#75715e>// 继续迭代直到达到容差或最大迭代次数
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>iterationCount</span> <span style=color:#f92672>&gt;=</span> <span style=color:#a6e22e>maxIterations</span>) { <span style=color:#75715e>// 如果达到最大迭代次数
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#66d9ef>return</span> <span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>decimal</span><span style=color:#e6db74>}</span><span style=color:#e6db74>`</span> <span style=color:#75715e>// 返回原小数
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>gcdValue</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>calculateIterativeGcd</span>(<span style=color:#a6e22e>pNumerator</span>, <span style=color:#a6e22e>qNumerator</span>) <span style=color:#75715e>// 计算分子和分母的最大公约数
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>reducedNumerator</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>pNumerator</span> <span style=color:#f92672>/</span> <span style=color:#a6e22e>gcdValue</span> <span style=color:#75715e>// 化简后的分子
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>reducedDenominator</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>qNumerator</span> <span style=color:#f92672>/</span> <span style=color:#a6e22e>gcdValue</span> <span style=color:#75715e>// 化简后的分母
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>return</span> <span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>reducedNumerator</span><span style=color:#e6db74>}${</span><span style=color:#a6e22e>reducedDenominator</span> <span style=color:#f92672>!==</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>?</span> <span style=color:#e6db74>&#39;/&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>reducedDenominator</span> <span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;&#39;</span><span style=color:#e6db74>}</span><span style=color:#e6db74>`</span> <span style=color:#75715e>// 返回化简后的分数形式
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>calculateIterativeGcd</span>(<span style=color:#a6e22e>a</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>number</span>, <span style=color:#a6e22e>b</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>number</span>)<span style=color:#f92672>:</span> <span style=color:#a6e22e>number</span> { <span style=color:#75715e>// 使用迭代方式计算两个数的最大公约数
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>while</span> (<span style=color:#a6e22e>b</span> <span style=color:#f92672>!==</span> <span style=color:#ae81ff>0</span>) { <span style=color:#75715e>// 当b不为0时继续
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>temp</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>b</span> <span style=color:#75715e>// 临时保存b
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#a6e22e>b</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>a</span> <span style=color:#f92672>%</span> <span style=color:#a6e22e>b</span> <span style=color:#75715e>// 更新b
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#a6e22e>a</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>temp</span> <span style=color:#75715e>// 更新a
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>a</span> <span style=color:#75715e>// 返回最大公约数
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>JudgePointSolution</span> { <span style=color:#75715e>// 定义JudgePointSolution类，用于寻找24点游戏的解
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>solutions</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>string</span>[] <span style=color:#f92672>=</span> [] <span style=color:#75715e>// 存储找到的解
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>accuracyThreshold</span> <span style=color:#f92672>=</span> Math.<span style=color:#a6e22e>pow</span>(<span style=color:#ae81ff>10</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>6</span>) <span style=color:#75715e>// 设置精度阈值
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>operations</span> <span style=color:#f92672>=</span> [<span style=color:#75715e>// 定义四种基本运算
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    (<span style=color:#a6e22e>a</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>number</span>, <span style=color:#a6e22e>b</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>number</span>) =&gt; <span style=color:#a6e22e>a</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>b</span>, <span style=color:#75715e>// 加法
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    (<span style=color:#a6e22e>a</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>number</span>, <span style=color:#a6e22e>b</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>number</span>) =&gt; <span style=color:#a6e22e>a</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>b</span>, <span style=color:#75715e>// 乘法
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    (<span style=color:#a6e22e>a</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>number</span>, <span style=color:#a6e22e>b</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>number</span>) =&gt; <span style=color:#a6e22e>a</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>b</span>, <span style=color:#75715e>// 减法
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    (<span style=color:#a6e22e>a</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>number</span>, <span style=color:#a6e22e>b</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>number</span>) =&gt; <span style=color:#a6e22e>a</span> <span style=color:#f92672>/</span> <span style=color:#a6e22e>b</span>,<span style=color:#75715e>// 除法
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  ]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>searchSolutions</span>(<span style=color:#a6e22e>currentNumbers</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>number</span>[], <span style=color:#a6e22e>pathExpression</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>string</span>) { <span style=color:#75715e>// 查找解的递归方法
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>if</span> (<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>solutions</span>.<span style=color:#a6e22e>length</span> <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0</span>) { <span style=color:#75715e>// 如果已经找到解，则返回
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>currentNumbers</span>.<span style=color:#a6e22e>length</span> <span style=color:#f92672>===</span> <span style=color:#ae81ff>1</span>) { <span style=color:#75715e>// 如果只剩下一个数
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#66d9ef>if</span> (Math.<span style=color:#a6e22e>abs</span>(<span style=color:#a6e22e>currentNumbers</span>[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>-</span> <span style=color:#ae81ff>24</span>) <span style=color:#f92672>&lt;</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>accuracyThreshold</span>) { <span style=color:#75715e>// 如果该数等于24（在阈值范围内）
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>solutions</span>.<span style=color:#a6e22e>push</span>(<span style=color:#a6e22e>pathExpression</span>) <span style=color:#75715e>// 将路径表达式作为解加入数组
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      }
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span> <span style=color:#75715e>// 结束递归
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>currentNumbers</span>.<span style=color:#a6e22e>length</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) { <span style=color:#75715e>// 对所有数进行两两组合
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>j</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>; <span style=color:#a6e22e>j</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>currentNumbers</span>.<span style=color:#a6e22e>length</span>; <span style=color:#a6e22e>j</span><span style=color:#f92672>++</span>) { <span style=color:#75715e>// 对所有数进行两两组合
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>tempNumbers</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>removeNumberFromArray</span>(<span style=color:#a6e22e>currentNumbers</span>, <span style=color:#a6e22e>i</span>, <span style=color:#a6e22e>j</span>) <span style=color:#75715e>// 创建新的数组，移除当前两个数
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>k</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>k</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>4</span>; <span style=color:#a6e22e>k</span><span style=color:#f92672>++</span>) { <span style=color:#75715e>// 对四种运算分别尝试
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>          <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>tempPath</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>pathExpression</span>.<span style=color:#a6e22e>length</span> <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>?</span> <span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>pathExpression</span><span style=color:#e6db74>}</span><span style=color:#e6db74>, `</span> <span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;&#39;</span> <span style=color:#75715e>// 格式化路径表达式
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>          <span style=color:#a6e22e>tempPath</span> <span style=color:#f92672>+=</span> <span style=color:#e6db74>`(</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>currentNumbers</span>[<span style=color:#a6e22e>i</span>]<span style=color:#e6db74>}</span><span style=color:#e6db74> </span><span style=color:#e6db74>${</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>getOperationSymbol</span>(<span style=color:#a6e22e>k</span>)<span style=color:#e6db74>}</span><span style=color:#e6db74> </span><span style=color:#e6db74>${</span><span style=color:#a6e22e>currentNumbers</span>[<span style=color:#a6e22e>j</span>]<span style=color:#e6db74>}</span><span style=color:#e6db74>)`</span> <span style=color:#75715e>// 添加当前运算表达式到路径
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>          <span style=color:#a6e22e>tempNumbers</span>.<span style=color:#a6e22e>push</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>operations</span>[<span style=color:#a6e22e>k</span>](<span style=color:#a6e22e>currentNumbers</span>[<span style=color:#a6e22e>i</span>], <span style=color:#a6e22e>currentNumbers</span>[<span style=color:#a6e22e>j</span>])) <span style=color:#75715e>// 计算结果并加入临时数组
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>          <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>searchSolutions</span>(<span style=color:#a6e22e>tempNumbers</span>, <span style=color:#a6e22e>tempPath</span>) <span style=color:#75715e>// 递归查找解
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>          <span style=color:#a6e22e>tempNumbers</span>.<span style=color:#a6e22e>pop</span>() <span style=color:#75715e>// 移除最后一个加入的结果
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>          <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>k</span> <span style=color:#f92672>===</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>||</span> <span style=color:#a6e22e>k</span> <span style=color:#f92672>===</span> <span style=color:#ae81ff>3</span>) { <span style=color:#75715e>// 如果是减法或除法
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>tempPathSwapped</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>pathExpression</span>.<span style=color:#a6e22e>length</span> <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>?</span> <span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>pathExpression</span><span style=color:#e6db74>}</span><span style=color:#e6db74>, `</span> <span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;&#39;</span> <span style=color:#75715e>// 格式化路径表达式
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#a6e22e>tempPathSwapped</span> <span style=color:#f92672>+=</span> <span style=color:#e6db74>`(</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>currentNumbers</span>[<span style=color:#a6e22e>j</span>]<span style=color:#e6db74>}</span><span style=color:#e6db74> </span><span style=color:#e6db74>${</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>getOperationSymbol</span>(<span style=color:#a6e22e>k</span>)<span style=color:#e6db74>}</span><span style=color:#e6db74> </span><span style=color:#e6db74>${</span><span style=color:#a6e22e>currentNumbers</span>[<span style=color:#a6e22e>i</span>]<span style=color:#e6db74>}</span><span style=color:#e6db74>)`</span> <span style=color:#75715e>// 添加当前运算表达式到路径
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#a6e22e>tempNumbers</span>.<span style=color:#a6e22e>push</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>operations</span>[<span style=color:#a6e22e>k</span>](<span style=color:#a6e22e>currentNumbers</span>[<span style=color:#a6e22e>j</span>], <span style=color:#a6e22e>currentNumbers</span>[<span style=color:#a6e22e>i</span>])) <span style=color:#75715e>// 计算结果并加入临时数组
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>searchSolutions</span>(<span style=color:#a6e22e>tempNumbers</span>, <span style=color:#a6e22e>tempPathSwapped</span>) <span style=color:#75715e>// 递归查找解
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#a6e22e>tempNumbers</span>.<span style=color:#a6e22e>pop</span>() <span style=color:#75715e>// 移除最后一个加入的结果
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>          }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>find24Solutions</span>(<span style=color:#a6e22e>numbers</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>number</span>[])<span style=color:#f92672>:</span> <span style=color:#a6e22e>string</span>[] { <span style=color:#75715e>// 查找所有可能的解
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>solutions</span> <span style=color:#f92672>=</span> [] <span style=color:#75715e>// 清空解数组
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>searchSolutions</span>(<span style=color:#a6e22e>numbers</span>, <span style=color:#e6db74>&#39;&#39;</span>) <span style=color:#75715e>// 开始查找
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>solutions</span> <span style=color:#75715e>// 返回解数组
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>getOperationSymbol</span>(<span style=color:#a6e22e>index</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>number</span>)<span style=color:#f92672>:</span> <span style=color:#a6e22e>string</span> { <span style=color:#75715e>// 获取运算符号
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>symbols</span> <span style=color:#f92672>=</span> [<span style=color:#e6db74>&#39;+&#39;</span>, <span style=color:#e6db74>&#39;*&#39;</span>, <span style=color:#e6db74>&#39;-&#39;</span>, <span style=color:#e6db74>&#39;/&#39;</span>] <span style=color:#75715e>// 定义符号数组
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>symbols</span>[<span style=color:#a6e22e>index</span>] <span style=color:#75715e>// 返回对应的符号
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>removeNumberFromArray</span>(<span style=color:#a6e22e>array</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>number</span>[], <span style=color:#a6e22e>index1</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>number</span>, <span style=color:#a6e22e>index2</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>number</span>)<span style=color:#f92672>:</span> <span style=color:#a6e22e>number</span>[] { <span style=color:#75715e>// 从数组中移除指定位置的元素
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>newArray</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>number</span>[] <span style=color:#f92672>=</span> [] <span style=color:#75715e>// 新数组
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>k</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>k</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>array</span>.<span style=color:#a6e22e>length</span>; <span style=color:#a6e22e>k</span><span style=color:#f92672>++</span>) { <span style=color:#75715e>// 遍历原始数组
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>k</span> <span style=color:#f92672>!==</span> <span style=color:#a6e22e>index1</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>k</span> <span style=color:#f92672>!==</span> <span style=color:#a6e22e>index2</span>) { <span style=color:#75715e>// 如果不是需要移除的位置
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#a6e22e>newArray</span>.<span style=color:#a6e22e>push</span>(<span style=color:#a6e22e>array</span>[<span style=color:#a6e22e>k</span>]) <span style=color:#75715e>// 将元素加入新数组
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>newArray</span> <span style=color:#75715e>// 返回新数组
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>Entry</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>Component</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>struct</span> <span style=color:#a6e22e>GameIndex</span> {
</span></span><span style=display:flex><span>  <span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>State</span> <span style=color:#a6e22e>randomNumbers</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>number</span>[] <span style=color:#f92672>=</span> [] <span style=color:#75715e>// 用于存储随机生成的游戏数字
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>State</span> <span style=color:#a6e22e>symbols</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>string</span>[] <span style=color:#f92672>=</span> [<span style=color:#e6db74>&#34;加&#34;</span>, <span style=color:#e6db74>&#34;减&#34;</span>, <span style=color:#e6db74>&#34;乘&#34;</span>, <span style=color:#e6db74>&#34;除&#34;</span>] <span style=color:#75715e>// 存储游戏中可用的运算符号字符串数组
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>State</span> <span style=color:#a6e22e>cells</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>Cell</span>[] <span style=color:#f92672>=</span> [<span style=color:#75715e>// 存储游戏中的单元格实例数组
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Cell</span>(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>), <span style=color:#75715e>// 创建位于第0行第0列的单元格
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Cell</span>(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>), <span style=color:#75715e>// 创建位于第0行第1列的单元格
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Cell</span>(<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>), <span style=color:#75715e>// 创建位于第1行第0列的单元格
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Cell</span>(<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>)<span style=color:#75715e>// 创建位于第1行第1列的单元格
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  ]
</span></span><span style=display:flex><span>  <span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>State</span> <span style=color:#a6e22e>selectedNumberIndex</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>number</span> <span style=color:#f92672>=</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span> <span style=color:#75715e>// 存储选中的数字单元格的索引，默认为-1表示未选择
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>State</span> <span style=color:#a6e22e>selectedSymbolIndex</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>number</span> <span style=color:#f92672>=</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span> <span style=color:#75715e>// 存储选中的运算符号的索引，默认为-1表示未选择
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>State</span> <span style=color:#a6e22e>showSolution</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>boolean</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span> <span style=color:#75715e>// 控制是否显示游戏的解决方案，默认为不显示
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>cellWidth</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>number</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>250</span> <span style=color:#75715e>// 单个单元格的宽度
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>cellMargin</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>number</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>15</span> <span style=color:#75715e>// 单元格之间的间距
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>judgePoint24Util</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>JudgePointSolution</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>JudgePointSolution</span>() <span style=color:#75715e>// 创建一个JudgePointSolution类的实例，用于寻找游戏的解
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>isShowAnim</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>boolean</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span> <span style=color:#75715e>//单元格是否正在移动，若移动中禁止操作以防闪退
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>aboutToAppear</span>()<span style=color:#f92672>:</span> <span style=color:#66d9ef>void</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>resetGame</span>()
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>resetGame</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>randomNumbers</span> <span style=color:#f92672>=</span> []
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cells</span>.<span style=color:#a6e22e>length</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>randomValue</span> <span style=color:#f92672>=</span> Math.<span style=color:#a6e22e>floor</span>(Math.<span style=color:#a6e22e>random</span>() <span style=color:#f92672>*</span> <span style=color:#ae81ff>13</span>) <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cells</span>[<span style=color:#a6e22e>i</span>].<span style=color:#a6e22e>setDefaultValue</span>(<span style=color:#a6e22e>randomValue</span>)
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>randomNumbers</span>.<span style=color:#a6e22e>push</span>(<span style=color:#a6e22e>randomValue</span>)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>selectedNumberIndex</span> <span style=color:#f92672>=</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>selectedSymbolIndex</span> <span style=color:#f92672>=</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>showSolution</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>solutions</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>judgePoint24Util</span>.<span style=color:#a6e22e>find24Solutions</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>randomNumbers</span>)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>info</span>(<span style=color:#e6db74>`【</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>solutions</span><span style=color:#e6db74>}</span><span style=color:#e6db74>】`</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>solutions</span>.<span style=color:#a6e22e>length</span> <span style=color:#f92672>===</span> <span style=color:#ae81ff>0</span>) {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>info</span>(<span style=color:#e6db74>`无解，重新循环`</span>)
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>resetGame</span>()
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>build</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>Column</span>({ <span style=color:#a6e22e>space</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>20</span> }) {
</span></span><span style=display:flex><span>      <span style=color:#75715e>// 显示/隐藏 解决方案
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#a6e22e>Text</span>(<span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>judgePoint24Util</span>.<span style=color:#a6e22e>find24Solutions</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>randomNumbers</span>)<span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>)
</span></span><span style=display:flex><span>        .<span style=color:#a6e22e>fontSize</span>(<span style=color:#ae81ff>20</span>)
</span></span><span style=display:flex><span>        .<span style=color:#a6e22e>fontColor</span>(<span style=color:#a6e22e>Color</span>.<span style=color:#a6e22e>White</span>)
</span></span><span style=display:flex><span>        .<span style=color:#a6e22e>backgroundColor</span>(<span style=color:#e6db74>&#34;#ffa101&#34;</span>)
</span></span><span style=display:flex><span>        .<span style=color:#a6e22e>visibility</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>showSolution</span> <span style=color:#f92672>?</span> <span style=color:#a6e22e>Visibility</span>.<span style=color:#a6e22e>Visible</span> <span style=color:#f92672>:</span> <span style=color:#a6e22e>Visibility</span>.<span style=color:#a6e22e>Hidden</span>)
</span></span><span style=display:flex><span>        .<span style=color:#a6e22e>padding</span>(<span style=color:#ae81ff>10</span>)
</span></span><span style=display:flex><span>        .<span style=color:#a6e22e>borderRadius</span>(<span style=color:#ae81ff>10</span>)
</span></span><span style=display:flex><span>      <span style=color:#75715e>// 数字
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#a6e22e>Row</span>() {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>Flex</span>({ <span style=color:#a6e22e>wrap</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>FlexWrap</span>.<span style=color:#a6e22e>Wrap</span> }) {
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>ForEach</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cells</span>, (<span style=color:#a6e22e>cell</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>Cell</span>, <span style=color:#a6e22e>index</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>number</span>) =&gt; {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>Text</span>(<span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>cell</span>.<span style=color:#a6e22e>displayValue</span><span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>)
</span></span><span style=display:flex><span>              .<span style=color:#a6e22e>fontSize</span>(<span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cellWidth</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>3</span><span style=color:#e6db74>}</span><span style=color:#e6db74>lpx`</span>)
</span></span><span style=display:flex><span>              .<span style=color:#a6e22e>width</span>(<span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cellWidth</span><span style=color:#e6db74>}</span><span style=color:#e6db74>lpx`</span>)
</span></span><span style=display:flex><span>              .<span style=color:#a6e22e>height</span>(<span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cellWidth</span><span style=color:#e6db74>}</span><span style=color:#e6db74>lpx`</span>)
</span></span><span style=display:flex><span>              .<span style=color:#a6e22e>fontColor</span>(<span style=color:#a6e22e>cell</span> <span style=color:#f92672>!==</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cells</span>[<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>selectedNumberIndex</span>] <span style=color:#f92672>?</span> <span style=color:#e6db74>&#34;#ffffff&#34;</span> <span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;#fe4b00&#34;</span>)
</span></span><span style=display:flex><span>              .<span style=color:#a6e22e>backgroundColor</span>(<span style=color:#a6e22e>cell</span> <span style=color:#f92672>!==</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cells</span>[<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>selectedNumberIndex</span>] <span style=color:#f92672>?</span> <span style=color:#e6db74>&#34;#ffa101&#34;</span> <span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;#fddf4b&#34;</span>)
</span></span><span style=display:flex><span>              .<span style=color:#a6e22e>borderRadius</span>(<span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cellMargin</span><span style=color:#e6db74>}</span><span style=color:#e6db74>lpx`</span>)
</span></span><span style=display:flex><span>              .<span style=color:#a6e22e>margin</span>(<span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cellMargin</span><span style=color:#e6db74>}</span><span style=color:#e6db74>lpx`</span>)
</span></span><span style=display:flex><span>              .<span style=color:#a6e22e>textAlign</span>(<span style=color:#a6e22e>TextAlign</span>.<span style=color:#a6e22e>Center</span>)
</span></span><span style=display:flex><span>              .<span style=color:#a6e22e>clickEffect</span>({ <span style=color:#a6e22e>level</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>ClickEffectLevel</span>.<span style=color:#a6e22e>LIGHT</span>, <span style=color:#a6e22e>scale</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>0.8</span> })
</span></span><span style=display:flex><span>              .<span style=color:#a6e22e>visibility</span>(<span style=color:#a6e22e>cell</span>.<span style=color:#a6e22e>isVisible</span> <span style=color:#f92672>?</span> <span style=color:#a6e22e>Visibility</span>.<span style=color:#a6e22e>Visible</span> <span style=color:#f92672>:</span> <span style=color:#a6e22e>Visibility</span>.<span style=color:#a6e22e>Hidden</span>)
</span></span><span style=display:flex><span>              .<span style=color:#a6e22e>translate</span>({ <span style=color:#a6e22e>x</span><span style=color:#f92672>:</span> <span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>cell</span>.<span style=color:#a6e22e>xPosition</span><span style=color:#e6db74>}</span><span style=color:#e6db74>lpx`</span>, <span style=color:#a6e22e>y</span><span style=color:#f92672>:</span> <span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>cell</span>.<span style=color:#a6e22e>yPosition</span><span style=color:#e6db74>}</span><span style=color:#e6db74>lpx`</span> })
</span></span><span style=display:flex><span>              .<span style=color:#a6e22e>onClick</span>(() =&gt; {
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> (<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>selectedNumberIndex</span> <span style=color:#f92672>===</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>) {
</span></span><span style=display:flex><span>                  <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>selectedNumberIndex</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>index</span>
</span></span><span style=display:flex><span>                } <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>selectedNumberIndex</span> <span style=color:#f92672>===</span> <span style=color:#a6e22e>index</span>) {
</span></span><span style=display:flex><span>                  <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>selectedNumberIndex</span> <span style=color:#f92672>=</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>                } <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>selectedSymbolIndex</span> <span style=color:#f92672>===</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>) {
</span></span><span style=display:flex><span>                  <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>info</span>(<span style=color:#e6db74>`未选择操作符，仅改变选中位置`</span>)
</span></span><span style=display:flex><span>                  <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>selectedNumberIndex</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>index</span>
</span></span><span style=display:flex><span>                } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>                  <span style=color:#66d9ef>if</span> (<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>isShowAnim</span>) {
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>                  }
</span></span><span style=display:flex><span>                  <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>isShowAnim</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>                  <span style=color:#a6e22e>animateToImmediately</span>({
</span></span><span style=display:flex><span>                    <span style=color:#a6e22e>duration</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>300</span>,
</span></span><span style=display:flex><span>                    <span style=color:#a6e22e>onFinish</span><span style=color:#f92672>:</span> () =&gt; {
</span></span><span style=display:flex><span>                      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cells</span>[<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>selectedNumberIndex</span>].<span style=color:#a6e22e>xPosition</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span> <span style=color:#75715e>// 动画结束后位置归0
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cells</span>[<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>selectedNumberIndex</span>].<span style=color:#a6e22e>yPosition</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span> <span style=color:#75715e>// 动画结束后位置归0
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cells</span>[<span style=color:#a6e22e>index</span>].<span style=color:#a6e22e>performOperation</span>(
</span></span><span style=display:flex><span>                        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cells</span>[<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>selectedNumberIndex</span>],
</span></span><span style=display:flex><span>                        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>symbols</span>[<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>selectedSymbolIndex</span>]
</span></span><span style=display:flex><span>                      )
</span></span><span style=display:flex><span>                      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>selectedNumberIndex</span> <span style=color:#f92672>=</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>                      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>selectedSymbolIndex</span> <span style=color:#f92672>=</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>                      <span style=color:#75715e>// 统计结果
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                      <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>countVisibleCells</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>number</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>                      <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cells</span>.<span style=color:#a6e22e>length</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>                        <span style=color:#66d9ef>if</span> (<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cells</span>[<span style=color:#a6e22e>i</span>].<span style=color:#a6e22e>isVisible</span>) {
</span></span><span style=display:flex><span>                          <span style=color:#a6e22e>countVisibleCells</span><span style=color:#f92672>++</span>
</span></span><span style=display:flex><span>                        }
</span></span><span style=display:flex><span>                      }
</span></span><span style=display:flex><span>                      <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>countVisibleCells</span> <span style=color:#f92672>===</span> <span style=color:#ae81ff>1</span>) { <span style=color:#75715e>// 当前是最后一个
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                        <span style=color:#a6e22e>promptAction</span>.<span style=color:#a6e22e>showDialog</span>({
</span></span><span style=display:flex><span>                          <span style=color:#a6e22e>title</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;游戏结束&#39;</span>,
</span></span><span style=display:flex><span>                          <span style=color:#a6e22e>message</span><span style=color:#f92672>:</span> <span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cells</span>[<span style=color:#a6e22e>index</span>].<span style=color:#a6e22e>value</span> <span style=color:#f92672>===</span> <span style=color:#ae81ff>24</span> <span style=color:#f92672>?</span> <span style=color:#e6db74>&#39;【胜利】&#39;</span> <span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;【失败】&#39;</span><span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>,
</span></span><span style=display:flex><span>                          <span style=color:#a6e22e>buttons</span><span style=color:#f92672>:</span> [{ <span style=color:#a6e22e>text</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;重新开始&#39;</span>, <span style=color:#a6e22e>color</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;#ffa500&#39;</span> }]
</span></span><span style=display:flex><span>                        }).<span style=color:#a6e22e>then</span>(() =&gt; {
</span></span><span style=display:flex><span>                          <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>resetGame</span>()
</span></span><span style=display:flex><span>                        })
</span></span><span style=display:flex><span>                      }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>isShowAnim</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                    },
</span></span><span style=display:flex><span>                  }, () =&gt; {
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>temp</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cellWidth</span> <span style=color:#f92672>+</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cellMargin</span> <span style=color:#75715e>// 要移动的单元格距离
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>movingCell</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>Cell</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cells</span>[<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>selectedNumberIndex</span>]
</span></span><span style=display:flex><span>                    <span style=color:#a6e22e>movingCell</span>.<span style=color:#a6e22e>xPosition</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>cell</span>.<span style=color:#a6e22e>columnIndex</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>movingCell</span>.<span style=color:#a6e22e>columnIndex</span>) <span style=color:#f92672>*</span> <span style=color:#a6e22e>temp</span>
</span></span><span style=display:flex><span>                    <span style=color:#a6e22e>movingCell</span>.<span style=color:#a6e22e>yPosition</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>cell</span>.<span style=color:#a6e22e>rowIndex</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>movingCell</span>.<span style=color:#a6e22e>rowIndex</span>) <span style=color:#f92672>*</span> <span style=color:#a6e22e>temp</span>
</span></span><span style=display:flex><span>                  })
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>              })
</span></span><span style=display:flex><span>          })
</span></span><span style=display:flex><span>        }.<span style=color:#a6e22e>width</span>(<span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cellWidth</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>+</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cellMargin</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>4</span><span style=color:#e6db74>}</span><span style=color:#e6db74>lpx`</span>)
</span></span><span style=display:flex><span>      }.<span style=color:#a6e22e>width</span>(<span style=color:#e6db74>&#39;100%&#39;</span>).<span style=color:#a6e22e>justifyContent</span>(<span style=color:#a6e22e>FlexAlign</span>.<span style=color:#a6e22e>Center</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e>// 操作符
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#a6e22e>Row</span>() {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>Flex</span>({ <span style=color:#a6e22e>wrap</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>FlexWrap</span>.<span style=color:#a6e22e>Wrap</span> }) {
</span></span><span style=display:flex><span>          <span style=color:#a6e22e>ForEach</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>symbols</span>, (<span style=color:#a6e22e>symbol</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>string</span>, <span style=color:#a6e22e>index</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>number</span>) =&gt; {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>Text</span>(<span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>symbol</span><span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>)
</span></span><span style=display:flex><span>              .<span style=color:#a6e22e>fontSize</span>(<span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cellWidth</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>4</span><span style=color:#e6db74>}</span><span style=color:#e6db74>lpx`</span>)
</span></span><span style=display:flex><span>              .<span style=color:#a6e22e>width</span>(<span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cellWidth</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span><span style=color:#e6db74>}</span><span style=color:#e6db74>lpx`</span>)
</span></span><span style=display:flex><span>              .<span style=color:#a6e22e>height</span>(<span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cellWidth</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span><span style=color:#e6db74>}</span><span style=color:#e6db74>lpx`</span>)
</span></span><span style=display:flex><span>              .<span style=color:#a6e22e>fontColor</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>selectedSymbolIndex</span> <span style=color:#f92672>!==</span> <span style=color:#a6e22e>index</span> <span style=color:#f92672>?</span> <span style=color:#e6db74>&#34;#c16cf9&#34;</span> <span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;#fcfeff&#34;</span>)
</span></span><span style=display:flex><span>              .<span style=color:#a6e22e>backgroundColor</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>selectedSymbolIndex</span> <span style=color:#f92672>!==</span> <span style=color:#a6e22e>index</span> <span style=color:#f92672>?</span> <span style=color:#a6e22e>Color</span>.<span style=color:#a6e22e>Transparent</span> <span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;#c16cf9&#34;</span>)
</span></span><span style=display:flex><span>              .<span style=color:#a6e22e>borderRadius</span>(<span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cellMargin</span><span style=color:#e6db74>}</span><span style=color:#e6db74>lpx`</span>)
</span></span><span style=display:flex><span>              .<span style=color:#a6e22e>margin</span>(<span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cellMargin</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span><span style=color:#e6db74>}</span><span style=color:#e6db74>lpx`</span>)
</span></span><span style=display:flex><span>              .<span style=color:#a6e22e>textAlign</span>(<span style=color:#a6e22e>TextAlign</span>.<span style=color:#a6e22e>Center</span>)
</span></span><span style=display:flex><span>              .<span style=color:#a6e22e>clickEffect</span>({ <span style=color:#a6e22e>level</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>ClickEffectLevel</span>.<span style=color:#a6e22e>LIGHT</span>, <span style=color:#a6e22e>scale</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>0.8</span> })
</span></span><span style=display:flex><span>              .<span style=color:#a6e22e>onClick</span>(() =&gt; {
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> (<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>selectedSymbolIndex</span> <span style=color:#f92672>===</span> <span style=color:#a6e22e>index</span>) {
</span></span><span style=display:flex><span>                  <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>selectedSymbolIndex</span> <span style=color:#f92672>=</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>                } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>                  <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>selectedSymbolIndex</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>index</span>
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>              })
</span></span><span style=display:flex><span>          })
</span></span><span style=display:flex><span>        }.<span style=color:#a6e22e>width</span>(<span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cellWidth</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>+</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>cellMargin</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>4</span><span style=color:#e6db74>}</span><span style=color:#e6db74>lpx`</span>)
</span></span><span style=display:flex><span>      }.<span style=color:#a6e22e>width</span>(<span style=color:#e6db74>&#39;100%&#39;</span>).<span style=color:#a6e22e>justifyContent</span>(<span style=color:#a6e22e>FlexAlign</span>.<span style=color:#a6e22e>Center</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#75715e>// 重新开始 / 解决方案
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#a6e22e>Row</span>() {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>Button</span>(<span style=color:#e6db74>&#39;重新开始&#39;</span>).<span style=color:#a6e22e>clickEffect</span>({ <span style=color:#a6e22e>level</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>ClickEffectLevel</span>.<span style=color:#a6e22e>LIGHT</span>, <span style=color:#a6e22e>scale</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>0.8</span> }).<span style=color:#a6e22e>onClick</span>(() =&gt; {
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>resetGame</span>()
</span></span><span style=display:flex><span>        })
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>Button</span>(<span style=color:#e6db74>&#39;解决方案&#39;</span>).<span style=color:#a6e22e>clickEffect</span>({ <span style=color:#a6e22e>level</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>ClickEffectLevel</span>.<span style=color:#a6e22e>LIGHT</span>, <span style=color:#a6e22e>scale</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>0.8</span> }).<span style=color:#a6e22e>onClick</span>(() =&gt; {
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>showSolution</span> <span style=color:#f92672>=</span> <span style=color:#f92672>!</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>showSolution</span>
</span></span><span style=display:flex><span>        })
</span></span><span style=display:flex><span>      }.<span style=color:#a6e22e>width</span>(<span style=color:#e6db74>&#39;100%&#39;</span>).<span style=color:#a6e22e>justifyContent</span>(<span style=color:#a6e22e>FlexAlign</span>.<span style=color:#a6e22e>SpaceEvenly</span>)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>width</span>(<span style=color:#e6db74>&#39;100%&#39;</span>).<span style=color:#a6e22e>height</span>(<span style=color:#e6db74>&#39;100%&#39;</span>)
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>backgroundColor</span>(<span style=color:#e6db74>&#34;#0d1015&#34;</span>)
</span></span><span style=display:flex><span>    .<span style=color:#a6e22e>padding</span>(<span style=color:#ae81ff>20</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://qfsyso.github.io/tags/harmonyos/>HarmonyOS</a></li><li><a href=https://qfsyso.github.io/tags/worldtime/>WorldTime</a></li></ul><nav class=paginav><a class=prev href=https://qfsyso.github.io/posts/.net-minio/><span class=title>« Prev</span><br><span>.NET MinIO</span>
</a><a class=next href=https://qfsyso.github.io/posts/golang-web-base/><span class=title>Next »</span><br><span>Golang Web Base</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share HarmonyOS Next WorldTime  Whack Mole on x" href="https://x.com/intent/tweet/?text=HarmonyOS%20Next%20WorldTime%20%20Whack%20Mole&amp;url=https%3a%2f%2fqfsyso.github.io%2fposts%2fharmonyos-next-worldtime-whack-mole%2f&amp;hashtags=HarmonyOS%2cWorldTime"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share HarmonyOS Next WorldTime  Whack Mole on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fqfsyso.github.io%2fposts%2fharmonyos-next-worldtime-whack-mole%2f&amp;title=HarmonyOS%20Next%20WorldTime%20%20Whack%20Mole&amp;summary=HarmonyOS%20Next%20WorldTime%20%20Whack%20Mole&amp;source=https%3a%2f%2fqfsyso.github.io%2fposts%2fharmonyos-next-worldtime-whack-mole%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share HarmonyOS Next WorldTime  Whack Mole on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fqfsyso.github.io%2fposts%2fharmonyos-next-worldtime-whack-mole%2f&title=HarmonyOS%20Next%20WorldTime%20%20Whack%20Mole"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share HarmonyOS Next WorldTime  Whack Mole on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fqfsyso.github.io%2fposts%2fharmonyos-next-worldtime-whack-mole%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share HarmonyOS Next WorldTime  Whack Mole on whatsapp" href="https://api.whatsapp.com/send?text=HarmonyOS%20Next%20WorldTime%20%20Whack%20Mole%20-%20https%3a%2f%2fqfsyso.github.io%2fposts%2fharmonyos-next-worldtime-whack-mole%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share HarmonyOS Next WorldTime  Whack Mole on telegram" href="https://telegram.me/share/url?text=HarmonyOS%20Next%20WorldTime%20%20Whack%20Mole&amp;url=https%3a%2f%2fqfsyso.github.io%2fposts%2fharmonyos-next-worldtime-whack-mole%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share HarmonyOS Next WorldTime  Whack Mole on ycombinator" href="https://news.ycombinator.com/submitlink?t=HarmonyOS%20Next%20WorldTime%20%20Whack%20Mole&u=https%3a%2f%2fqfsyso.github.io%2fposts%2fharmonyos-next-worldtime-whack-mole%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer></article></main><footer class=footer><div class=wtime><div class=wtime2>CST<span id=beijingTime></span> GMT <span id=londonTime></span> EST <span id=newYorkTime></span> PST<span id=losAngelesTime></span></div><div class=wtime2 style=display:none>东京<span id=tokyoTime></span></div><div class=wtime2 style=display:none>欧洲-巴黎<span id=parisTime></span></div><div class=wtime2 style=display:none>UTC<span id=utcTime></span></div></div><span>&copy; 2025 <a href=https://qfsyso.github.io/>MLOG</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a>
</span><script type=text/javascript>const timeZoneOffsets={beijing:8,tokyo:9,paris:[1,2],london:[0,1],newYork:[-5,-4],losAngeles:[-8,-7]};function padZero(e){return e<10?"0"+e:e}function formatTime(e){const t=e.getFullYear(),n=padZero(e.getMonth()+1),s=padZero(e.getDate()),o=padZero(e.getHours()),i=padZero(e.getMinutes()),a=padZero(e.getSeconds());return`${t}-${n}-${s} ${o}:${i}:${a}`}function isDaylightSavingTime(e,t){const o=e.getMonth(),n=new Date(e.getFullYear(),3,8,2,0,0),s=new Date(e.getFullYear(),10,1,2,0,0);return(t==="paris"||t==="london"||t==="newYork"||t==="losAngeles")&&e>=n&&e<s}function updateTime(){const e=new Date,t=new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds()),n=formatTime(t);document.getElementById("utcTime").innerHTML=n;for(const n in timeZoneOffsets){const e=timeZoneOffsets[n];let s;Array.isArray(e)?s=isDaylightSavingTime(t,n)?e[1]:e[0]:s=e;const o=new Date(t.getTime()+s*60*60*1e3);document.getElementById(n+"Time").innerHTML=formatTime(o)}setTimeout(updateTime,1e3)}window.onload=function(){updateTime()};function notfound(e){var n=e.src,t=n.split("/"),s=t[t.length-1];e.src="https://47.115.223.75:8080/group1/v2/"+s+"?timestamp="+Date.now(),e.onerror=null}</script></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>