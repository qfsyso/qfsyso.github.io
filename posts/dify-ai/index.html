<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Dify AI | MLOG</title>
<meta name=keywords content="AI"><meta name=description content="基于 DeepSeek+Dify 构建财务报表分析模型 一、案例介绍 本案例通过实操，助力开发者深入了解如何运用 Dify 和 DeepSeek 构建财务报表分析模型，切实体验 Dify 在 AI 应用开发过程中的便捷性。
二、案例内容 （一）概述 Dify：一款面向开发者与企业的 AI 应用开发平台，致力于降低 AI 技术的使用门槛。借助可视化工作流编排以及低代码开发模式，用户无需具备深厚技术背景，就能快速完成 AI 驱动智能应用的构建、部署与管理工作。
###（二）获取模型服务
1. 领取模型 本案例中，需使用华为开发者空间登录 ModelArts Studio（MaaS）平台以获取模型服务。MaaS 平台是华为云推出的大模型即服务平台，能够一站式对业界主流开源大模型进行部署托管，同时开放大模型 API 服务，可结合业界主流 Agent 开发框架，轻松构建 AI Agent 应用。具体操作步骤如下： 在开发者空间的 Firefox 浏览器中，输入华为云网址：https://www.huaweicloud.com/，进入华为云首页。 在华为云首页右上方点击 “登录”，在弹出的对话框中输入用户名和密码完成登录。 登录成功后，在华为云首页依次选择 “产品”>“人工智能”>“AI 基础平台”>“ModelArts Studio 大模型及服务平台”，进入 ModelArts Studio 页面。 进入 ModelArts Studio 页面后，点击进入控制台。 进入 ModelArts Studio 控制台后，首先在左上角地域选择 “西南 - 贵阳一”，随后点击 “在线推理”>“免费服务”。 点击 “领取额度”，额度领取成功后需等待 2-3 分钟生效，之后点击 “调用说明”，获取模型名称以及 API 地址，本案例选择领取 DeepSeek-R1-32K。 点击 “调用说明” 后，即可获取到模型名称、API 地址。"><meta name=author content="dwd"><link rel=canonical href=https://qfsyso.github.io/posts/dify-ai/><link crossorigin=anonymous href=/assets/css/stylesheet.f49d66caae9ea0fd43f21f29e71a8d3e284517ed770f2aa86fa012953ad3c9ef.css integrity="sha256-9J1myq6eoP1D8h8p5xqNPihFF+13Dyqob6ASlTrTye8=" rel="preload stylesheet" as=style><link rel=icon href=https://qfsyso.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://qfsyso.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://qfsyso.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://qfsyso.github.io/apple-touch-icon.png><link rel=mask-icon href=https://qfsyso.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://qfsyso.github.io/posts/dify-ai/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://qfsyso.github.io/posts/dify-ai/"><meta property="og:site_name" content="MLOG"><meta property="og:title" content="Dify AI"><meta property="og:description" content="基于 DeepSeek+Dify 构建财务报表分析模型 一、案例介绍 本案例通过实操，助力开发者深入了解如何运用 Dify 和 DeepSeek 构建财务报表分析模型，切实体验 Dify 在 AI 应用开发过程中的便捷性。
二、案例内容 （一）概述 Dify：一款面向开发者与企业的 AI 应用开发平台，致力于降低 AI 技术的使用门槛。借助可视化工作流编排以及低代码开发模式，用户无需具备深厚技术背景，就能快速完成 AI 驱动智能应用的构建、部署与管理工作。
###（二）获取模型服务
1. 领取模型 本案例中，需使用华为开发者空间登录 ModelArts Studio（MaaS）平台以获取模型服务。MaaS 平台是华为云推出的大模型即服务平台，能够一站式对业界主流开源大模型进行部署托管，同时开放大模型 API 服务，可结合业界主流 Agent 开发框架，轻松构建 AI Agent 应用。具体操作步骤如下： 在开发者空间的 Firefox 浏览器中，输入华为云网址：https://www.huaweicloud.com/，进入华为云首页。 在华为云首页右上方点击 “登录”，在弹出的对话框中输入用户名和密码完成登录。 登录成功后，在华为云首页依次选择 “产品”>“人工智能”>“AI 基础平台”>“ModelArts Studio 大模型及服务平台”，进入 ModelArts Studio 页面。 进入 ModelArts Studio 页面后，点击进入控制台。 进入 ModelArts Studio 控制台后，首先在左上角地域选择 “西南 - 贵阳一”，随后点击 “在线推理”>“免费服务”。 点击 “领取额度”，额度领取成功后需等待 2-3 分钟生效，之后点击 “调用说明”，获取模型名称以及 API 地址，本案例选择领取 DeepSeek-R1-32K。 点击 “调用说明” 后，即可获取到模型名称、API 地址。"><meta property="og:locale" content="zh-CN"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-09-19T21:29:52+08:00"><meta property="article:modified_time" content="2025-09-19T21:29:52+08:00"><meta property="article:tag" content="AI"><meta name=twitter:card content="summary"><meta name=twitter:title content="Dify AI"><meta name=twitter:description content="基于 DeepSeek+Dify 构建财务报表分析模型 一、案例介绍 本案例通过实操，助力开发者深入了解如何运用 Dify 和 DeepSeek 构建财务报表分析模型，切实体验 Dify 在 AI 应用开发过程中的便捷性。
二、案例内容 （一）概述 Dify：一款面向开发者与企业的 AI 应用开发平台，致力于降低 AI 技术的使用门槛。借助可视化工作流编排以及低代码开发模式，用户无需具备深厚技术背景，就能快速完成 AI 驱动智能应用的构建、部署与管理工作。
###（二）获取模型服务
1. 领取模型 本案例中，需使用华为开发者空间登录 ModelArts Studio（MaaS）平台以获取模型服务。MaaS 平台是华为云推出的大模型即服务平台，能够一站式对业界主流开源大模型进行部署托管，同时开放大模型 API 服务，可结合业界主流 Agent 开发框架，轻松构建 AI Agent 应用。具体操作步骤如下： 在开发者空间的 Firefox 浏览器中，输入华为云网址：https://www.huaweicloud.com/，进入华为云首页。 在华为云首页右上方点击 “登录”，在弹出的对话框中输入用户名和密码完成登录。 登录成功后，在华为云首页依次选择 “产品”>“人工智能”>“AI 基础平台”>“ModelArts Studio 大模型及服务平台”，进入 ModelArts Studio 页面。 进入 ModelArts Studio 页面后，点击进入控制台。 进入 ModelArts Studio 控制台后，首先在左上角地域选择 “西南 - 贵阳一”，随后点击 “在线推理”>“免费服务”。 点击 “领取额度”，额度领取成功后需等待 2-3 分钟生效，之后点击 “调用说明”，获取模型名称以及 API 地址，本案例选择领取 DeepSeek-R1-32K。 点击 “调用说明” 后，即可获取到模型名称、API 地址。"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://qfsyso.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Dify AI","item":"https://qfsyso.github.io/posts/dify-ai/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Dify AI","name":"Dify AI","description":"基于 DeepSeek+Dify 构建财务报表分析模型 一、案例介绍 本案例通过实操，助力开发者深入了解如何运用 Dify 和 DeepSeek 构建财务报表分析模型，切实体验 Dify 在 AI 应用开发过程中的便捷性。\n二、案例内容 （一）概述 Dify：一款面向开发者与企业的 AI 应用开发平台，致力于降低 AI 技术的使用门槛。借助可视化工作流编排以及低代码开发模式，用户无需具备深厚技术背景，就能快速完成 AI 驱动智能应用的构建、部署与管理工作。\n###（二）获取模型服务\n1. 领取模型 本案例中，需使用华为开发者空间登录 ModelArts Studio（MaaS）平台以获取模型服务。MaaS 平台是华为云推出的大模型即服务平台，能够一站式对业界主流开源大模型进行部署托管，同时开放大模型 API 服务，可结合业界主流 Agent 开发框架，轻松构建 AI Agent 应用。具体操作步骤如下： 在开发者空间的 Firefox 浏览器中，输入华为云网址：https://www.huaweicloud.com/，进入华为云首页。 在华为云首页右上方点击 “登录”，在弹出的对话框中输入用户名和密码完成登录。 登录成功后，在华为云首页依次选择 “产品”\u0026gt;“人工智能”\u0026gt;“AI 基础平台”\u0026gt;“ModelArts Studio 大模型及服务平台”，进入 ModelArts Studio 页面。 进入 ModelArts Studio 页面后，点击进入控制台。 进入 ModelArts Studio 控制台后，首先在左上角地域选择 “西南 - 贵阳一”，随后点击 “在线推理”\u0026gt;“免费服务”。 点击 “领取额度”，额度领取成功后需等待 2-3 分钟生效，之后点击 “调用说明”，获取模型名称以及 API 地址，本案例选择领取 DeepSeek-R1-32K。 点击 “调用说明” 后，即可获取到模型名称、API 地址。","keywords":["AI"],"articleBody":"基于 DeepSeek+Dify 构建财务报表分析模型 一、案例介绍 本案例通过实操，助力开发者深入了解如何运用 Dify 和 DeepSeek 构建财务报表分析模型，切实体验 Dify 在 AI 应用开发过程中的便捷性。\n二、案例内容 （一）概述 Dify：一款面向开发者与企业的 AI 应用开发平台，致力于降低 AI 技术的使用门槛。借助可视化工作流编排以及低代码开发模式，用户无需具备深厚技术背景，就能快速完成 AI 驱动智能应用的构建、部署与管理工作。\n###（二）获取模型服务\n1. 领取模型 本案例中，需使用华为开发者空间登录 ModelArts Studio（MaaS）平台以获取模型服务。MaaS 平台是华为云推出的大模型即服务平台，能够一站式对业界主流开源大模型进行部署托管，同时开放大模型 API 服务，可结合业界主流 Agent 开发框架，轻松构建 AI Agent 应用。具体操作步骤如下： 在开发者空间的 Firefox 浏览器中，输入华为云网址：https://www.huaweicloud.com/，进入华为云首页。 在华为云首页右上方点击 “登录”，在弹出的对话框中输入用户名和密码完成登录。 登录成功后，在华为云首页依次选择 “产品”\u003e“人工智能”\u003e“AI 基础平台”\u003e“ModelArts Studio 大模型及服务平台”，进入 ModelArts Studio 页面。 进入 ModelArts Studio 页面后，点击进入控制台。 进入 ModelArts Studio 控制台后，首先在左上角地域选择 “西南 - 贵阳一”，随后点击 “在线推理”\u003e“免费服务”。 点击 “领取额度”，额度领取成功后需等待 2-3 分钟生效，之后点击 “调用说明”，获取模型名称以及 API 地址，本案例选择领取 DeepSeek-R1-32K。 点击 “调用说明” 后，即可获取到模型名称、API 地址。\n2. API Key 获取 在调用说明页面，点击 “API Key 管理”，进入 API Key 获取页面。 进入 API Key 页面后，点击右上角 “创建 API Key”，输入标签和描述，然后点击 “确定”。 点击 “确定” 后即可获取 API Key（注意：创建好的 API Key 仅会在新建后显示一次，需妥善保存，以便后续调用。若 API Key 误关，可删除后重新创建，但最多可创建 5 个）。 ###（三）配置 Dify 操作环境 ####1. 安装 Dify Dify 是一款开源的 AI 应用开发平台与编排引擎，专注于帮助用户快速构建、部署和管理基于大语言模型（LLM）的 AI 应用。具体安装步骤如下： 进入开发者空间，在桌面左下角打开终端命令窗口，执行以下命令下载 Dify.AI 安装脚本：\nsudo wget -P /home/ https://dtse-mirrors.obs.cn-north-4.myhuaweicloud.com/case/0022/install.sh sudo bash /home/install.sh 当终端显示 “安装过程结束，详细日志请查看:/var/dify-install.log” 时，即表示安装成功。\n2. 访问 Dify 在开发者空间打开 Firefox 浏览器，输入http://127.0.0.1访问 Dify.AI。首次登录需注册管理员账号，注册时需填写邮箱、用户名和密码（密码必须包含字母和数字，且长度不小于 8 位）。 注册完毕后，即可成功进入 Dify.AI 的主页面，至此 Dify 部署成功。 ###（四）功能实现\n1. 工作流构建 工作流通过将复杂任务分解为较小的步骤（节点），降低了系统复杂度，减少了对提示词技术和模型推理能力的依赖，提升了 LLM 应用应对复杂任务的性能，同时增强了系统的可解释性、稳定性和容错性。工作流主要分为以下两种： Chatflow：适用于对话类情景，如客户服务、语义搜索以及其他在构建响应过程中需要多步逻辑的对话式应用程序。本案例中使用的便是 Chatflow。 Workflow：适用于自动化和批处理情景，适合高质量翻译、数据分析、内容生成、电子邮件自动化等应用程序。\n步骤： 创建应用 点击 Dify.AI 主页的 “创建空白应用”。 随后点击 “Chatflow”，输入自定义的应用名称和描述（可选），点击 “创建”。 创建完毕后，由于后续需增加新节点，需将 LLM 节点和直接回复节点删除。 配置开始节点 点击开始节点，在输入字段右侧点击加号，在打开的窗口中按以下信息配置： 字段类型：文件列表； 变量名称：自定义（如 text）； 显示名称：自定义（如 text）； 支持的文件类型：文档； 上传文件类型：两者（选择此选项可使后续增加的节点读取到上传的文档内容）； 最大上传数：5（默认）。 配置文档提取器节点 在 Dify 中，LLM 节点无法直接读取或解释文档内容，因此需通过文档提取器节点解析并读取用户上传的文档信息，将其转化为文本后再传递给 LLM，以实现对文件内容的处理。 配置完开始节点后，点击开始节点右侧的加号，添加文档提取器节点。 添加完成后，点击文档提取器节点，在输入变量中插入在开始节点设置的变量名称（如 text）。 添加 LLM 节点 LLM（Large Language Model，大语言模型）是人工智能领域极具革命性的技术之一，它基于深度学习框架构建，通过在海量文本数据上进行预训练，学习语言的统计规律和语义关系，从而具备理解和生成人类语言的能力。LLM 节点的作用是调用大语言模型的能力，处理用户在开始节点输入的信息（自然语言、上传的文件或图片），并给出有效的回应。 点击文档提取器节点右侧的加号，添加 LLM 节点。 配置模型 添加 LLM 节点后，点击 LLM 节点，依次选择 “模型”\u003e“模型设置”。 在模型供应商中找到 “OpenAI-API-compatible”（由于本案例调用 MaaS 的 API，因此选择此供应商），点击 “安装”。 安装完毕后，点击 “模型设置”，按照下表配置参数： 参数名称\t参数配置 模型类型\tLLM 模型名称\t2步骤中获取的模型名称 模型显示名称\t2步骤中获取的模型名称 API Key\t2步骤中获取的 API Key API endpoint URL\t2步骤中获取的模型 URL，删除 URL 最后 “/chat/completions” 部分 API endpoint 中的模型名称\tDeepSeek-R1 其他选项配置\t默认 模型配置完成后，点击 LLM 节点添加上下文变量，选择文档提取器中设置的 text 变量。选择该变量是为了将上传的文档表格经文档提取器转换后，转化为 LLM 可理解的格式，以便大模型更好地理解和分析文档表格内容。 添加提示词 提示词是用户向大语言模型输入的指令或问题，用于引导模型生成符合预期的回答或内容，其核心作用是明确任务要求、控制输出方向并优化大语言模型的响应质量。 将以下提示词模板复制到相应模块中：\n# 任务 - **主要目标**：全面解析企业的财务报表结构，识别关键财务指标与潜在风险。 - **目标**：详细说明资产负债表、利润表、现金流量表等核心部分的内容与逻辑关系。 - **要求**：结合财务比率分析、趋势分析和行业对比，深入评估企业财务健康状况。 - **限制**：无特别格式限制，但需保持分析的严谨性和逻辑性。 - **预期输出**：财务报表的结构化解析，包括各部分的核心内容、作用及分析结论。 # 推理顺序 - **推理部分**：1.识别报表类型：确认分析对象为资产负债表、利润表、现金流量表等； 2.分解核心部分：逐项解析报表中的关键科目（如流动资产、营业收入、现金流等）； 3.数据验证：检查数据的一致性（如资产负债表借贷平衡、利润表与现金流量表关联性）； 4.财务比率计算：计算流动性比率（如流动比率）、偿债能力比率（如资产负债率）、盈利能力比率（如ROE）等； 5.趋势与行业对比：分析历史数据趋势及与行业平均水平的差异； 6.风险与机会识别：基于分析结果，指出潜在财务风险或增长机会。 - **结论部分**：1.总结企业核心发现：如企业盈利是否稳定、现金流是否健康、负债是否可控； 2.提出建议：如优化资本结构、改善营运效率或调整投资策略。 # 输出格式 - **解析格式**：以报表类型为标题，分项说明各部分的内容与作用。 - **结构形式**：Markdown表格，增强可读性。 - **具体说明**：每个部分需包含以下内容：1.报表类型：资产负债表、利润表、现金流量表等；2.核心内容：报表中关键科目及数据组成；3.作用：分析该部分对财务健康评估的贡献；4.分析维度：涉及的财务比率、趋势或行业对比等。 ### 交互规则 1. **问题范围**：仅接受与**资产负债表、利润表、现金流量表**相关的分析请求 2. **偏离引导**：当问题涉及战略、市场、人力等非财务领域时，系统将提示： \u003e \"当前分析聚焦于财务报表维度，请问您需要解析资产负债表结构、利润表项目关联性，还是现金流健康度评估？\" ### 核心任务 | 分析阶段 | 执行内容 | |----------------|--------------------------------------------------------------------------| | 1. 报表识别 | 确认目标报表类型（资产负债表/利润表/现金流量表）及会计期间 | | 2. 科目解构 | 拆解核心科目数值与勾稽关系（如流动资产构成、营收与现金流的匹配度） | | 3. 数据验证 | 校验三表逻辑一致性（如净利润与经营现金流差异分析） | | 4. 比率计算 | 输出三大类指标：流动性（流动比率）、偿债性（利息覆盖倍数）、盈利性（ROIC）| | 5. 多维对比 | 生成趋势对比图（3-5年）与行业分位数对照表（如用箱线图呈现） | | 6. 风险定位 | 通过红黄绿灯系统标注异常指标（如应收账款周转天数\u003e行业P90标红） | ### 输出规范 ```python def generate_report(data): \"\"\" 结构化输出模板，包含动态交互检测 :param data: 预处理后的财务数据集 :return: Markdown格式分析报告，含自动问题检测 \"\"\" if detect_off_topic(data): return \"⚠️ 检测到非财务分析需求，请提供具体报表数据或咨询以下维度：\\n- 资产负债结构健康度诊断\\n- 利润质量多维评估\\n- 自由现金流测算模型\" else: return build_markdown_table(data) # 生成标准分析表格 提示词添加完毕后，打开记忆模块，方便查看提问记录。 添加回复节点 点击右侧加号，添加直接回复节点，在节点中选择 LLM 中的输出内容作为回复内容。 上传文件 配置完成后，点击 “功能”\u003e“文件上传”，参数配置参考如下： 文件上传设置：两者； 最大上传数：3； 支持的文件类型：文档。 发布和预览 配置完毕后，点击右上角 “发布”\u003e“发布更新”。 保存发布后，点击 “预览”，进行模型效果测试。\n2. 使用模型进行财务报表分析 在弹出的预览页面中点击 “本地上传”，上传财务报表。本案例提供虚拟财务报表用于效果测试，下载地址为：https://dtse-mirrors.obs.cn-north-4.myhuaweicloud.com/case/0033/财务报表.xlsx。 上传完毕后，点击上方剪贴板，输入需分析的问题（例如 “现金流健康度评估”），将问题粘贴到对话框中，点击 “发送”。 发送后，模型经过处理会返回评估结果。 注：由于本案例中上传的是模拟虚构的数据，若需获取具体分析数据，请上传真实财务数据。 至此，基于 DeepSeek+Dify 构建财务报表分析模型的案例操作全部完成。 有点像node-red应用开发。 基于DeepSeek和Dify构建心理咨询师应用 案例概述 技术栈： ModelArts Studio Dify.AI（开源LLM应用开发平台） 核心流程 1. 免费领取DeepSeek-R1 2. 部署Dify.AI 安装命令： sudo wget -P /home/ https://dtse-mirrors.obs.cn-north-4.myhuaweicloud.com/case/0022/install.sh sudo bash /home/install.sh 验证：访问http://127.0.0.1，注册账号后配置OpenAI-Compatible模型 3. 创建知识库 数据准备：上传测试文档（示例文档1/2） 配置： 分段设置/索引方式/检索设置保持默认 嵌入完成后状态显示\"可用\" 4. 构建心理咨询应用 关键步骤： 导入预置DSL文件（下载地址） 绑定知识库（选择已创建的知识库） 预览测试： 直接问答（如\"你好\"） 知识库检索（如\"我好像抑郁了\"） Dify核心能力 功能模块 特性说明 模型兼容 支持OpenAI-API兼容协议 可视化编排 声明式YAML定义业务逻辑 数据管理 嵌入式知识库+检索增强 扩展能力 支持Rerank模型提升检索精度 资源清单 资源类型 规格 时长/配额 云主机 4vCPU/8GB/ARM/Ubuntu 22.04 30分钟 DeepSeek-R1 200万Tokens免费额度 单模型限额 注意事项 安装Dify时若遇弹窗需按提示操作或提交工单 API配置需删除URL末尾/chat/completions 中文输入建议先复制到文本编辑器再粘贴 发布应用需额外配置Rerank模型和API访问权限 搭建知识库构建儿科医生应用 部署 Dify 打开终端\nsudo wget -P /home/ https://dtse-mirrors.obs.cn-north-4.myhuaweicloud.com/case/0022/install.sh sudo bash /home/install.sh 访问并登录 Dify： 安装完毕后，打开火狐浏览器，在顶部搜索框输入 “127.0.0.1”，进入 Dify 主页，按照提示完成注册，注册后输入注册邮箱和密码登录。\n配置模型供应商： 进入 Dify 后，点击右上角头像进入设置界面，选择模型供应商 “OpenAI-API-compatible”，点击 “安装”（注意：安装插件需要 2-3 分钟，若第一次安装失败，请重新安装）。\n添加模型： 安装成功后，点击 “添加模型”，按照下表配置具体参数： 参数名\t参数值 模型类型\tLLM 模型名称\t获取的模型名称 模型显示名称\t获取的模型名称 API Key\t获取的 API Key API endpoint URL\t获取的模型 URL 至此，Dify 部署完成。\n2. 构建儿科常见疾病症状及治疗方法知识库 创建知识库：返回 Dify 主页，点击顶部 “知识库”-\u003e“创建知识库”。 导入数据：选择 “导入已有文本”-\u003e“选择文件”，前往指定地址获取 “儿科常见疾病病症及治疗方法” 相关文件（如儿童常见疾病病症及治疗方法.pdf、儿童常见疾病病症及治疗方法.txt）并上传。 配置分段参数：上传完毕后，将分段标识符修改为 “====”，其余参数保持默认，配置完成后点击 “保存修改”。 验证知识库创建结果：在知识库页面进入创建好的知识库，若上传的两个文件状态均为 “可用”，则表示知识库创建成功。\n3. 儿科医生应用构建 创建应用：点击 “工作室”-\u003e“创建空白应用”-\u003e“ChatFlow”，在应用名称处输入 “儿科医生”，点击 “创建”。 添加知识检索节点：创建完毕后，进入 ChatFlow 工作流，在开始节点后新增 “知识检索” 节点。 配置知识检索节点：点击知识检索节点的 “+” 号，选择之前创建好的儿科常见疾病症状及治疗方法知识库，再点击 “添加”。 确认 LLM 模型：LLM 节点会自动选择添加的 DeepSeek-R1 模型，若未自动选择，需手动添加。 测试应用：点击右上角 “预览”，输入测试问题（如 “儿童肥胖懒惰怎么办”），运行后若能成功调用知识库进行回答，则表示儿科医生应用构建完成。\n","wordCount":"536","inLanguage":"en","datePublished":"2025-09-19T21:29:52+08:00","dateModified":"2025-09-19T21:29:52+08:00","author":{"@type":"Person","name":"dwd"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://qfsyso.github.io/posts/dify-ai/"},"publisher":{"@type":"Organization","name":"MLOG","logo":{"@type":"ImageObject","url":"https://qfsyso.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://qfsyso.github.io/ accesskey=h title="MLOG (Alt + H)">MLOG</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://qfsyso.github.io/posts/ title=Archive><span>Archive</span></a></li><li><a href=https://qfsyso.github.io/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://qfsyso.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">Dify AI</h1><div class=post-meta><span title='2025-09-19 21:29:52 +0800 +0800'>September 19, 2025</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;dwd</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#%e5%9f%ba%e4%ba%8e-deepseekdify-%e6%9e%84%e5%bb%ba%e8%b4%a2%e5%8a%a1%e6%8a%a5%e8%a1%a8%e5%88%86%e6%9e%90%e6%a8%a1%e5%9e%8b aria-label="基于 DeepSeek+Dify 构建财务报表分析模型">基于 DeepSeek+Dify 构建财务报表分析模型</a><ul><li><a href=#%e4%b8%80%e6%a1%88%e4%be%8b%e4%bb%8b%e7%bb%8d aria-label=一、案例介绍>一、案例介绍</a></li><li><a href=#%e4%ba%8c%e6%a1%88%e4%be%8b%e5%86%85%e5%ae%b9 aria-label=二、案例内容>二、案例内容</a><ul><li><a href=#%e4%b8%80%e6%a6%82%e8%bf%b0 aria-label=（一）概述>（一）概述</a><ul><li><a href=#1-%e9%a2%86%e5%8f%96%e6%a8%a1%e5%9e%8b aria-label="1. 领取模型">1. 领取模型</a></li><li><a href=#2-api-key-%e8%8e%b7%e5%8f%96 aria-label="2. API Key 获取">2. API Key 获取</a></li><li><a href=#2-%e8%ae%bf%e9%97%ae-dify aria-label="2. 访问 Dify">2. 访问 Dify</a></li><li><a href=#1-%e5%b7%a5%e4%bd%9c%e6%b5%81%e6%9e%84%e5%bb%ba aria-label="1. 工作流构建">1. 工作流构建</a></li><li><a href=#%e6%ad%a5%e9%aa%a4 aria-label=步骤：>步骤：</a></li><li><a href=#2-%e4%bd%bf%e7%94%a8%e6%a8%a1%e5%9e%8b%e8%bf%9b%e8%a1%8c%e8%b4%a2%e5%8a%a1%e6%8a%a5%e8%a1%a8%e5%88%86%e6%9e%90 aria-label="2. 使用模型进行财务报表分析">2. 使用模型进行财务报表分析</a></li></ul></li></ul></li></ul></li><li><a href=#%e5%9f%ba%e4%ba%8edeepseek%e5%92%8cdify%e6%9e%84%e5%bb%ba%e5%bf%83%e7%90%86%e5%92%a8%e8%af%a2%e5%b8%88%e5%ba%94%e7%94%a8 aria-label=基于DeepSeek和Dify构建心理咨询师应用>基于DeepSeek和Dify构建心理咨询师应用</a><ul><li><a href=#%e6%a1%88%e4%be%8b%e6%a6%82%e8%bf%b0 aria-label=案例概述>案例概述</a></li><li><a href=#%e6%a0%b8%e5%bf%83%e6%b5%81%e7%a8%8b aria-label=核心流程>核心流程</a><ul><li><a href=#1-%e5%85%8d%e8%b4%b9%e9%a2%86%e5%8f%96deepseek-r1 aria-label="1. 免费领取DeepSeek-R1">1. 免费领取DeepSeek-R1</a></li><li><a href=#2-%e9%83%a8%e7%bd%b2difyai aria-label="2. 部署Dify.AI">2. 部署Dify.AI</a></li><li><a href=#3-%e5%88%9b%e5%bb%ba%e7%9f%a5%e8%af%86%e5%ba%93 aria-label="3. 创建知识库">3. 创建知识库</a></li><li><a href=#4-%e6%9e%84%e5%bb%ba%e5%bf%83%e7%90%86%e5%92%a8%e8%af%a2%e5%ba%94%e7%94%a8 aria-label="4. 构建心理咨询应用">4. 构建心理咨询应用</a></li><li><a href=#dify%e6%a0%b8%e5%bf%83%e8%83%bd%e5%8a%9b aria-label=Dify核心能力>Dify核心能力</a></li></ul></li><li><a href=#%e8%b5%84%e6%ba%90%e6%b8%85%e5%8d%95 aria-label=资源清单>资源清单</a></li><li><a href=#%e6%b3%a8%e6%84%8f%e4%ba%8b%e9%a1%b9 aria-label=注意事项>注意事项</a></li></ul></li><li><a href=#%e6%90%ad%e5%bb%ba%e7%9f%a5%e8%af%86%e5%ba%93%e6%9e%84%e5%bb%ba%e5%84%bf%e7%a7%91%e5%8c%bb%e7%94%9f%e5%ba%94%e7%94%a8 aria-label=搭建知识库构建儿科医生应用>搭建知识库构建儿科医生应用</a><ul><li><a href=#%e9%83%a8%e7%bd%b2-dify aria-label="部署 Dify">部署 Dify</a></li><li><a href=#%e8%ae%bf%e9%97%ae%e5%b9%b6%e7%99%bb%e5%bd%95-dify aria-label="访问并登录 Dify：">访问并登录 Dify：</a></li><li><a href=#%e9%85%8d%e7%bd%ae%e6%a8%a1%e5%9e%8b%e4%be%9b%e5%ba%94%e5%95%86 aria-label=配置模型供应商：>配置模型供应商：</a></li><li><a href=#%e6%b7%bb%e5%8a%a0%e6%a8%a1%e5%9e%8b aria-label=添加模型：>添加模型：</a></li><li><a href=#2-%e6%9e%84%e5%bb%ba%e5%84%bf%e7%a7%91%e5%b8%b8%e8%a7%81%e7%96%be%e7%97%85%e7%97%87%e7%8a%b6%e5%8f%8a%e6%b2%bb%e7%96%97%e6%96%b9%e6%b3%95%e7%9f%a5%e8%af%86%e5%ba%93 aria-label="2. 构建儿科常见疾病症状及治疗方法知识库">2. 构建儿科常见疾病症状及治疗方法知识库</a></li><li><a href=#3-%e5%84%bf%e7%a7%91%e5%8c%bb%e7%94%9f%e5%ba%94%e7%94%a8%e6%9e%84%e5%bb%ba aria-label="3. 儿科医生应用构建">3. 儿科医生应用构建</a></li></ul></li></ul></div></details></div><div class=post-content><h1 id=基于-deepseekdify-构建财务报表分析模型>基于 DeepSeek+Dify 构建财务报表分析模型<a hidden class=anchor aria-hidden=true href=#基于-deepseekdify-构建财务报表分析模型>#</a></h1><h2 id=一案例介绍>一、案例介绍<a hidden class=anchor aria-hidden=true href=#一案例介绍>#</a></h2><p>本案例通过实操，助力开发者深入了解如何运用 Dify 和 DeepSeek 构建财务报表分析模型，切实体验 Dify 在 AI 应用开发过程中的便捷性。</p><h2 id=二案例内容>二、案例内容<a hidden class=anchor aria-hidden=true href=#二案例内容>#</a></h2><h3 id=一概述>（一）概述<a hidden class=anchor aria-hidden=true href=#一概述>#</a></h3><p>Dify：一款面向开发者与企业的 AI 应用开发平台，致力于降低 AI 技术的使用门槛。借助可视化工作流编排以及低代码开发模式，用户无需具备深厚技术背景，就能快速完成 AI 驱动智能应用的构建、部署与管理工作。</p><p>###（二）获取模型服务</p><h4 id=1-领取模型>1. 领取模型<a hidden class=anchor aria-hidden=true href=#1-领取模型>#</a></h4><p>本案例中，需使用华为开发者空间登录 ModelArts Studio（MaaS）平台以获取模型服务。MaaS 平台是华为云推出的大模型即服务平台，能够一站式对业界主流开源大模型进行部署托管，同时开放大模型 API 服务，可结合业界主流 Agent 开发框架，轻松构建 AI Agent 应用。具体操作步骤如下：
在开发者空间的 Firefox 浏览器中，输入华为云网址：https://www.huaweicloud.com/，进入华为云首页。
在华为云首页右上方点击 “登录”，在弹出的对话框中输入用户名和密码完成登录。
登录成功后，在华为云首页依次选择 “产品”>“人工智能”>“AI 基础平台”>“ModelArts Studio 大模型及服务平台”，进入 ModelArts Studio 页面。
进入 ModelArts Studio 页面后，点击进入控制台。
进入 ModelArts Studio 控制台后，首先在左上角地域选择 “西南 - 贵阳一”，随后点击 “在线推理”>“免费服务”。
点击 “领取额度”，额度领取成功后需等待 2-3 分钟生效，之后点击 “调用说明”，获取模型名称以及 API 地址，本案例选择领取 DeepSeek-R1-32K。
点击 “调用说明” 后，即可获取到模型名称、API 地址。</p><h4 id=2-api-key-获取>2. API Key 获取<a hidden class=anchor aria-hidden=true href=#2-api-key-获取>#</a></h4><p>在调用说明页面，点击 “API Key 管理”，进入 API Key 获取页面。
进入 API Key 页面后，点击右上角 “创建 API Key”，输入标签和描述，然后点击 “确定”。
点击 “确定” 后即可获取 API Key（注意：创建好的 API Key 仅会在新建后显示一次，需妥善保存，以便后续调用。若 API Key 误关，可删除后重新创建，但最多可创建 5 个）。
###（三）配置 Dify 操作环境
####1. 安装 Dify
Dify 是一款开源的 AI 应用开发平台与编排引擎，专注于帮助用户快速构建、部署和管理基于大语言模型（LLM）的 AI 应用。具体安装步骤如下：
进入开发者空间，在桌面左下角打开终端命令窗口，执行以下命令下载 Dify.AI 安装脚本：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo wget -P /home/ https://dtse-mirrors.obs.cn-north-4.myhuaweicloud.com/case/0022/install.sh
</span></span><span style=display:flex><span>sudo bash /home/install.sh
</span></span></code></pre></div><p>当终端显示 “安装过程结束，详细日志请查看:/var/dify-install.log” 时，即表示安装成功。</p><h4 id=2-访问-dify>2. 访问 Dify<a hidden class=anchor aria-hidden=true href=#2-访问-dify>#</a></h4><p>在开发者空间打开 Firefox 浏览器，输入http://127.0.0.1访问 Dify.AI。首次登录需注册管理员账号，注册时需填写邮箱、用户名和密码（密码必须包含字母和数字，且长度不小于 8 位）。
注册完毕后，即可成功进入 Dify.AI 的主页面，至此 Dify 部署成功。
###（四）功能实现</p><h4 id=1-工作流构建>1. 工作流构建<a hidden class=anchor aria-hidden=true href=#1-工作流构建>#</a></h4><p>工作流通过将复杂任务分解为较小的步骤（节点），降低了系统复杂度，减少了对提示词技术和模型推理能力的依赖，提升了 LLM 应用应对复杂任务的性能，同时增强了系统的可解释性、稳定性和容错性。工作流主要分为以下两种：
<strong>Chatflow</strong>：适用于对话类情景，如客户服务、语义搜索以及其他在构建响应过程中需要多步逻辑的对话式应用程序。本案例中使用的便是 Chatflow。
<strong>Workflow</strong>：适用于自动化和批处理情景，适合高质量翻译、数据分析、内容生成、电子邮件自动化等应用程序。</p><h4 id=步骤>步骤：<a hidden class=anchor aria-hidden=true href=#步骤>#</a></h4><p><strong>创建应用</strong>
点击 Dify.AI 主页的 “创建空白应用”。
随后点击 “Chatflow”，输入自定义的应用名称和描述（可选），点击 “创建”。
创建完毕后，由于后续需增加新节点，需将 LLM 节点和直接回复节点删除。
<strong>配置开始节点</strong>
点击开始节点，在输入字段右侧点击加号，在打开的窗口中按以下信息配置：
字段类型：文件列表；
变量名称：自定义（如 text）；
显示名称：自定义（如 text）；
支持的文件类型：文档；
上传文件类型：两者（选择此选项可使后续增加的节点读取到上传的文档内容）；
最大上传数：5（默认）。
<strong>配置文档提取器节点</strong>
在 Dify 中，LLM 节点无法直接读取或解释文档内容，因此需通过文档提取器节点解析并读取用户上传的文档信息，将其转化为文本后再传递给 LLM，以实现对文件内容的处理。
配置完开始节点后，点击开始节点右侧的加号，添加文档提取器节点。
添加完成后，点击文档提取器节点，在输入变量中插入在开始节点设置的变量名称（如 text）。
<strong>添加 LLM 节点</strong>
LLM（Large Language Model，大语言模型）是人工智能领域极具革命性的技术之一，它基于深度学习框架构建，通过在海量文本数据上进行预训练，学习语言的统计规律和语义关系，从而具备理解和生成人类语言的能力。LLM 节点的作用是调用大语言模型的能力，处理用户在开始节点输入的信息（自然语言、上传的文件或图片），并给出有效的回应。
点击文档提取器节点右侧的加号，添加 LLM 节点。
<strong>配置模型</strong>
添加 LLM 节点后，点击 LLM 节点，依次选择 “模型”>“模型设置”。
在模型供应商中找到 “OpenAI-API-compatible”（由于本案例调用 MaaS 的 API，因此选择此供应商），点击 “安装”。
安装完毕后，点击 “模型设置”，按照下表配置参数：
参数名称 参数配置
模型类型 LLM
模型名称 2步骤中获取的模型名称
模型显示名称 2步骤中获取的模型名称
API Key 2步骤中获取的 API Key
API endpoint URL 2步骤中获取的模型 URL，删除 URL 最后 “/chat/completions” 部分
API endpoint 中的模型名称 DeepSeek-R1
其他选项配置 默认
模型配置完成后，点击 LLM 节点添加上下文变量，选择文档提取器中设置的 text 变量。选择该变量是为了将上传的文档表格经文档提取器转换后，转化为 LLM 可理解的格式，以便大模型更好地理解和分析文档表格内容。
<strong>添加提示词</strong>
提示词是用户向大语言模型输入的指令或问题，用于引导模型生成符合预期的回答或内容，其核心作用是明确任务要求、控制输出方向并优化大语言模型的响应质量。
将以下提示词模板复制到相应模块中：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-BASH data-lang=BASH><span style=display:flex><span><span style=color:#75715e># 任务</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>- **主要目标**：全面解析企业的财务报表结构，识别关键财务指标与潜在风险。
</span></span><span style=display:flex><span>- **目标**：详细说明资产负债表、利润表、现金流量表等核心部分的内容与逻辑关系。
</span></span><span style=display:flex><span>- **要求**：结合财务比率分析、趋势分析和行业对比，深入评估企业财务健康状况。
</span></span><span style=display:flex><span>- **限制**：无特别格式限制，但需保持分析的严谨性和逻辑性。
</span></span><span style=display:flex><span>- **预期输出**：财务报表的结构化解析，包括各部分的核心内容、作用及分析结论。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 推理顺序</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>- **推理部分**：1.识别报表类型：确认分析对象为资产负债表、利润表、现金流量表等；
</span></span><span style=display:flex><span>	         2.分解核心部分：逐项解析报表中的关键科目（如流动资产、营业收入、现金流等）；
</span></span><span style=display:flex><span>                        3.数据验证：检查数据的一致性（如资产负债表借贷平衡、利润表与现金流量表关联性）；
</span></span><span style=display:flex><span>                        4.财务比率计算：计算流动性比率（如流动比率）、偿债能力比率（如资产负债率）、盈利能力比率（如ROE）等；
</span></span><span style=display:flex><span>	         5.趋势与行业对比：分析历史数据趋势及与行业平均水平的差异；
</span></span><span style=display:flex><span>	         6.风险与机会识别：基于分析结果，指出潜在财务风险或增长机会。
</span></span><span style=display:flex><span>- **结论部分**：1.总结企业核心发现：如企业盈利是否稳定、现金流是否健康、负债是否可控；
</span></span><span style=display:flex><span> 	         2.提出建议：如优化资本结构、改善营运效率或调整投资策略。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 输出格式</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>- **解析格式**：以报表类型为标题，分项说明各部分的内容与作用。
</span></span><span style=display:flex><span>- **结构形式**：Markdown表格，增强可读性。
</span></span><span style=display:flex><span>- **具体说明**：每个部分需包含以下内容：1.报表类型：资产负债表、利润表、现金流量表等；2.核心内容：报表中关键科目及数据组成；3.作用：分析该部分对财务健康评估的贡献；4.分析维度：涉及的财务比率、趋势或行业对比等。
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>### 交互规则</span>
</span></span><span style=display:flex><span>1. **问题范围**：仅接受与**资产负债表、利润表、现金流量表**相关的分析请求
</span></span><span style=display:flex><span>2. **偏离引导**：当问题涉及战略、市场、人力等非财务领域时，系统将提示：
</span></span><span style=display:flex><span>   &gt; <span style=color:#e6db74>&#34;当前分析聚焦于财务报表维度，请问您需要解析资产负债表结构、利润表项目关联性，还是现金流健康度评估？&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>### 核心任务</span>
</span></span><span style=display:flex><span>| 分析阶段       | 执行内容                                                                 |
</span></span><span style=display:flex><span>|----------------|--------------------------------------------------------------------------|
</span></span><span style=display:flex><span>| 1. 报表识别    | 确认目标报表类型（资产负债表/利润表/现金流量表）及会计期间               |
</span></span><span style=display:flex><span>| 2. 科目解构    | 拆解核心科目数值与勾稽关系（如流动资产构成、营收与现金流的匹配度）       |
</span></span><span style=display:flex><span>| 3. 数据验证    | 校验三表逻辑一致性（如净利润与经营现金流差异分析）                       |
</span></span><span style=display:flex><span>| 4. 比率计算    | 输出三大类指标：流动性（流动比率）、偿债性（利息覆盖倍数）、盈利性（ROIC）|
</span></span><span style=display:flex><span>| 5. 多维对比    | 生成趋势对比图（3-5年）与行业分位数对照表（如用箱线图呈现）              |
</span></span><span style=display:flex><span>| 6. 风险定位    | 通过红黄绿灯系统标注异常指标（如应收账款周转天数&gt;行业P90标红）           |
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>### 输出规范</span>
</span></span><span style=display:flex><span><span style=color:#e6db74>```</span>python
</span></span><span style=display:flex><span>def generate_report<span style=color:#f92672>(</span>data<span style=color:#f92672>)</span>:
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    结构化输出模板，包含动态交互检测
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    :param data: 预处理后的财务数据集
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    :return: Markdown格式分析报告，含自动问题检测
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> detect_off_topic<span style=color:#f92672>(</span>data<span style=color:#f92672>)</span>:
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;⚠️ 检测到非财务分析需求，请提供具体报表数据或咨询以下维度：\n- 资产负债结构健康度诊断\n- 利润质量多维评估\n- 自由现金流测算模型&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> build_markdown_table<span style=color:#f92672>(</span>data<span style=color:#f92672>)</span>  <span style=color:#75715e># 生成标准分析表格</span>
</span></span></code></pre></div><p>提示词添加完毕后，打开记忆模块，方便查看提问记录。
<strong>添加回复节点</strong>
点击右侧加号，添加直接回复节点，在节点中选择 LLM 中的输出内容作为回复内容。
<strong>上传文件</strong>
配置完成后，点击 “功能”>“文件上传”，参数配置参考如下：
文件上传设置：两者；
最大上传数：3；
支持的文件类型：文档。
<strong>发布和预览</strong>
配置完毕后，点击右上角 “发布”>“发布更新”。
保存发布后，点击 “预览”，进行模型效果测试。</p><h4 id=2-使用模型进行财务报表分析>2. 使用模型进行财务报表分析<a hidden class=anchor aria-hidden=true href=#2-使用模型进行财务报表分析>#</a></h4><h2 id=有点像node-red应用开发>在弹出的预览页面中点击 “本地上传”，上传财务报表。本案例提供虚拟财务报表用于效果测试，下载地址为：https://dtse-mirrors.obs.cn-north-4.myhuaweicloud.com/case/0033/财务报表.xlsx。
上传完毕后，点击上方剪贴板，输入需分析的问题（例如 “现金流健康度评估”），将问题粘贴到对话框中，点击 “发送”。
发送后，模型经过处理会返回评估结果。
注：由于本案例中上传的是模拟虚构的数据，若需获取具体分析数据，请上传真实财务数据。
至此，基于 DeepSeek+Dify 构建财务报表分析模型的案例操作全部完成。
有点像node-red应用开发。</h2><h1 id=基于deepseek和dify构建心理咨询师应用>基于DeepSeek和Dify构建心理咨询师应用<a hidden class=anchor aria-hidden=true href=#基于deepseek和dify构建心理咨询师应用>#</a></h1><h2 id=案例概述>案例概述<a hidden class=anchor aria-hidden=true href=#案例概述>#</a></h2><ul><li><strong>技术栈</strong>：<ul><li>ModelArts Studio</li><li>Dify.AI（开源LLM应用开发平台）</li></ul></li></ul><h2 id=核心流程>核心流程<a hidden class=anchor aria-hidden=true href=#核心流程>#</a></h2><h3 id=1-免费领取deepseek-r1>1. 免费领取DeepSeek-R1<a hidden class=anchor aria-hidden=true href=#1-免费领取deepseek-r1>#</a></h3><h3 id=2-部署difyai>2. 部署Dify.AI<a hidden class=anchor aria-hidden=true href=#2-部署difyai>#</a></h3><ul><li><strong>安装命令</strong>：</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo wget -P /home/ https://dtse-mirrors.obs.cn-north-4.myhuaweicloud.com/case/0022/install.sh
</span></span><span style=display:flex><span>sudo bash /home/install.sh
</span></span></code></pre></div><ul><li><strong>验证</strong>：访问<code>http://127.0.0.1</code>，注册账号后配置OpenAI-Compatible模型</li></ul><h3 id=3-创建知识库>3. 创建知识库<a hidden class=anchor aria-hidden=true href=#3-创建知识库>#</a></h3><ul><li><strong>数据准备</strong>：上传测试文档（示例文档1/2）</li><li><strong>配置</strong>：</li><li>分段设置/索引方式/检索设置保持默认</li><li>嵌入完成后状态显示"可用"</li></ul><h3 id=4-构建心理咨询应用>4. 构建心理咨询应用<a hidden class=anchor aria-hidden=true href=#4-构建心理咨询应用>#</a></h3><ul><li><strong>关键步骤</strong>：</li></ul><ol><li>导入预置DSL文件（<a href=https://dtse-mirrors.obs.cn-north-4.myhuaweicloud.com/case/0022/%E5%BF%83%E7%90%86%E5%92%A8%E8%AF%A2%E5%B8%88.yml>下载地址</a>）</li><li>绑定知识库（选择已创建的知识库）</li><li>预览测试：<ul><li>直接问答（如"你好"）</li><li>知识库检索（如"我好像抑郁了"）</li></ul></li></ol><h3 id=dify核心能力>Dify核心能力<a hidden class=anchor aria-hidden=true href=#dify核心能力>#</a></h3><table><thead><tr><th>功能模块</th><th>特性说明</th></tr></thead><tbody><tr><td>模型兼容</td><td>支持OpenAI-API兼容协议</td></tr><tr><td>可视化编排</td><td>声明式YAML定义业务逻辑</td></tr><tr><td>数据管理</td><td>嵌入式知识库+检索增强</td></tr><tr><td>扩展能力</td><td>支持Rerank模型提升检索精度</td></tr></tbody></table><h2 id=资源清单>资源清单<a hidden class=anchor aria-hidden=true href=#资源清单>#</a></h2><table><thead><tr><th>资源类型</th><th>规格</th><th>时长/配额</th></tr></thead><tbody><tr><td>云主机</td><td>4vCPU/8GB/ARM/Ubuntu 22.04</td><td>30分钟</td></tr><tr><td>DeepSeek-R1</td><td>200万Tokens免费额度</td><td>单模型限额</td></tr></tbody></table><h2 id=注意事项>注意事项<a hidden class=anchor aria-hidden=true href=#注意事项>#</a></h2><ol><li>安装Dify时若遇弹窗需按提示操作或提交工单</li><li>API配置需删除URL末尾<code>/chat/completions</code></li><li>中文输入建议先复制到文本编辑器再粘贴</li><li>发布应用需额外配置Rerank模型和API访问权限</li></ol><h1 id=搭建知识库构建儿科医生应用>搭建知识库构建儿科医生应用<a hidden class=anchor aria-hidden=true href=#搭建知识库构建儿科医生应用>#</a></h1><h2 id=部署-dify>部署 Dify<a hidden class=anchor aria-hidden=true href=#部署-dify>#</a></h2><p>打开终端</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo wget -P /home/ https://dtse-mirrors.obs.cn-north-4.myhuaweicloud.com/case/0022/install.sh
</span></span><span style=display:flex><span>sudo bash /home/install.sh
</span></span></code></pre></div><h2 id=访问并登录-dify>访问并登录 Dify：<a hidden class=anchor aria-hidden=true href=#访问并登录-dify>#</a></h2><p>安装完毕后，打开火狐浏览器，在顶部搜索框输入 “127.0.0.1”，进入 Dify 主页，按照提示完成注册，注册后输入注册邮箱和密码登录。</p><h2 id=配置模型供应商>配置模型供应商：<a hidden class=anchor aria-hidden=true href=#配置模型供应商>#</a></h2><p>进入 Dify 后，点击右上角头像进入设置界面，选择模型供应商 “OpenAI-API-compatible”，点击 “安装”（注意：安装插件需要 2-3 分钟，若第一次安装失败，请重新安装）。</p><h2 id=添加模型>添加模型：<a hidden class=anchor aria-hidden=true href=#添加模型>#</a></h2><p>安装成功后，点击 “添加模型”，按照下表配置具体参数：
参数名 参数值
模型类型 LLM
模型名称 获取的模型名称
模型显示名称 获取的模型名称
API Key 获取的 API Key
API endpoint URL 获取的模型 URL
至此，Dify 部署完成。</p><h2 id=2-构建儿科常见疾病症状及治疗方法知识库>2. 构建儿科常见疾病症状及治疗方法知识库<a hidden class=anchor aria-hidden=true href=#2-构建儿科常见疾病症状及治疗方法知识库>#</a></h2><p><strong>创建知识库</strong>：返回 Dify 主页，点击顶部 “知识库”->“创建知识库”。
<strong>导入数据</strong>：选择 “导入已有文本”->“选择文件”，前往指定地址获取 “儿科常见疾病病症及治疗方法” 相关文件（如儿童常见疾病病症及治疗方法.pdf、儿童常见疾病病症及治疗方法.txt）并上传。
<strong>配置分段参数</strong>：上传完毕后，将分段标识符修改为 “====”，其余参数保持默认，配置完成后点击 “保存修改”。
<strong>验证知识库创建结果</strong>：在知识库页面进入创建好的知识库，若上传的两个文件状态均为 “可用”，则表示知识库创建成功。</p><h2 id=3-儿科医生应用构建>3. 儿科医生应用构建<a hidden class=anchor aria-hidden=true href=#3-儿科医生应用构建>#</a></h2><p><strong>创建应用</strong>：点击 “工作室”->“创建空白应用”->“ChatFlow”，在应用名称处输入 “儿科医生”，点击 “创建”。
<strong>添加知识检索节点</strong>：创建完毕后，进入 ChatFlow 工作流，在开始节点后新增 “知识检索” 节点。
<strong>配置知识检索节点</strong>：点击知识检索节点的 “+” 号，选择之前创建好的儿科常见疾病症状及治疗方法知识库，再点击 “添加”。
<strong>确认 LLM 模型</strong>：LLM 节点会自动选择添加的 DeepSeek-R1 模型，若未自动选择，需手动添加。
<strong>测试应用</strong>：点击右上角 “预览”，输入测试问题（如 “儿童肥胖懒惰怎么办”），运行后若能成功调用知识库进行回答，则表示儿科医生应用构建完成。</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://qfsyso.github.io/tags/ai/>AI</a></li></ul><nav class=paginav><a class=prev href=https://qfsyso.github.io/posts/cangjie-ai-bot/><span class=title>« Prev</span><br><span>Cangjie AI Bot</span>
</a><a class=next href=https://qfsyso.github.io/posts/mp3/><span class=title>Next »</span><br><span>MP3</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share Dify AI on x" href="https://x.com/intent/tweet/?text=Dify%20AI&amp;url=https%3a%2f%2fqfsyso.github.io%2fposts%2fdify-ai%2f&amp;hashtags=AI"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Dify AI on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fqfsyso.github.io%2fposts%2fdify-ai%2f&amp;title=Dify%20AI&amp;summary=Dify%20AI&amp;source=https%3a%2f%2fqfsyso.github.io%2fposts%2fdify-ai%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Dify AI on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fqfsyso.github.io%2fposts%2fdify-ai%2f&title=Dify%20AI"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Dify AI on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fqfsyso.github.io%2fposts%2fdify-ai%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Dify AI on whatsapp" href="https://api.whatsapp.com/send?text=Dify%20AI%20-%20https%3a%2f%2fqfsyso.github.io%2fposts%2fdify-ai%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Dify AI on telegram" href="https://telegram.me/share/url?text=Dify%20AI&amp;url=https%3a%2f%2fqfsyso.github.io%2fposts%2fdify-ai%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Dify AI on ycombinator" href="https://news.ycombinator.com/submitlink?t=Dify%20AI&u=https%3a%2f%2fqfsyso.github.io%2fposts%2fdify-ai%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer></article></main><footer class=footer><div class=wtime><div class=wtime2>CST<span id=beijingTime></span> GMT <span id=londonTime></span> EST <span id=newYorkTime></span> PST<span id=losAngelesTime></span></div><div class=wtime2 style=display:none>东京<span id=tokyoTime></span></div><div class=wtime2 style=display:none>欧洲-巴黎<span id=parisTime></span></div><div class=wtime2 style=display:none>UTC<span id=utcTime></span></div></div><span>&copy; 2025 <a href=https://qfsyso.github.io/>MLOG</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a>
</span><script type=text/javascript>const timeZoneOffsets={beijing:8,tokyo:9,paris:[1,2],london:[0,1],newYork:[-5,-4],losAngeles:[-8,-7]};function padZero(e){return e<10?"0"+e:e}function formatTime(e){const t=e.getFullYear(),n=padZero(e.getMonth()+1),s=padZero(e.getDate()),o=padZero(e.getHours()),i=padZero(e.getMinutes()),a=padZero(e.getSeconds());return`${t}-${n}-${s} ${o}:${i}:${a}`}function isDaylightSavingTime(e,t){const o=e.getMonth(),n=new Date(e.getFullYear(),3,8,2,0,0),s=new Date(e.getFullYear(),10,1,2,0,0);return(t==="paris"||t==="london"||t==="newYork"||t==="losAngeles")&&e>=n&&e<s}function updateTime(){const e=new Date,t=new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds()),n=formatTime(t);document.getElementById("utcTime").innerHTML=n;for(const n in timeZoneOffsets){const e=timeZoneOffsets[n];let s;Array.isArray(e)?s=isDaylightSavingTime(t,n)?e[1]:e[0]:s=e;const o=new Date(t.getTime()+s*60*60*1e3);document.getElementById(n+"Time").innerHTML=formatTime(o)}setTimeout(updateTime,1e3)}window.onload=function(){updateTime()};function notfound(e){var n=e.src,t=n.split("/"),s=t[t.length-1];e.src="https://47.115.223.75:8080/group1/v2/"+s+"?timestamp="+Date.now(),e.onerror=null}</script></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>