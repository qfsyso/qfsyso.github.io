<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>ESP32 INMP411 MAX98357A | MLOG</title>
<meta name=keywords content="C,ESP32"><meta name=description content="å®‰è£…esp-idf vscode æ‰©å±• esp-idf å‘½ä»¤-Advanced-é…ç½®esp-idfæ‰©å±• Express ** æœ‰å¤–ç½‘é€‰æ‹©Github**
é…ç½®æ‰©å±•å¦‚æœæœ‰é”™è¯¯ &ldquo;C:\Espressif\tools\idf-python\3.11.2\python.exe -m pip&rdquo; is not valid. (ERROR_INVALID_PIP) è¡¨ç¤º ESP-IDF çš„ Python ç¯å¢ƒä¸­ pip æ— æ³•æ­£å¸¸ä½¿ç”¨ï¼Œé€šå¸¸æ˜¯ pip ç¯å¢ƒæŸåæˆ–æœªæ­£ç¡®å®‰è£…å¯¼è‡´çš„ã€‚
ç¡®è®¤ pip æ˜¯å¦å¯ç”¨ æ‰“å¼€ å‘½ä»¤æç¤ºç¬¦ (cmd) æˆ– PowerShellï¼Œè¾“å…¥ï¼š
C:\Espressif\tools\idf-python\3.11.2\python.exe -m ensurepip Looking in links: ... Requirement already satisfied: pip in ... è¯´æ˜ pip å·²å­˜åœ¨ã€‚
å¦‚æœå‡ºç°é”™è¯¯ï¼Œæ‰§è¡Œä¸‹ä¸€æ­¥ã€‚
æ‰‹åŠ¨ä¿®å¤ pip è¿è¡Œï¼š
C:\Espressif\tools\idf-python\3.11.2\python.exe -m ensurepip --upgrade è¿™ä¼šå¼ºåˆ¶å®‰è£…æˆ–ä¿®å¤ pipã€‚
å†è¿è¡Œï¼š
C:\Espressif\tools\idf-python\3.11.2\python.exe -m pip install --upgrade pip setuptools å¦‚æœæ‰§è¡ŒæˆåŠŸï¼Œè¯´æ˜ pip å·²æ¢å¤æ­£å¸¸ã€‚"><meta name=author content="dwd"><link rel=canonical href=https://qfsyso.github.io/posts/esp32-inmp411-max98357a/><link crossorigin=anonymous href=/assets/css/stylesheet.f49d66caae9ea0fd43f21f29e71a8d3e284517ed770f2aa86fa012953ad3c9ef.css integrity="sha256-9J1myq6eoP1D8h8p5xqNPihFF+13Dyqob6ASlTrTye8=" rel="preload stylesheet" as=style><link rel=icon href=https://qfsyso.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://qfsyso.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://qfsyso.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://qfsyso.github.io/apple-touch-icon.png><link rel=mask-icon href=https://qfsyso.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://qfsyso.github.io/posts/esp32-inmp411-max98357a/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://qfsyso.github.io/posts/esp32-inmp411-max98357a/"><meta property="og:site_name" content="MLOG"><meta property="og:title" content="ESP32  INMP411 MAX98357A"><meta property="og:description" content="å®‰è£…esp-idf vscode æ‰©å±• esp-idf å‘½ä»¤-Advanced-é…ç½®esp-idfæ‰©å±• Express ** æœ‰å¤–ç½‘é€‰æ‹©Github**
é…ç½®æ‰©å±•å¦‚æœæœ‰é”™è¯¯ â€œC:\Espressif\tools\idf-python\3.11.2\python.exe -m pipâ€ is not valid. (ERROR_INVALID_PIP) è¡¨ç¤º ESP-IDF çš„ Python ç¯å¢ƒä¸­ pip æ— æ³•æ­£å¸¸ä½¿ç”¨ï¼Œé€šå¸¸æ˜¯ pip ç¯å¢ƒæŸåæˆ–æœªæ­£ç¡®å®‰è£…å¯¼è‡´çš„ã€‚
ç¡®è®¤ pip æ˜¯å¦å¯ç”¨ æ‰“å¼€ å‘½ä»¤æç¤ºç¬¦ (cmd) æˆ– PowerShellï¼Œè¾“å…¥ï¼š
C:\Espressif\tools\idf-python\3.11.2\python.exe -m ensurepip Looking in links: ... Requirement already satisfied: pip in ... è¯´æ˜ pip å·²å­˜åœ¨ã€‚
å¦‚æœå‡ºç°é”™è¯¯ï¼Œæ‰§è¡Œä¸‹ä¸€æ­¥ã€‚
æ‰‹åŠ¨ä¿®å¤ pip è¿è¡Œï¼š
C:\Espressif\tools\idf-python\3.11.2\python.exe -m ensurepip --upgrade è¿™ä¼šå¼ºåˆ¶å®‰è£…æˆ–ä¿®å¤ pipã€‚
å†è¿è¡Œï¼š
C:\Espressif\tools\idf-python\3.11.2\python.exe -m pip install --upgrade pip setuptools å¦‚æœæ‰§è¡ŒæˆåŠŸï¼Œè¯´æ˜ pip å·²æ¢å¤æ­£å¸¸ã€‚"><meta property="og:locale" content="zh-CN"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-10-25T23:02:11+08:00"><meta property="article:modified_time" content="2025-10-25T23:02:11+08:00"><meta property="article:tag" content="C"><meta property="article:tag" content="ESP32"><meta name=twitter:card content="summary"><meta name=twitter:title content="ESP32  INMP411 MAX98357A"><meta name=twitter:description content="å®‰è£…esp-idf vscode æ‰©å±• esp-idf å‘½ä»¤-Advanced-é…ç½®esp-idfæ‰©å±• Express ** æœ‰å¤–ç½‘é€‰æ‹©Github**
é…ç½®æ‰©å±•å¦‚æœæœ‰é”™è¯¯ &ldquo;C:\Espressif\tools\idf-python\3.11.2\python.exe -m pip&rdquo; is not valid. (ERROR_INVALID_PIP) è¡¨ç¤º ESP-IDF çš„ Python ç¯å¢ƒä¸­ pip æ— æ³•æ­£å¸¸ä½¿ç”¨ï¼Œé€šå¸¸æ˜¯ pip ç¯å¢ƒæŸåæˆ–æœªæ­£ç¡®å®‰è£…å¯¼è‡´çš„ã€‚
ç¡®è®¤ pip æ˜¯å¦å¯ç”¨ æ‰“å¼€ å‘½ä»¤æç¤ºç¬¦ (cmd) æˆ– PowerShellï¼Œè¾“å…¥ï¼š
C:\Espressif\tools\idf-python\3.11.2\python.exe -m ensurepip Looking in links: ... Requirement already satisfied: pip in ... è¯´æ˜ pip å·²å­˜åœ¨ã€‚
å¦‚æœå‡ºç°é”™è¯¯ï¼Œæ‰§è¡Œä¸‹ä¸€æ­¥ã€‚
æ‰‹åŠ¨ä¿®å¤ pip è¿è¡Œï¼š
C:\Espressif\tools\idf-python\3.11.2\python.exe -m ensurepip --upgrade è¿™ä¼šå¼ºåˆ¶å®‰è£…æˆ–ä¿®å¤ pipã€‚
å†è¿è¡Œï¼š
C:\Espressif\tools\idf-python\3.11.2\python.exe -m pip install --upgrade pip setuptools å¦‚æœæ‰§è¡ŒæˆåŠŸï¼Œè¯´æ˜ pip å·²æ¢å¤æ­£å¸¸ã€‚"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://qfsyso.github.io/posts/"},{"@type":"ListItem","position":2,"name":"ESP32  INMP411 MAX98357A","item":"https://qfsyso.github.io/posts/esp32-inmp411-max98357a/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"ESP32  INMP411 MAX98357A","name":"ESP32  INMP411 MAX98357A","description":"å®‰è£…esp-idf vscode æ‰©å±• esp-idf å‘½ä»¤-Advanced-é…ç½®esp-idfæ‰©å±• Express ** æœ‰å¤–ç½‘é€‰æ‹©Github**\né…ç½®æ‰©å±•å¦‚æœæœ‰é”™è¯¯ \u0026ldquo;C:\\Espressif\\tools\\idf-python\\3.11.2\\python.exe -m pip\u0026rdquo; is not valid. (ERROR_INVALID_PIP) è¡¨ç¤º ESP-IDF çš„ Python ç¯å¢ƒä¸­ pip æ— æ³•æ­£å¸¸ä½¿ç”¨ï¼Œé€šå¸¸æ˜¯ pip ç¯å¢ƒæŸåæˆ–æœªæ­£ç¡®å®‰è£…å¯¼è‡´çš„ã€‚\nç¡®è®¤ pip æ˜¯å¦å¯ç”¨ æ‰“å¼€ å‘½ä»¤æç¤ºç¬¦ (cmd) æˆ– PowerShellï¼Œè¾“å…¥ï¼š\nC:\\Espressif\\tools\\idf-python\\3.11.2\\python.exe -m ensurepip Looking in links: ... Requirement already satisfied: pip in ... è¯´æ˜ pip å·²å­˜åœ¨ã€‚\nå¦‚æœå‡ºç°é”™è¯¯ï¼Œæ‰§è¡Œä¸‹ä¸€æ­¥ã€‚\næ‰‹åŠ¨ä¿®å¤ pip è¿è¡Œï¼š\nC:\\Espressif\\tools\\idf-python\\3.11.2\\python.exe -m ensurepip --upgrade è¿™ä¼šå¼ºåˆ¶å®‰è£…æˆ–ä¿®å¤ pipã€‚\nå†è¿è¡Œï¼š\nC:\\Espressif\\tools\\idf-python\\3.11.2\\python.exe -m pip install --upgrade pip setuptools å¦‚æœæ‰§è¡ŒæˆåŠŸï¼Œè¯´æ˜ pip å·²æ¢å¤æ­£å¸¸ã€‚","keywords":["C","ESP32"],"articleBody":"å®‰è£…esp-idf vscode æ‰©å±• esp-idf å‘½ä»¤-Advanced-é…ç½®esp-idfæ‰©å±• Express ** æœ‰å¤–ç½‘é€‰æ‹©Github**\né…ç½®æ‰©å±•å¦‚æœæœ‰é”™è¯¯ â€œC:\\Espressif\\tools\\idf-python\\3.11.2\\python.exe -m pipâ€ is not valid. (ERROR_INVALID_PIP) è¡¨ç¤º ESP-IDF çš„ Python ç¯å¢ƒä¸­ pip æ— æ³•æ­£å¸¸ä½¿ç”¨ï¼Œé€šå¸¸æ˜¯ pip ç¯å¢ƒæŸåæˆ–æœªæ­£ç¡®å®‰è£…å¯¼è‡´çš„ã€‚\nç¡®è®¤ pip æ˜¯å¦å¯ç”¨ æ‰“å¼€ å‘½ä»¤æç¤ºç¬¦ (cmd) æˆ– PowerShellï¼Œè¾“å…¥ï¼š\nC:\\Espressif\\tools\\idf-python\\3.11.2\\python.exe -m ensurepip Looking in links: ... Requirement already satisfied: pip in ... è¯´æ˜ pip å·²å­˜åœ¨ã€‚\nå¦‚æœå‡ºç°é”™è¯¯ï¼Œæ‰§è¡Œä¸‹ä¸€æ­¥ã€‚\næ‰‹åŠ¨ä¿®å¤ pip è¿è¡Œï¼š\nC:\\Espressif\\tools\\idf-python\\3.11.2\\python.exe -m ensurepip --upgrade è¿™ä¼šå¼ºåˆ¶å®‰è£…æˆ–ä¿®å¤ pipã€‚\nå†è¿è¡Œï¼š\nC:\\Espressif\\tools\\idf-python\\3.11.2\\python.exe -m pip install --upgrade pip setuptools å¦‚æœæ‰§è¡ŒæˆåŠŸï¼Œè¯´æ˜ pip å·²æ¢å¤æ­£å¸¸ã€‚\néªŒè¯ æ£€æŸ¥ pip æ˜¯å¦å·¥ä½œï¼š\nC:\\Espressif\\tools\\idf-python\\3.11.2\\python.exe -m pip --version pip 24.0 from C:\\Espressif\\tools\\idf-python\\3.11.2\\lib\\site-packages\\pip (python 3.11) å°±è¯´æ˜æ²¡é—®é¢˜äº†ã€‚\nexample åˆ›å»º blink create yesç”Ÿæˆconfig æ’æ¿ é€‰æ‹©åº•éƒ¨ä¸²å£\næ„å»ºçƒ§å½•\n* æ­£åœ¨æ‰§è¡Œä»»åŠ¡: C:\\Espressif\\python_env\\idf5.5_py3.11_env\\Scripts\\python.exe C:\\Espressif\\frameworks\\esp-idf-v5.5.1\\tools\\idf_size.py e:\\ESP32\\hw2\\blink\\build\\blink.map Memory Type Usage Summary â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“ â”ƒ Memory Type/Section â”ƒ Used [bytes] â”ƒ Used [%] â”ƒ Remain [bytes] â”ƒ Total [bytes] â”ƒ â”¡â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”© â”‚ Flash Code â”‚ 67554 â”‚ â”‚ â”‚ â”‚ â”‚ .text â”‚ 67554 â”‚ â”‚ â”‚ â”‚ â”‚ IRAM â”‚ 52059 â”‚ 39.72 â”‚ 79013 â”‚ 131072 â”‚ â”‚ .text â”‚ 51031 â”‚ 38.93 â”‚ â”‚ â”‚ â”‚ .vectors â”‚ 1028 â”‚ 0.78 â”‚ â”‚ â”‚ â”‚ Flash Data â”‚ 31992 â”‚ â”‚ â”‚ â”‚ â”‚ .rodata â”‚ 31736 â”‚ â”‚ â”‚ â”‚ â”‚ .appdesc â”‚ 256 â”‚ â”‚ â”‚ â”‚ â”‚ DRAM â”‚ 10864 â”‚ 6.01 â”‚ 169872 â”‚ 180736 â”‚ â”‚ .data â”‚ 8712 â”‚ 4.82 â”‚ â”‚ â”‚ â”‚ .bss â”‚ 2152 â”‚ 1.19 â”‚ â”‚ â”‚ â”‚ RTC SLOW â”‚ 56 â”‚ 0.68 â”‚ 8136 â”‚ 8192 â”‚ â”‚ .force_slow â”‚ 32 â”‚ 0.39 â”‚ â”‚ â”‚ â”‚ .rtc_slow_reserved â”‚ 24 â”‚ 0.29 â”‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ Total image size: 160349 bytes (.bin may be padded larger) å¥½äº†ä¹‹åé€‰æ‹©ä¸²å£ UART ï¼ˆJTAG UART DFUï¼‰ ç­‰å¾…è®¾å¤‡é‡å¯å¯ä»¥çœ‹åˆ°é¡¹ç›®æˆåŠŸå¯åŠ¨\nI (283) main_task: Calling app_main() I (283) example: Example configured to blink GPIO LED! I (283) example: Turning the LED OFF! I (1283) example: Turning the LED ON! I (2283) example: Turning the LED OFF! I (3283) example: Turning the LED ON! I (4283) example: Turning the LED OFF! I (5283) example: Turning the LED ON! I (6283) example: Turning the LED OFF! I (7283) example: Turning the LED ON! I (8283) example: Turning the LED OFF! I (9283) example: Turning the LED ON! I (10283) example: Turning the LED OFF! I (11283) example: Turning the LED ON! è‡³æ­¤å®Œæˆ æ„å»ºçƒ§å½•ç›‘è§†\nTips Windows DL ESP-IDF https://dl.espressif.cn/dl/esp-idf/ https://www.bilibili.com/video/BV1BN3ezTEdU idf.py build idf.py flash\nESP32 441+ 98357å¼€å‘ ESP32-S3 ä¸ INMP411 å’Œ MAX98357A çš„æ¥çº¿æ–¹å¼ï¼š\nå¼•è„šè¿æ¥è¯´æ˜\nINMP411 éº¦å…‹é£è¿æ¥ INMP411 å¼•è„š ESP32-S3 å¼•è„š\nSD (æ•°æ®è¾“å‡º) -\u003e GPIO 13 SCK (æ—¶é’Ÿ) -\u003e GPIO 14\nWS (å­—é€‰æ‹©) -\u003e GPIO 27 VDD -\u003e 3.3V GND -\u003e GND\nMAX98357A æ”¾å¤§å™¨è¿æ¥ MAX98357A å¼•è„š ESP32-S3 å¼•è„š\nDIN (æ•°æ®è¾“å…¥) -\u003e GPIO 15 BCLK (ä½æ—¶é’Ÿ) -\u003e GPIO 16 LRC (å·¦å³æ—¶é’Ÿ) -\u003e GPIO 17 VIN -\u003e 3.3V æˆ– 5V GND -\u003e GND\nå®Œæ•´æ¥çº¿å›¾ ESP32-S3 INMP411 MAX98357A\nGPIO 13 â€”â€“\u003e SD GPIO 14 â€”â€“\u003e SCK GPIO 27 â€”â€“\u003e WS\nGPIO 15 â€”â€“\u003e DIN GPIO 16 â€”â€“\u003e BCLK\nGPIO 17 â€”â€“\u003e LRC\n3.3V â€”â€“\u003e VDD 3.3V â€”â€“\u003e VIN GND â€”â€“\u003e GND GND â€”â€“\u003e GND\nç”µæºä¾›åº”ï¼š INMP411 éœ€è¦ 3.3V ä¾›ç”µ\nMAX98357A å¯ä»¥ä½¿ç”¨ 3.3V æˆ– 5V ä¾›ç”µï¼ˆå»ºè®®ç”¨ 5V ä»¥è·å¾—æ›´å¥½çš„éŸ³é‡å’ŒéŸ³è´¨ï¼‰\nå…±åœ°é‡è¦ï¼š ç¡®ä¿æ‰€æœ‰è®¾å¤‡çš„ GND è¿æ¥åˆ°ä¸€èµ·\nè¿™æ˜¯æ¶ˆé™¤å™ªéŸ³çš„å…³é”®\nå¼•è„šé€‰æ‹©ï¼š ä»£ç ä¸­ä½¿ç”¨çš„å¼•è„šå¯ä»¥ä¿®æ”¹ï¼Œä½†è¦ç¡®ä¿åœ¨ä»£ç ä¸­åŒæ­¥æ›´æ–°\né¿å…ä½¿ç”¨æœ‰ç‰¹æ®ŠåŠŸèƒ½çš„å¼•è„šï¼ˆå¦‚ Strapping å¼•è„šï¼‰\nç‰©ç†è¿æ¥ï¼š ä½¿ç”¨æœé‚¦çº¿è¿æ¥æ—¶ç¡®ä¿æ¥è§¦è‰¯å¥½\nçº¿ç¼†å°½é‡çŸ­ä»¥å‡å°‘å¹²æ‰°\nä»£ç å·¥ä½œæµç¨‹ ä½ çš„ä»£ç å®ç°äº†å®æ—¶éŸ³é¢‘ç›´é€šåŠŸèƒ½ï¼š\nI2S ä» INMP411 è¯»å–éŸ³é¢‘æ•°æ®\nç›´æ¥å°†æ•°æ®å†™å…¥ MAX98357A\nå®ç°é›¶å»¶è¿Ÿçš„å½•éŸ³æ’­æ”¾\n#include #include \"freertos/FreeRTOS.h\" #include \"freertos/task.h\" #include \"driver/i2s_std.h\" #include \"driver/gpio.h\" //INMPå¼•è„šï¼Œæ ¹æ®è‡ªå·±è¿çº¿ä¿®æ”¹ #define INMP_SD GPIO_NUM_13 #define INMP_SCK GPIO_NUM_14 #define INMP_WS GPIO_NUM_27 //MAX98357Aå¼•è„šï¼Œæ ¹æ®è‡ªå·±è¿çº¿ä¿®æ”¹ #define MAX_DIN GPIO_NUM_15 #define MAX_BCLK GPIO_NUM_16 #define MAX_LRC GPIO_NUM_17 //é…ç½®rxå¯¹INMP441çš„é‡‡æ ·ç‡ä¸º44.1kHzï¼Œè¿™æ˜¯å¸¸ç”¨çš„äººå£°é‡‡æ ·ç‡ #define SAMPLE_RATE 44100 //buf sizeè®¡ç®—æ–¹æ³•ï¼šæ ¹æ®esp32å®˜æ–¹æ–‡æ¡£ï¼Œbuf size = dma frame num * å£°é“æ•° * æ•°æ®ä½å®½ / 8 #define BUF_SIZE (1023 * 1 * 32 / 8) //éŸ³é¢‘buffer uint8_t buf[BUF_SIZE]; i2s_chan_handle_t rx_handle; i2s_chan_handle_t tx_handle; //åˆå§‹åŒ–i2s rxï¼Œç”¨äºä»INMP441æ¥æ”¶æ•°æ® static void i2s_rx_init(void) { i2s_chan_config_t chan_cfg = I2S_CHANNEL_DEFAULT_CONFIG(I2S_NUM_0, I2S_ROLE_MASTER); //dma frame numä½¿ç”¨æœ€å¤§å€¼ï¼Œå¢å¤§dmaä¸€æ¬¡æ¬è¿çš„æ•°æ®é‡ï¼Œèƒ½å¤Ÿæé«˜æ•ˆç‡ï¼Œå‡å°æ‚éŸ³ï¼Œä½¿ç”¨1023å¯ä»¥åšåˆ°æ²¡æœ‰ä¸€ä¸æ‚éŸ³ chan_cfg.dma_frame_num = 1023; i2s_new_channel(\u0026chan_cfg, NULL, \u0026rx_handle); i2s_std_config_t std_cfg = { .clk_cfg = I2S_STD_CLK_DEFAULT_CONFIG(SAMPLE_RATE), //è™½ç„¶inmp441é‡‡é›†æ•°æ®ä¸º24bitï¼Œä½†æ˜¯ä»å¯ä½¿ç”¨32bitæ¥æ¥æ”¶ï¼Œä¸­é—´å­˜å‚¨è¿‡ç¨‹ä¸éœ€è€ƒè™‘ï¼Œåªè¦è®©å£°éŸ³æ€ä¹ˆè¿›æ¥å°±æ€ä¹ˆå‡ºå»å³å¯ .slot_cfg = I2S_STD_MSB_SLOT_DEFAULT_CONFIG(I2S_DATA_BIT_WIDTH_32BIT, I2S_SLOT_MODE_MONO), .gpio_cfg = { .mclk = I2S_GPIO_UNUSED, .dout = I2S_GPIO_UNUSED, .bclk = INMP_SCK, .ws = INMP_WS, .din = INMP_SD, .invert_flags = { .mclk_inv = false, .bclk_inv = false, .ws_inv = false, }, }, }; i2s_channel_init_std_mode(rx_handle, \u0026std_cfg); i2s_channel_enable(rx_handle); } //åˆå§‹åŒ–txï¼Œç”¨äºå‘MAX98357Aå†™æ•°æ® static void i2s_tx_init(void) { i2s_chan_config_t chan_cfg = I2S_CHANNEL_DEFAULT_CONFIG(I2S_NUM_1, I2S_ROLE_MASTER); chan_cfg.dma_frame_num = 1023; i2s_new_channel(\u0026chan_cfg, \u0026tx_handle, NULL); i2s_std_config_t std_cfg = { .clk_cfg = I2S_STD_CLK_DEFAULT_CONFIG(SAMPLE_RATE), .slot_cfg = I2S_STD_MSB_SLOT_DEFAULT_CONFIG(I2S_DATA_BIT_WIDTH_32BIT, I2S_SLOT_MODE_MONO), .gpio_cfg = { .mclk = I2S_GPIO_UNUSED, .din = I2S_GPIO_UNUSED, .bclk = MAX_BCLK, .ws = MAX_LRC, .dout = MAX_DIN, .invert_flags = { .mclk_inv = false, .bclk_inv = false, .ws_inv = false, }, }, }; i2s_channel_init_std_mode(tx_handle, \u0026std_cfg); i2s_channel_enable(tx_handle); } static void i2s_read_task(void *args) { size_t bytes = 0; //ä¸€æ¬¡æ€§è¯»å–buf_sizeæ•°é‡çš„éŸ³é¢‘ï¼Œå³dmaæœ€å¤§æ¬è¿ä¸€æ¬¡çš„æ•°æ®é‡ï¼Œè¯»æˆåŠŸåï¼Œå†™å…¥txï¼Œå³å¯é€šè¿‡MAX98357Aæ’­æ”¾ while (1) { if (i2s_channel_read(rx_handle, buf, BUF_SIZE, \u0026bytes, 1000) == ESP_OK) { i2s_channel_write(tx_handle, buf, BUF_SIZE, \u0026bytes, 1000); } vTaskDelay(pdMS_TO_TICKS(5)); } vTaskDelete(NULL); } void app_main(void){ i2s_tx_init(); i2s_rx_init(); xTaskCreate(i2s_read_task, \"i2s_read_task\", 4096 * 2, NULL, tskIDLE_PRIORITY, NULL); } err driver/i2s_std.h 4 | #include \"driver/i2s_std.h\" | ^~~~~~~~~~~~~~~~~~ compilation terminated.\nå£°éŸ³å° åŸå§‹é‡‡æ ·æ•°æ® ä» INMP441 â†’ åŸæ ·å†™å…¥ MAX98357Aï¼š\ni2s_channel_read(rx_handle, buf, BUF_SIZE, \u0026bytes, 1000); i2s_channel_write(tx_handle, buf, BUF_SIZE, \u0026bytes, 1000); è¿™ç›¸å½“äºâ€œ1:1 ç›´é€šâ€ï¼Œä½†ï¼š\nINMP441 è¾“å‡ºå¹…åº¦è¾ƒå°ï¼ˆå¤§çº¦ Â±0.1V æ•°å­—å¹…åº¦ï¼‰\nMAX98357A éœ€è¦è¾ƒé«˜å¹…åº¦çš„ I2S PCM è¾“å…¥æ‰èƒ½æ»¡åŠŸç‡è¾“å‡º\nå› æ­¤è¦â€œæ”¾å¤§æ•°å­—ä¿¡å·â€ï¼Œç›¸å½“äºâ€œè½¯ä»¶éŸ³é‡æ”¾å¤§â€ã€‚\næœ€ç®€å•çš„æ”¾å¤§æ–¹æ³•ï¼ˆæ•°å­—å¢ç›Šï¼‰ ä½ å¯ä»¥åœ¨è¯»å®Œ buffer åï¼Œå¯¹æ¯ä¸ªé‡‡æ ·å€¼ä¹˜ä¸€ä¸ªå¢ç›Šç³»æ•°ï¼Œæ¯”å¦‚ Ã—2ã€Ã—4ã€Ã—8 ç­‰ã€‚\nstatic void i2s_read_task(void *args) { size_t bytes = 0; const float gain = 8.0f; // ğŸ”Š å¢ç›Šå€æ•°ï¼ˆå»ºè®® 2~8ï¼Œå¤ªå¤§å¯èƒ½å¤±çœŸï¼‰ while (1) { if (i2s_channel_read(rx_handle, buf, BUF_SIZE, \u0026bytes, 1000) == ESP_OK) { // æŠŠè¯»å–åˆ°çš„ 32-bit æ•°æ®æ”¾å¤§ int32_t *samples = (int32_t *)buf; int samples_count = bytes / sizeof(int32_t); for (int i = 0; i \u003c samples_count; i++) { int64_t temp = (int64_t)(samples[i] * gain); // é™å¹…é˜²æ­¢æº¢å‡º if (temp \u003e INT32_MAX) temp = INT32_MAX; else if (temp \u003c INT32_MIN) temp = INT32_MIN; samples[i] = (int32_t)temp; } i2s_channel_write(tx_handle, buf, bytes, \u0026bytes, 1000); } vTaskDelay(pdMS_TO_TICKS(5)); } } å¢ç›Šè¯´æ˜ å‚æ•°\tå»ºè®®å€¼\tæ•ˆæœ gain = 2.0f\tç¨å¾®æ”¾å¤§ï¼ŒéŸ³é‡æå‡ä¸€ç‚¹ gain = 4.0f\tæ˜æ˜¾æå‡ï¼ˆæ¨èåˆå§‹å€¼ï¼‰ gain = 8.0f\tæœ€å¤§éŸ³é‡ï¼ˆå¯èƒ½ç•¥æœ‰å¤±çœŸï¼‰\nç¡¬ä»¶æ–¹é¢è¦æ³¨æ„ MAX98357A ç”µæºè¦è¶³å¤Ÿç¨³\n3.3V ç”µæµä¸è¶³ä¼šå¯¼è‡´éŸ³é‡å°ã€å£°éŸ³å‘é—·ï¼›\nå»ºè®®ä¾›ç”µ 3.3V â‰¥ 500mAã€‚\nå–‡å­é˜»æŠ—\næ¨èä½¿ç”¨ 4Î© / 3W å°å–‡å­ï¼›\nè‹¥æ¥ 8Î© å–‡å­ï¼ŒéŸ³é‡å¤©ç”Ÿä¼šå°çº¦ä¸€åŠã€‚\nLRC/BCLK è¿çº¿\nç¡®ä¿ LRCã€BCLK è¿æ¥æ­£ç¡®ï¼Œå¦åˆ™ MAX98357A å¯èƒ½æ²¡åŒæ­¥å¥½ï¼Œå¯¼è‡´è¾“å‡ºåŠŸç‡ä½ã€‚\nStudy ESP32 VSCode ESP IDF https://www.bilibili.com/video/BV1Au4m1T7vX https://www.bilibili.com/video/BV1Kx421D7Bo\nå•ç‰‡æœºESP32æ•™ç¨‹ https://www.bilibili.com/video/BV1bqVnzREnQ\nESP32éŸ³ç®±æ•™ç¨‹ https://www.bilibili.com/video/BV1rzbWeiE6t\nESP32å°æ™ºæ•™ç¨‹ https://www.bilibili.com/video/BV1tuVfzbEWz\nESP-IDFå®ç°æ— æŸINMP441é‡‡é›†éŸ³é¢‘+MAX98357Aæ’­æ”¾éŸ³é¢‘ https://blog.csdn.net/qq_44392698/article/details/147032820\n","wordCount":"951","inLanguage":"en","datePublished":"2025-10-25T23:02:11+08:00","dateModified":"2025-10-25T23:02:11+08:00","author":{"@type":"Person","name":"dwd"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://qfsyso.github.io/posts/esp32-inmp411-max98357a/"},"publisher":{"@type":"Organization","name":"MLOG","logo":{"@type":"ImageObject","url":"https://qfsyso.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://qfsyso.github.io/ accesskey=h title="MLOG (Alt + H)">MLOG</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://qfsyso.github.io/posts/ title=Archive><span>Archive</span></a></li><li><a href=https://qfsyso.github.io/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://qfsyso.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">ESP32 INMP411 MAX98357A</h1><div class=post-meta><span title='2025-10-25 23:02:11 +0800 +0800'>October 25, 2025</span>&nbsp;Â·&nbsp;5 min&nbsp;Â·&nbsp;dwd</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#%e5%ae%89%e8%a3%85esp-idf aria-label=å®‰è£…esp-idf>å®‰è£…esp-idf</a><ul><li><a href=#%e9%85%8d%e7%bd%ae%e6%89%a9%e5%b1%95%e5%a6%82%e6%9e%9c%e6%9c%89%e9%94%99%e8%af%af aria-label=é…ç½®æ‰©å±•å¦‚æœæœ‰é”™è¯¯>é…ç½®æ‰©å±•å¦‚æœæœ‰é”™è¯¯</a><ul><li><a href=#%e7%a1%ae%e8%ae%a4-pip-%e6%98%af%e5%90%a6%e5%8f%af%e7%94%a8 aria-label="ç¡®è®¤ pip æ˜¯å¦å¯ç”¨">ç¡®è®¤ pip æ˜¯å¦å¯ç”¨</a></li></ul></li><li><a href=#%e6%89%8b%e5%8a%a8%e4%bf%ae%e5%a4%8d-pip aria-label="æ‰‹åŠ¨ä¿®å¤ pip">æ‰‹åŠ¨ä¿®å¤ pip</a></li><li><a href=#%e9%aa%8c%e8%af%81 aria-label=éªŒè¯>éªŒè¯</a></li></ul></li><li><a href=#example aria-label=example>example</a><ul><li><a href=#tips-windows-dl-esp-idf aria-label="Tips Windows DL ESP-IDF">Tips Windows DL ESP-IDF</a></li></ul></li><li><a href=#esp32-441-98357%e5%bc%80%e5%8f%91 aria-label="ESP32 441+ 98357å¼€å‘">ESP32 441+ 98357å¼€å‘</a><ul><li><a href=#inmp411-%e9%ba%a6%e5%85%8b%e9%a3%8e%e8%bf%9e%e6%8e%a5 aria-label="INMP411 éº¦å…‹é£è¿æ¥">INMP411 éº¦å…‹é£è¿æ¥</a></li><li><a href=#max98357a-%e6%94%be%e5%a4%a7%e5%99%a8%e8%bf%9e%e6%8e%a5 aria-label="MAX98357A æ”¾å¤§å™¨è¿æ¥">MAX98357A æ”¾å¤§å™¨è¿æ¥</a></li><li><a href=#%e5%ae%8c%e6%95%b4%e6%8e%a5%e7%ba%bf%e5%9b%be aria-label=å®Œæ•´æ¥çº¿å›¾>å®Œæ•´æ¥çº¿å›¾</a></li><li><a href=#%e7%94%b5%e6%ba%90%e4%be%9b%e5%ba%94 aria-label=ç”µæºä¾›åº”ï¼š>ç”µæºä¾›åº”ï¼š</a></li><li><a href=#%e5%85%b1%e5%9c%b0%e9%87%8d%e8%a6%81 aria-label=å…±åœ°é‡è¦ï¼š>å…±åœ°é‡è¦ï¼š</a></li><li><a href=#%e5%bc%95%e8%84%9a%e9%80%89%e6%8b%a9 aria-label=å¼•è„šé€‰æ‹©ï¼š>å¼•è„šé€‰æ‹©ï¼š</a></li><li><a href=#%e7%89%a9%e7%90%86%e8%bf%9e%e6%8e%a5 aria-label=ç‰©ç†è¿æ¥ï¼š>ç‰©ç†è¿æ¥ï¼š</a></li><li><a href=#%e4%bb%a3%e7%a0%81%e5%b7%a5%e4%bd%9c%e6%b5%81%e7%a8%8b aria-label=ä»£ç å·¥ä½œæµç¨‹>ä»£ç å·¥ä½œæµç¨‹</a></li><li><a href=#err-driveri2s_stdh aria-label="err driver/i2s_std.h">err driver/i2s_std.h</a></li></ul></li><li><a href=#%e5%a3%b0%e9%9f%b3%e5%b0%8f aria-label=å£°éŸ³å°>å£°éŸ³å°</a><ul><li><a href=#%e6%9c%80%e7%ae%80%e5%8d%95%e7%9a%84%e6%94%be%e5%a4%a7%e6%96%b9%e6%b3%95%e6%95%b0%e5%ad%97%e5%a2%9e%e7%9b%8a aria-label=æœ€ç®€å•çš„æ”¾å¤§æ–¹æ³•ï¼ˆæ•°å­—å¢ç›Šï¼‰>æœ€ç®€å•çš„æ”¾å¤§æ–¹æ³•ï¼ˆæ•°å­—å¢ç›Šï¼‰</a></li><li><a href=#%e5%a2%9e%e7%9b%8a%e8%af%b4%e6%98%8e aria-label=å¢ç›Šè¯´æ˜>å¢ç›Šè¯´æ˜</a></li><li><a href=#%e7%a1%ac%e4%bb%b6%e6%96%b9%e9%9d%a2%e8%a6%81%e6%b3%a8%e6%84%8f aria-label=ç¡¬ä»¶æ–¹é¢è¦æ³¨æ„>ç¡¬ä»¶æ–¹é¢è¦æ³¨æ„</a></li></ul></li><li><a href=#study aria-label=Study>Study</a></li></ul></div></details></div><div class=post-content><h1 id=å®‰è£…esp-idf>å®‰è£…esp-idf<a hidden class=anchor aria-hidden=true href=#å®‰è£…esp-idf>#</a></h1><p><strong>vscode æ‰©å±• esp-idf</strong>
<strong>å‘½ä»¤-Advanced-é…ç½®esp-idfæ‰©å±•</strong>
<strong>Express **
æœ‰å¤–ç½‘é€‰æ‹©</strong>Github**</p><h2 id=é…ç½®æ‰©å±•å¦‚æœæœ‰é”™è¯¯>é…ç½®æ‰©å±•å¦‚æœæœ‰é”™è¯¯<a hidden class=anchor aria-hidden=true href=#é…ç½®æ‰©å±•å¦‚æœæœ‰é”™è¯¯>#</a></h2><p>&ldquo;C:\Espressif\tools\idf-python\3.11.2\python.exe -m pip&rdquo; is not valid. (ERROR_INVALID_PIP)
è¡¨ç¤º ESP-IDF çš„ Python ç¯å¢ƒä¸­ pip æ— æ³•æ­£å¸¸ä½¿ç”¨ï¼Œé€šå¸¸æ˜¯ pip ç¯å¢ƒæŸåæˆ–æœªæ­£ç¡®å®‰è£…å¯¼è‡´çš„ã€‚</p><h3 id=ç¡®è®¤-pip-æ˜¯å¦å¯ç”¨>ç¡®è®¤ pip æ˜¯å¦å¯ç”¨<a hidden class=anchor aria-hidden=true href=#ç¡®è®¤-pip-æ˜¯å¦å¯ç”¨>#</a></h3><p>æ‰“å¼€ å‘½ä»¤æç¤ºç¬¦ (cmd) æˆ– PowerShellï¼Œè¾“å…¥ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>
</span></span><span style=display:flex><span>C:<span style=color:#ae81ff>\E</span>spressif<span style=color:#ae81ff>\t</span>ools<span style=color:#ae81ff>\i</span>df-python<span style=color:#ae81ff>\3</span>.11.2<span style=color:#ae81ff>\p</span>ython.exe -m ensurepip
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>Looking in links</span>: <span style=color:#ae81ff>...</span>
</span></span><span style=display:flex><span><span style=color:#f92672>Requirement already satisfied</span>: <span style=color:#ae81ff>pip in ...</span>
</span></span></code></pre></div><p>è¯´æ˜ pip å·²å­˜åœ¨ã€‚</p><p>å¦‚æœå‡ºç°é”™è¯¯ï¼Œæ‰§è¡Œä¸‹ä¸€æ­¥ã€‚</p><h2 id=æ‰‹åŠ¨ä¿®å¤-pip>æ‰‹åŠ¨ä¿®å¤ pip<a hidden class=anchor aria-hidden=true href=#æ‰‹åŠ¨ä¿®å¤-pip>#</a></h2><p>è¿è¡Œï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>C:<span style=color:#ae81ff>\E</span>spressif<span style=color:#ae81ff>\t</span>ools<span style=color:#ae81ff>\i</span>df-python<span style=color:#ae81ff>\3</span>.11.2<span style=color:#ae81ff>\p</span>ython.exe -m ensurepip --upgrade
</span></span></code></pre></div><p>è¿™ä¼šå¼ºåˆ¶å®‰è£…æˆ–ä¿®å¤ pipã€‚</p><p>å†è¿è¡Œï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>C:<span style=color:#ae81ff>\E</span>spressif<span style=color:#ae81ff>\t</span>ools<span style=color:#ae81ff>\i</span>df-python<span style=color:#ae81ff>\3</span>.11.2<span style=color:#ae81ff>\p</span>ython.exe -m pip install --upgrade pip setuptools 
</span></span></code></pre></div><p>å¦‚æœæ‰§è¡ŒæˆåŠŸï¼Œè¯´æ˜ pip å·²æ¢å¤æ­£å¸¸ã€‚</p><h2 id=éªŒè¯>éªŒè¯<a hidden class=anchor aria-hidden=true href=#éªŒè¯>#</a></h2><p>æ£€æŸ¥ pip æ˜¯å¦å·¥ä½œï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>C:<span style=color:#ae81ff>\E</span>spressif<span style=color:#ae81ff>\t</span>ools<span style=color:#ae81ff>\i</span>df-python<span style=color:#ae81ff>\3</span>.11.2<span style=color:#ae81ff>\p</span>ython.exe -m pip --version
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>
</span></span><span style=display:flex><span>pip 24.0 from C:<span style=color:#ae81ff>\E</span>spressif<span style=color:#ae81ff>\t</span>ools<span style=color:#ae81ff>\i</span>df-python<span style=color:#ae81ff>\3</span>.11.2<span style=color:#ae81ff>\l</span>ib<span style=color:#ae81ff>\s</span>ite-packages<span style=color:#ae81ff>\p</span>ip <span style=color:#f92672>(</span>python 3.11<span style=color:#f92672>)</span>
</span></span></code></pre></div><p>å°±è¯´æ˜æ²¡é—®é¢˜äº†ã€‚</p><h1 id=example>example<a hidden class=anchor aria-hidden=true href=#example>#</a></h1><p>åˆ›å»º <strong>blink</strong>
<strong>create</strong>
yesç”Ÿæˆ<strong>config</strong>
æ’æ¿
é€‰æ‹©<strong>åº•éƒ¨ä¸²å£</strong></p><p><strong>æ„å»ºçƒ§å½•</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span> *  æ­£åœ¨æ‰§è¡Œä»»åŠ¡: C:<span style=color:#ae81ff>\E</span>spressif<span style=color:#ae81ff>\p</span>ython_env<span style=color:#ae81ff>\i</span>df5.5_py3.11_env<span style=color:#ae81ff>\S</span>cripts<span style=color:#ae81ff>\p</span>ython.exe C:<span style=color:#ae81ff>\E</span>spressif<span style=color:#ae81ff>\f</span>rameworks<span style=color:#ae81ff>\e</span>sp-idf-v5.5.1<span style=color:#ae81ff>\t</span>ools<span style=color:#ae81ff>\i</span>df_size.py e:<span style=color:#ae81ff>\E</span>SP32<span style=color:#ae81ff>\h</span>w2<span style=color:#ae81ff>\b</span>link<span style=color:#ae81ff>\b</span>uild<span style=color:#ae81ff>\b</span>link.map 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                             Memory Type Usage Summary                              
</span></span><span style=display:flex><span>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
</span></span><span style=display:flex><span>â”ƒ Memory Type/Section   â”ƒ Used <span style=color:#f92672>[</span>bytes<span style=color:#f92672>]</span> â”ƒ Used <span style=color:#f92672>[</span>%<span style=color:#f92672>]</span> â”ƒ Remain <span style=color:#f92672>[</span>bytes<span style=color:#f92672>]</span> â”ƒ Total <span style=color:#f92672>[</span>bytes<span style=color:#f92672>]</span> â”ƒ
</span></span><span style=display:flex><span>â”¡â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”©
</span></span><span style=display:flex><span>â”‚ Flash Code            â”‚        <span style=color:#ae81ff>67554</span> â”‚          â”‚                â”‚               â”‚
</span></span><span style=display:flex><span>â”‚    .text              â”‚        <span style=color:#ae81ff>67554</span> â”‚          â”‚                â”‚               â”‚
</span></span><span style=display:flex><span>â”‚ IRAM                  â”‚        <span style=color:#ae81ff>52059</span> â”‚    39.72 â”‚          <span style=color:#ae81ff>79013</span> â”‚        <span style=color:#ae81ff>131072</span> â”‚
</span></span><span style=display:flex><span>â”‚    .text              â”‚        <span style=color:#ae81ff>51031</span> â”‚    38.93 â”‚                â”‚               â”‚
</span></span><span style=display:flex><span>â”‚    .vectors           â”‚         <span style=color:#ae81ff>1028</span> â”‚     0.78 â”‚                â”‚               â”‚
</span></span><span style=display:flex><span>â”‚ Flash Data            â”‚        <span style=color:#ae81ff>31992</span> â”‚          â”‚                â”‚               â”‚
</span></span><span style=display:flex><span>â”‚    .rodata            â”‚        <span style=color:#ae81ff>31736</span> â”‚          â”‚                â”‚               â”‚
</span></span><span style=display:flex><span>â”‚    .appdesc           â”‚          <span style=color:#ae81ff>256</span> â”‚          â”‚                â”‚               â”‚
</span></span><span style=display:flex><span>â”‚ DRAM                  â”‚        <span style=color:#ae81ff>10864</span> â”‚     6.01 â”‚         <span style=color:#ae81ff>169872</span> â”‚        <span style=color:#ae81ff>180736</span> â”‚
</span></span><span style=display:flex><span>â”‚    .data              â”‚         <span style=color:#ae81ff>8712</span> â”‚     4.82 â”‚                â”‚               â”‚
</span></span><span style=display:flex><span>â”‚    .bss               â”‚         <span style=color:#ae81ff>2152</span> â”‚     1.19 â”‚                â”‚               â”‚
</span></span><span style=display:flex><span>â”‚ RTC SLOW              â”‚           <span style=color:#ae81ff>56</span> â”‚     0.68 â”‚           <span style=color:#ae81ff>8136</span> â”‚          <span style=color:#ae81ff>8192</span> â”‚
</span></span><span style=display:flex><span>â”‚    .force_slow        â”‚           <span style=color:#ae81ff>32</span> â”‚     0.39 â”‚                â”‚               â”‚
</span></span><span style=display:flex><span>â”‚    .rtc_slow_reserved â”‚           <span style=color:#ae81ff>24</span> â”‚     0.29 â”‚                â”‚               â”‚
</span></span><span style=display:flex><span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</span></span><span style=display:flex><span>Total image size: <span style=color:#ae81ff>160349</span> bytes <span style=color:#f92672>(</span>.bin may be padded larger<span style=color:#f92672>)</span>
</span></span></code></pre></div><p>å¥½äº†ä¹‹åé€‰æ‹©ä¸²å£ <strong>UART</strong>
ï¼ˆJTAG UART DFUï¼‰
ç­‰å¾…è®¾å¤‡é‡å¯å¯ä»¥çœ‹åˆ°é¡¹ç›®æˆåŠŸå¯åŠ¨</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>I <span style=color:#f92672>(</span>283<span style=color:#f92672>)</span> main_task: Calling app_main<span style=color:#f92672>()</span>
</span></span><span style=display:flex><span>I <span style=color:#f92672>(</span>283<span style=color:#f92672>)</span> example: Example configured to blink GPIO LED!
</span></span><span style=display:flex><span>I <span style=color:#f92672>(</span>283<span style=color:#f92672>)</span> example: Turning the LED OFF!
</span></span><span style=display:flex><span>I <span style=color:#f92672>(</span>1283<span style=color:#f92672>)</span> example: Turning the LED ON!
</span></span><span style=display:flex><span>I <span style=color:#f92672>(</span>2283<span style=color:#f92672>)</span> example: Turning the LED OFF!
</span></span><span style=display:flex><span>I <span style=color:#f92672>(</span>3283<span style=color:#f92672>)</span> example: Turning the LED ON!
</span></span><span style=display:flex><span>I <span style=color:#f92672>(</span>4283<span style=color:#f92672>)</span> example: Turning the LED OFF!
</span></span><span style=display:flex><span>I <span style=color:#f92672>(</span>5283<span style=color:#f92672>)</span> example: Turning the LED ON!
</span></span><span style=display:flex><span>I <span style=color:#f92672>(</span>6283<span style=color:#f92672>)</span> example: Turning the LED OFF!
</span></span><span style=display:flex><span>I <span style=color:#f92672>(</span>7283<span style=color:#f92672>)</span> example: Turning the LED ON!
</span></span><span style=display:flex><span>I <span style=color:#f92672>(</span>8283<span style=color:#f92672>)</span> example: Turning the LED OFF!
</span></span><span style=display:flex><span>I <span style=color:#f92672>(</span>9283<span style=color:#f92672>)</span> example: Turning the LED ON!
</span></span><span style=display:flex><span>I <span style=color:#f92672>(</span>10283<span style=color:#f92672>)</span> example: Turning the LED OFF!
</span></span><span style=display:flex><span>I <span style=color:#f92672>(</span>11283<span style=color:#f92672>)</span> example: Turning the LED ON!
</span></span></code></pre></div><p>è‡³æ­¤å®Œæˆ æ„å»ºçƒ§å½•ç›‘è§†</p><h2 id=tips-windows-dl-esp-idf>Tips Windows DL ESP-IDF<a hidden class=anchor aria-hidden=true href=#tips-windows-dl-esp-idf>#</a></h2><p><a href=https://dl.espressif.cn/dl/esp-idf/>https://dl.espressif.cn/dl/esp-idf/</a>
<a href=https://www.bilibili.com/video/BV1BN3ezTEdU>https://www.bilibili.com/video/BV1BN3ezTEdU</a>
idf.py build
idf.py flash</p><h1 id=esp32-441-98357å¼€å‘>ESP32 441+ 98357å¼€å‘<a hidden class=anchor aria-hidden=true href=#esp32-441-98357å¼€å‘>#</a></h1><p>ESP32-S3 ä¸ INMP411 å’Œ MAX98357A çš„æ¥çº¿æ–¹å¼ï¼š</p><p>å¼•è„šè¿æ¥è¯´æ˜</p><h2 id=inmp411-éº¦å…‹é£è¿æ¥>INMP411 éº¦å…‹é£è¿æ¥<a hidden class=anchor aria-hidden=true href=#inmp411-éº¦å…‹é£è¿æ¥>#</a></h2><p>INMP411 å¼•è„š ESP32-S3 å¼•è„š</p><hr><p>SD (æ•°æ®è¾“å‡º) -> GPIO 13
SCK (æ—¶é’Ÿ) -> GPIO 14<br>WS (å­—é€‰æ‹©) -> GPIO 27
VDD -> 3.3V
GND -> GND</p><h2 id=max98357a-æ”¾å¤§å™¨è¿æ¥>MAX98357A æ”¾å¤§å™¨è¿æ¥<a hidden class=anchor aria-hidden=true href=#max98357a-æ”¾å¤§å™¨è¿æ¥>#</a></h2><p>MAX98357A å¼•è„š ESP32-S3 å¼•è„š</p><hr><p>DIN (æ•°æ®è¾“å…¥) -> GPIO 15
BCLK (ä½æ—¶é’Ÿ) -> GPIO 16
LRC (å·¦å³æ—¶é’Ÿ) -> GPIO 17
VIN -> 3.3V æˆ– 5V
GND -> GND</p><h2 id=å®Œæ•´æ¥çº¿å›¾>å®Œæ•´æ¥çº¿å›¾<a hidden class=anchor aria-hidden=true href=#å®Œæ•´æ¥çº¿å›¾>#</a></h2><p>ESP32-S3 INMP411 MAX98357A</p><hr><p>GPIO 13 &mdash;&ndash;> SD
GPIO 14 &mdash;&ndash;> SCK
GPIO 27 &mdash;&ndash;> WS</p><p>GPIO 15 &mdash;&ndash;> DIN
GPIO 16 &mdash;&ndash;> BCLK<br>GPIO 17 &mdash;&ndash;> LRC</p><p>3.3V &mdash;&ndash;> VDD
3.3V &mdash;&ndash;> VIN
GND &mdash;&ndash;> GND
GND &mdash;&ndash;> GND</p><h2 id=ç”µæºä¾›åº”>ç”µæºä¾›åº”ï¼š<a hidden class=anchor aria-hidden=true href=#ç”µæºä¾›åº”>#</a></h2><p>INMP411 éœ€è¦ 3.3V ä¾›ç”µ</p><p>MAX98357A å¯ä»¥ä½¿ç”¨ 3.3V æˆ– 5V ä¾›ç”µï¼ˆå»ºè®®ç”¨ 5V ä»¥è·å¾—æ›´å¥½çš„éŸ³é‡å’ŒéŸ³è´¨ï¼‰</p><h2 id=å…±åœ°é‡è¦>å…±åœ°é‡è¦ï¼š<a hidden class=anchor aria-hidden=true href=#å…±åœ°é‡è¦>#</a></h2><p>ç¡®ä¿æ‰€æœ‰è®¾å¤‡çš„ GND è¿æ¥åˆ°ä¸€èµ·</p><p>è¿™æ˜¯æ¶ˆé™¤å™ªéŸ³çš„å…³é”®</p><h2 id=å¼•è„šé€‰æ‹©>å¼•è„šé€‰æ‹©ï¼š<a hidden class=anchor aria-hidden=true href=#å¼•è„šé€‰æ‹©>#</a></h2><p>ä»£ç ä¸­ä½¿ç”¨çš„å¼•è„šå¯ä»¥ä¿®æ”¹ï¼Œä½†è¦ç¡®ä¿åœ¨ä»£ç ä¸­åŒæ­¥æ›´æ–°</p><p>é¿å…ä½¿ç”¨æœ‰ç‰¹æ®ŠåŠŸèƒ½çš„å¼•è„šï¼ˆå¦‚ Strapping å¼•è„šï¼‰</p><h2 id=ç‰©ç†è¿æ¥>ç‰©ç†è¿æ¥ï¼š<a hidden class=anchor aria-hidden=true href=#ç‰©ç†è¿æ¥>#</a></h2><p>ä½¿ç”¨æœé‚¦çº¿è¿æ¥æ—¶ç¡®ä¿æ¥è§¦è‰¯å¥½</p><p>çº¿ç¼†å°½é‡çŸ­ä»¥å‡å°‘å¹²æ‰°</p><h2 id=ä»£ç å·¥ä½œæµç¨‹>ä»£ç å·¥ä½œæµç¨‹<a hidden class=anchor aria-hidden=true href=#ä»£ç å·¥ä½œæµç¨‹>#</a></h2><p>ä½ çš„ä»£ç å®ç°äº†å®æ—¶éŸ³é¢‘ç›´é€šåŠŸèƒ½ï¼š</p><p>I2S ä» INMP411 è¯»å–éŸ³é¢‘æ•°æ®</p><p>ç›´æ¥å°†æ•°æ®å†™å…¥ MAX98357A</p><p>å®ç°é›¶å»¶è¿Ÿçš„å½•éŸ³æ’­æ”¾</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&lt;stdio.h&gt;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&#34;freertos/FreeRTOS.h&#34;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&#34;freertos/task.h&#34;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&#34;driver/i2s_std.h&#34;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>#include</span> <span style=color:#75715e>&#34;driver/gpio.h&#34;</span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e></span> 
</span></span><span style=display:flex><span><span style=color:#75715e>//INMPå¼•è„šï¼Œæ ¹æ®è‡ªå·±è¿çº¿ä¿®æ”¹
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#75715e>#define INMP_SD     GPIO_NUM_13
</span></span></span><span style=display:flex><span><span style=color:#75715e>#define INMP_SCK    GPIO_NUM_14
</span></span></span><span style=display:flex><span><span style=color:#75715e>#define INMP_WS     GPIO_NUM_27
</span></span></span><span style=display:flex><span><span style=color:#75715e></span> 
</span></span><span style=display:flex><span><span style=color:#75715e>//MAX98357Aå¼•è„šï¼Œæ ¹æ®è‡ªå·±è¿çº¿ä¿®æ”¹
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#75715e>#define MAX_DIN     GPIO_NUM_15
</span></span></span><span style=display:flex><span><span style=color:#75715e>#define MAX_BCLK    GPIO_NUM_16
</span></span></span><span style=display:flex><span><span style=color:#75715e>#define MAX_LRC     GPIO_NUM_17
</span></span></span><span style=display:flex><span><span style=color:#75715e></span> 
</span></span><span style=display:flex><span><span style=color:#75715e>//é…ç½®rxå¯¹INMP441çš„é‡‡æ ·ç‡ä¸º44.1kHzï¼Œè¿™æ˜¯å¸¸ç”¨çš„äººå£°é‡‡æ ·ç‡
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#75715e>#define SAMPLE_RATE 44100
</span></span></span><span style=display:flex><span><span style=color:#75715e></span> 
</span></span><span style=display:flex><span><span style=color:#75715e>//buf sizeè®¡ç®—æ–¹æ³•ï¼šæ ¹æ®esp32å®˜æ–¹æ–‡æ¡£ï¼Œbuf size = dma frame num * å£°é“æ•° * æ•°æ®ä½å®½ / 8
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#75715e>#define BUF_SIZE    (1023 * 1 * 32 / 8)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span> 
</span></span><span style=display:flex><span><span style=color:#75715e>//éŸ³é¢‘buffer
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>uint8_t</span> buf[BUF_SIZE];
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span><span style=color:#66d9ef>i2s_chan_handle_t</span> rx_handle;
</span></span><span style=display:flex><span><span style=color:#66d9ef>i2s_chan_handle_t</span> tx_handle;
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span><span style=color:#75715e>//åˆå§‹åŒ–i2s rxï¼Œç”¨äºä»INMP441æ¥æ”¶æ•°æ®
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>i2s_rx_init</span>(<span style=color:#66d9ef>void</span>)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>i2s_chan_config_t</span> chan_cfg <span style=color:#f92672>=</span> <span style=color:#a6e22e>I2S_CHANNEL_DEFAULT_CONFIG</span>(I2S_NUM_0, I2S_ROLE_MASTER);
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#75715e>//dma frame numä½¿ç”¨æœ€å¤§å€¼ï¼Œå¢å¤§dmaä¸€æ¬¡æ¬è¿çš„æ•°æ®é‡ï¼Œèƒ½å¤Ÿæé«˜æ•ˆç‡ï¼Œå‡å°æ‚éŸ³ï¼Œä½¿ç”¨1023å¯ä»¥åšåˆ°æ²¡æœ‰ä¸€ä¸æ‚éŸ³
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    chan_cfg.dma_frame_num <span style=color:#f92672>=</span> <span style=color:#ae81ff>1023</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>i2s_new_channel</span>(<span style=color:#f92672>&amp;</span>chan_cfg, NULL, <span style=color:#f92672>&amp;</span>rx_handle);
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>i2s_std_config_t</span> std_cfg <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>        .clk_cfg <span style=color:#f92672>=</span> <span style=color:#a6e22e>I2S_STD_CLK_DEFAULT_CONFIG</span>(SAMPLE_RATE),
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#75715e>//è™½ç„¶inmp441é‡‡é›†æ•°æ®ä¸º24bitï¼Œä½†æ˜¯ä»å¯ä½¿ç”¨32bitæ¥æ¥æ”¶ï¼Œä¸­é—´å­˜å‚¨è¿‡ç¨‹ä¸éœ€è€ƒè™‘ï¼Œåªè¦è®©å£°éŸ³æ€ä¹ˆè¿›æ¥å°±æ€ä¹ˆå‡ºå»å³å¯
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        .slot_cfg <span style=color:#f92672>=</span> <span style=color:#a6e22e>I2S_STD_MSB_SLOT_DEFAULT_CONFIG</span>(I2S_DATA_BIT_WIDTH_32BIT, I2S_SLOT_MODE_MONO),
</span></span><span style=display:flex><span>        .gpio_cfg <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>            .mclk <span style=color:#f92672>=</span> I2S_GPIO_UNUSED,
</span></span><span style=display:flex><span>            .dout <span style=color:#f92672>=</span> I2S_GPIO_UNUSED,
</span></span><span style=display:flex><span>            .bclk <span style=color:#f92672>=</span> INMP_SCK,
</span></span><span style=display:flex><span>            .ws <span style=color:#f92672>=</span> INMP_WS,
</span></span><span style=display:flex><span>            .din <span style=color:#f92672>=</span> INMP_SD,
</span></span><span style=display:flex><span>            .invert_flags <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>                .mclk_inv <span style=color:#f92672>=</span> false,
</span></span><span style=display:flex><span>                .bclk_inv <span style=color:#f92672>=</span> false,
</span></span><span style=display:flex><span>                .ws_inv <span style=color:#f92672>=</span> false,
</span></span><span style=display:flex><span>            },
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>i2s_channel_init_std_mode</span>(rx_handle, <span style=color:#f92672>&amp;</span>std_cfg);
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>i2s_channel_enable</span>(rx_handle);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span><span style=color:#75715e>//åˆå§‹åŒ–txï¼Œç”¨äºå‘MAX98357Aå†™æ•°æ®
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>i2s_tx_init</span>(<span style=color:#66d9ef>void</span>)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>i2s_chan_config_t</span> chan_cfg <span style=color:#f92672>=</span> <span style=color:#a6e22e>I2S_CHANNEL_DEFAULT_CONFIG</span>(I2S_NUM_1, I2S_ROLE_MASTER);
</span></span><span style=display:flex><span>    chan_cfg.dma_frame_num <span style=color:#f92672>=</span> <span style=color:#ae81ff>1023</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>i2s_new_channel</span>(<span style=color:#f92672>&amp;</span>chan_cfg, <span style=color:#f92672>&amp;</span>tx_handle, NULL);
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>i2s_std_config_t</span> std_cfg <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>        .clk_cfg <span style=color:#f92672>=</span> <span style=color:#a6e22e>I2S_STD_CLK_DEFAULT_CONFIG</span>(SAMPLE_RATE),
</span></span><span style=display:flex><span>        .slot_cfg <span style=color:#f92672>=</span> <span style=color:#a6e22e>I2S_STD_MSB_SLOT_DEFAULT_CONFIG</span>(I2S_DATA_BIT_WIDTH_32BIT, I2S_SLOT_MODE_MONO),
</span></span><span style=display:flex><span>        .gpio_cfg <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>            .mclk <span style=color:#f92672>=</span> I2S_GPIO_UNUSED,
</span></span><span style=display:flex><span>            .din <span style=color:#f92672>=</span> I2S_GPIO_UNUSED,
</span></span><span style=display:flex><span>            .bclk <span style=color:#f92672>=</span> MAX_BCLK,
</span></span><span style=display:flex><span>            .ws <span style=color:#f92672>=</span> MAX_LRC,
</span></span><span style=display:flex><span>            .dout <span style=color:#f92672>=</span> MAX_DIN,
</span></span><span style=display:flex><span>            .invert_flags <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>                .mclk_inv <span style=color:#f92672>=</span> false,
</span></span><span style=display:flex><span>                .bclk_inv <span style=color:#f92672>=</span> false,
</span></span><span style=display:flex><span>                .ws_inv <span style=color:#f92672>=</span> false,
</span></span><span style=display:flex><span>            },
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>i2s_channel_init_std_mode</span>(tx_handle, <span style=color:#f92672>&amp;</span>std_cfg);
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>i2s_channel_enable</span>(tx_handle);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span><span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>i2s_read_task</span>(<span style=color:#66d9ef>void</span> <span style=color:#f92672>*</span>args)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>size_t</span> bytes <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span>    <span style=color:#75715e>//ä¸€æ¬¡æ€§è¯»å–buf_sizeæ•°é‡çš„éŸ³é¢‘ï¼Œå³dmaæœ€å¤§æ¬è¿ä¸€æ¬¡çš„æ•°æ®é‡ï¼Œè¯»æˆåŠŸåï¼Œå†™å…¥txï¼Œå³å¯é€šè¿‡MAX98357Aæ’­æ”¾
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>while</span> (<span style=color:#ae81ff>1</span>) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>i2s_channel_read</span>(rx_handle, buf, BUF_SIZE, <span style=color:#f92672>&amp;</span>bytes, <span style=color:#ae81ff>1000</span>) <span style=color:#f92672>==</span> ESP_OK)
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>i2s_channel_write</span>(tx_handle, buf, BUF_SIZE, <span style=color:#f92672>&amp;</span>bytes, <span style=color:#ae81ff>1000</span>);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>vTaskDelay</span>(<span style=color:#a6e22e>pdMS_TO_TICKS</span>(<span style=color:#ae81ff>5</span>));
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>vTaskDelete</span>(NULL);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>app_main</span>(<span style=color:#66d9ef>void</span>){
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>i2s_tx_init</span>();
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>i2s_rx_init</span>();
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>xTaskCreate</span>(i2s_read_task, <span style=color:#e6db74>&#34;i2s_read_task&#34;</span>, <span style=color:#ae81ff>4096</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>2</span>, NULL, tskIDLE_PRIORITY, NULL);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=err-driveri2s_stdh>err driver/i2s_std.h<a hidden class=anchor aria-hidden=true href=#err-driveri2s_stdh>#</a></h2><pre><code>4 | #include &quot;driver/i2s_std.h&quot;
  |          ^~~~~~~~~~~~~~~~~~
</code></pre><p>compilation terminated.</p><h1 id=å£°éŸ³å°>å£°éŸ³å°<a hidden class=anchor aria-hidden=true href=#å£°éŸ³å°>#</a></h1><p>åŸå§‹é‡‡æ ·æ•°æ® ä» INMP441 â†’ åŸæ ·å†™å…¥ MAX98357Aï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>i2s_channel_read<span style=color:#f92672>(</span>rx_handle, buf, BUF_SIZE, &amp;bytes, 1000<span style=color:#f92672>)</span>;
</span></span><span style=display:flex><span>i2s_channel_write<span style=color:#f92672>(</span>tx_handle, buf, BUF_SIZE, &amp;bytes, 1000<span style=color:#f92672>)</span>;
</span></span></code></pre></div><p>è¿™ç›¸å½“äºâ€œ1:1 ç›´é€šâ€ï¼Œä½†ï¼š</p><p><strong>INMP441</strong> è¾“å‡ºå¹…åº¦è¾ƒå°ï¼ˆå¤§çº¦ Â±0.1V æ•°å­—å¹…åº¦ï¼‰</p><p>MAX98357A éœ€è¦è¾ƒé«˜å¹…åº¦çš„ I2S PCM è¾“å…¥æ‰èƒ½æ»¡åŠŸç‡è¾“å‡º</p><p>å› æ­¤è¦â€œæ”¾å¤§æ•°å­—ä¿¡å·â€ï¼Œç›¸å½“äºâ€œè½¯ä»¶éŸ³é‡æ”¾å¤§â€ã€‚</p><h2 id=æœ€ç®€å•çš„æ”¾å¤§æ–¹æ³•æ•°å­—å¢ç›Š>æœ€ç®€å•çš„æ”¾å¤§æ–¹æ³•ï¼ˆæ•°å­—å¢ç›Šï¼‰<a hidden class=anchor aria-hidden=true href=#æœ€ç®€å•çš„æ”¾å¤§æ–¹æ³•æ•°å­—å¢ç›Š>#</a></h2><p>ä½ å¯ä»¥åœ¨è¯»å®Œ buffer åï¼Œå¯¹æ¯ä¸ªé‡‡æ ·å€¼ä¹˜ä¸€ä¸ªå¢ç›Šç³»æ•°ï¼Œæ¯”å¦‚ Ã—2ã€Ã—4ã€Ã—8 ç­‰ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>static void i2s_read_task<span style=color:#f92672>(</span>void *args<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    size_t bytes <span style=color:#f92672>=</span> 0;
</span></span><span style=display:flex><span>    const float gain <span style=color:#f92672>=</span> 8.0f; // ğŸ”Š å¢ç›Šå€æ•°ï¼ˆå»ºè®® 2~8ï¼Œå¤ªå¤§å¯èƒ½å¤±çœŸï¼‰
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>while</span> <span style=color:#f92672>(</span>1<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>i2s_channel_read<span style=color:#f92672>(</span>rx_handle, buf, BUF_SIZE, &amp;bytes, 1000<span style=color:#f92672>)</span> <span style=color:#f92672>==</span> ESP_OK<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            // æŠŠè¯»å–åˆ°çš„ 32-bit æ•°æ®æ”¾å¤§
</span></span><span style=display:flex><span>            int32_t *samples <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>int32_t *<span style=color:#f92672>)</span>buf;
</span></span><span style=display:flex><span>            int samples_count <span style=color:#f92672>=</span> bytes / sizeof<span style=color:#f92672>(</span>int32_t<span style=color:#f92672>)</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span>int i <span style=color:#f92672>=</span> 0; i &lt; samples_count; i++<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                int64_t temp <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>int64_t<span style=color:#f92672>)(</span>samples<span style=color:#f92672>[</span>i<span style=color:#f92672>]</span> * gain<span style=color:#f92672>)</span>;
</span></span><span style=display:flex><span>                // é™å¹…é˜²æ­¢æº¢å‡º
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>temp &gt; INT32_MAX<span style=color:#f92672>)</span> temp <span style=color:#f92672>=</span> INT32_MAX;
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>temp &lt; INT32_MIN<span style=color:#f92672>)</span> temp <span style=color:#f92672>=</span> INT32_MIN;
</span></span><span style=display:flex><span>                samples<span style=color:#f92672>[</span>i<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>int32_t<span style=color:#f92672>)</span>temp;
</span></span><span style=display:flex><span>            <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            i2s_channel_write<span style=color:#f92672>(</span>tx_handle, buf, bytes, &amp;bytes, 1000<span style=color:#f92672>)</span>;
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        vTaskDelay<span style=color:#f92672>(</span>pdMS_TO_TICKS<span style=color:#f92672>(</span>5<span style=color:#f92672>))</span>;
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><h2 id=å¢ç›Šè¯´æ˜>å¢ç›Šè¯´æ˜<a hidden class=anchor aria-hidden=true href=#å¢ç›Šè¯´æ˜>#</a></h2><p>å‚æ•° å»ºè®®å€¼ æ•ˆæœ
gain = 2.0f ç¨å¾®æ”¾å¤§ï¼ŒéŸ³é‡æå‡ä¸€ç‚¹
gain = 4.0f æ˜æ˜¾æå‡ï¼ˆæ¨èåˆå§‹å€¼ï¼‰
gain = 8.0f æœ€å¤§éŸ³é‡ï¼ˆå¯èƒ½ç•¥æœ‰å¤±çœŸï¼‰</p><h2 id=ç¡¬ä»¶æ–¹é¢è¦æ³¨æ„>ç¡¬ä»¶æ–¹é¢è¦æ³¨æ„<a hidden class=anchor aria-hidden=true href=#ç¡¬ä»¶æ–¹é¢è¦æ³¨æ„>#</a></h2><p>MAX98357A ç”µæºè¦è¶³å¤Ÿç¨³</p><p>3.3V ç”µæµä¸è¶³ä¼šå¯¼è‡´éŸ³é‡å°ã€å£°éŸ³å‘é—·ï¼›</p><p>å»ºè®®ä¾›ç”µ 3.3V â‰¥ 500mAã€‚</p><p>å–‡å­é˜»æŠ—</p><p>æ¨èä½¿ç”¨ 4Î© / 3W å°å–‡å­ï¼›</p><p>è‹¥æ¥ 8Î© å–‡å­ï¼ŒéŸ³é‡å¤©ç”Ÿä¼šå°çº¦ä¸€åŠã€‚</p><p>LRC/BCLK è¿çº¿</p><p>ç¡®ä¿ LRCã€BCLK è¿æ¥æ­£ç¡®ï¼Œå¦åˆ™ MAX98357A å¯èƒ½æ²¡åŒæ­¥å¥½ï¼Œå¯¼è‡´è¾“å‡ºåŠŸç‡ä½ã€‚</p><h1 id=study>Study<a hidden class=anchor aria-hidden=true href=#study>#</a></h1><p>ESP32 VSCode ESP IDF
<a href=https://www.bilibili.com/video/BV1Au4m1T7vX>https://www.bilibili.com/video/BV1Au4m1T7vX</a>
<a href=https://www.bilibili.com/video/BV1Kx421D7Bo>https://www.bilibili.com/video/BV1Kx421D7Bo</a></p><p>å•ç‰‡æœºESP32æ•™ç¨‹
<a href=https://www.bilibili.com/video/BV1bqVnzREnQ>https://www.bilibili.com/video/BV1bqVnzREnQ</a></p><p>ESP32éŸ³ç®±æ•™ç¨‹
<a href=https://www.bilibili.com/video/BV1rzbWeiE6t>https://www.bilibili.com/video/BV1rzbWeiE6t</a></p><p>ESP32å°æ™ºæ•™ç¨‹
<a href=https://www.bilibili.com/video/BV1tuVfzbEWz>https://www.bilibili.com/video/BV1tuVfzbEWz</a></p><p>ESP-IDFå®ç°æ— æŸINMP441é‡‡é›†éŸ³é¢‘+MAX98357Aæ’­æ”¾éŸ³é¢‘
<a href=https://blog.csdn.net/qq_44392698/article/details/147032820>https://blog.csdn.net/qq_44392698/article/details/147032820</a></p></div><footer class=post-footer><ul class=post-tags><li><a href=https://qfsyso.github.io/tags/c/>C</a></li><li><a href=https://qfsyso.github.io/tags/esp32/>ESP32</a></li></ul><nav class=paginav><a class=prev href=https://qfsyso.github.io/posts/weld-dev/><span class=title>Â« Prev</span><br><span>Weld Dev</span>
</a><a class=next href=https://qfsyso.github.io/posts/soft-copyright/><span class=title>Next Â»</span><br><span>Soft Copyright</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share ESP32  INMP411 MAX98357A on x" href="https://x.com/intent/tweet/?text=ESP32%20%20INMP411%20MAX98357A&amp;url=https%3a%2f%2fqfsyso.github.io%2fposts%2fesp32-inmp411-max98357a%2f&amp;hashtags=C%2cESP32"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share ESP32  INMP411 MAX98357A on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fqfsyso.github.io%2fposts%2fesp32-inmp411-max98357a%2f&amp;title=ESP32%20%20INMP411%20MAX98357A&amp;summary=ESP32%20%20INMP411%20MAX98357A&amp;source=https%3a%2f%2fqfsyso.github.io%2fposts%2fesp32-inmp411-max98357a%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share ESP32  INMP411 MAX98357A on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fqfsyso.github.io%2fposts%2fesp32-inmp411-max98357a%2f&title=ESP32%20%20INMP411%20MAX98357A"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share ESP32  INMP411 MAX98357A on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fqfsyso.github.io%2fposts%2fesp32-inmp411-max98357a%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share ESP32  INMP411 MAX98357A on whatsapp" href="https://api.whatsapp.com/send?text=ESP32%20%20INMP411%20MAX98357A%20-%20https%3a%2f%2fqfsyso.github.io%2fposts%2fesp32-inmp411-max98357a%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share ESP32  INMP411 MAX98357A on telegram" href="https://telegram.me/share/url?text=ESP32%20%20INMP411%20MAX98357A&amp;url=https%3a%2f%2fqfsyso.github.io%2fposts%2fesp32-inmp411-max98357a%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share ESP32  INMP411 MAX98357A on ycombinator" href="https://news.ycombinator.com/submitlink?t=ESP32%20%20INMP411%20MAX98357A&u=https%3a%2f%2fqfsyso.github.io%2fposts%2fesp32-inmp411-max98357a%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer></article></main><footer class=footer><div class=wtime><div class=wtime2>CST<span id=beijingTime></span> GMT <span id=londonTime></span> EST <span id=newYorkTime></span> PST<span id=losAngelesTime></span></div><div class=wtime2 style=display:none>ä¸œäº¬<span id=tokyoTime></span></div><div class=wtime2 style=display:none>æ¬§æ´²-å·´é»<span id=parisTime></span></div><div class=wtime2 style=display:none>UTC<span id=utcTime></span></div></div><span>&copy; 2025 <a href=https://qfsyso.github.io/>MLOG</a></span> Â·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a>
</span><script type=text/javascript>const timeZoneOffsets={beijing:8,tokyo:9,paris:[1,2],london:[0,1],newYork:[-5,-4],losAngeles:[-8,-7]};function padZero(e){return e<10?"0"+e:e}function formatTime(e){const t=e.getFullYear(),n=padZero(e.getMonth()+1),s=padZero(e.getDate()),o=padZero(e.getHours()),i=padZero(e.getMinutes()),a=padZero(e.getSeconds());return`${t}-${n}-${s} ${o}:${i}:${a}`}function isDaylightSavingTime(e,t){const o=e.getMonth(),n=new Date(e.getFullYear(),3,8,2,0,0),s=new Date(e.getFullYear(),10,1,2,0,0);return(t==="paris"||t==="london"||t==="newYork"||t==="losAngeles")&&e>=n&&e<s}function updateTime(){const e=new Date,t=new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds()),n=formatTime(t);document.getElementById("utcTime").innerHTML=n;for(const n in timeZoneOffsets){const e=timeZoneOffsets[n];let s;Array.isArray(e)?s=isDaylightSavingTime(t,n)?e[1]:e[0]:s=e;const o=new Date(t.getTime()+s*60*60*1e3);document.getElementById(n+"Time").innerHTML=formatTime(o)}setTimeout(updateTime,1e3)}window.onload=function(){updateTime()};function notfound(e){var n=e.src,t=n.split("/"),s=t[t.length-1];e.src="https://47.115.223.75:8080/group1/v2/"+s+"?timestamp="+Date.now(),e.onerror=null}</script></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>